{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/store/auth-store.ts"],"sourcesContent":["/**\r\n * Store global de autenticacion usando Zustand CON PERSISTENCIA\r\n */\r\n\r\nimport { create } from 'zustand';\r\nimport { persist } from 'zustand/middleware';\r\nimport { User } from '@/lib/types/usuario';\r\n\r\ninterface AuthState {\r\n  // Estado\r\n  user: User | null;\r\n  token: string | null;\r\n  refreshToken: string | null;\r\n  isLoading: boolean;\r\n  isAuthenticated: boolean;\r\n  \r\n  // Acciones\r\n  login: (user: User, token: string, refreshToken: string) => void;\r\n  logout: () => void;\r\n  initialize: () => void;\r\n  clearLoading: () => void;\r\n}\r\n\r\n/**\r\n * Store de autenticacion con persistencia\r\n */\r\nexport const useAuthStore = create<AuthState>()(\r\n  persist(\r\n    (set, get) => ({\r\n      // Estado inicial\r\n      user: null,\r\n      token: null,\r\n      refreshToken: null,\r\n      isLoading: true,\r\n      isAuthenticated: false,\r\n\r\n      /**\r\n       * Inicia sesion con usuario y tokens\r\n       */\r\n      login: (user: User, token: string, refreshToken: string) => {\r\n        console.log('üîÑ Store.login():', { \r\n          user: user.username, \r\n          token: token.substring(0, 10) + '...',\r\n          refreshToken: refreshToken.substring(0, 10) + '...'\r\n        });\r\n        \r\n        // Guardar en localStorage y cookie para que proxy.ts pueda leer el token\r\n        if (typeof window !== 'undefined') {\r\n          localStorage.setItem('user_data', JSON.stringify(user));\r\n          localStorage.setItem('auth_token', token);\r\n          localStorage.setItem('refresh_token', refreshToken);\r\n          document.cookie = `auth_token=${token}; path=/; max-age=86400`;\r\n          console.log('üíæ Store: Datos guardados en localStorage y cookie');\r\n        }\r\n\r\n        // Actualizar estado\r\n        set({\r\n          user,\r\n          token,\r\n          refreshToken,\r\n          isAuthenticated: true,\r\n          isLoading: false,\r\n        });\r\n        \r\n        console.log('‚úÖ Store: Login completado - Estado actualizado');\r\n      },\r\n\r\n      /**\r\n       * Cierra sesion y limpia datos\r\n       */\r\n      logout: () => {\r\n        console.log('üîÑ Store: Iniciando logout...');\r\n        \r\n        // Limpiar localStorage\r\n        if (typeof window !== 'undefined') {\r\n          localStorage.removeItem('user_data');\r\n          localStorage.removeItem('auth_token');\r\n          localStorage.removeItem('refresh_token');\r\n          console.log('üßπ Store: localStorage limpiado');\r\n        }\r\n\r\n        // Actualizar estado\r\n        set({\r\n          user: null,\r\n          token: null,\r\n          refreshToken: null,\r\n          isAuthenticated: false,\r\n          isLoading: false,\r\n        });\r\n        \r\n        console.log('‚úÖ Store: Logout completado');\r\n      },\r\n\r\n      /**\r\n       * Inicializa el store desde localStorage\r\n       */\r\n      initialize: () => {\r\n        console.log('üîÑ Store: Inicializando desde localStorage...');\r\n        \r\n        if (typeof window === 'undefined') {\r\n          set({ isLoading: false });\r\n          return;\r\n        }\r\n\r\n        try {\r\n          const userData = localStorage.getItem('user_data');\r\n          const token = localStorage.getItem('auth_token');\r\n          const refreshToken = localStorage.getItem('refresh_token');\r\n          \r\n          console.log('üì¶ Store.initialize(): Datos encontrados:', { \r\n            userData: userData ? '‚úÖ' : '‚ùå',\r\n            token: token ? '‚úÖ' : '‚ùå',\r\n            refreshToken: refreshToken ? '‚úÖ' : '‚ùå'\r\n          });\r\n\r\n          if (userData && token) {\r\n            const user = JSON.parse(userData) as User;\r\n            set({\r\n              user,\r\n              token,\r\n              refreshToken,\r\n              isAuthenticated: true,\r\n              isLoading: false,\r\n            });\r\n            console.log('‚úÖ Store: Usuario autenticado cargado:', user.username);\r\n          } else {\r\n            set({ \r\n              isLoading: false,\r\n              isAuthenticated: false \r\n            });\r\n            console.log('‚ùå Store: No hay usuario autenticado en localStorage');\r\n          }\r\n        } catch (error) {\r\n          console.error('üí• Store: Error en initialize():', error);\r\n          set({ \r\n            isLoading: false,\r\n            isAuthenticated: false \r\n          });\r\n        }\r\n      },\r\n\r\n      /**\r\n       * Limpia el estado de loading\r\n       */\r\n      clearLoading: () => {\r\n        set({ isLoading: false });\r\n      },\r\n    }),\r\n    {\r\n      name: 'auth-storage',\r\n      // Solo persistir estos campos\r\n      partialize: (state) => ({\r\n        user: state.user,\r\n        token: state.token,\r\n        refreshToken: state.refreshToken,\r\n        isAuthenticated: state.isAuthenticated,\r\n      }),\r\n    }\r\n  )\r\n);"],"names":[],"mappings":"AAAA;;CAEC;;;;AAED;AACA;;;AAqBO,MAAM,eAAe,IAAA,kKAAM,IAChC,IAAA,wJAAO,EACL,CAAC,KAAK,MAAQ,CAAC;QACb,iBAAiB;QACjB,MAAM;QACN,OAAO;QACP,cAAc;QACd,WAAW;QACX,iBAAiB;QAEjB;;OAEC,GACD,OAAO,CAAC,MAAY,OAAe;YACjC,QAAQ,GAAG,CAAC,qBAAqB;gBAC/B,MAAM,KAAK,QAAQ;gBACnB,OAAO,MAAM,SAAS,CAAC,GAAG,MAAM;gBAChC,cAAc,aAAa,SAAS,CAAC,GAAG,MAAM;YAChD;YAEA,yEAAyE;YACzE;;YAQA,oBAAoB;YACpB,IAAI;gBACF;gBACA;gBACA;gBACA,iBAAiB;gBACjB,WAAW;YACb;YAEA,QAAQ,GAAG,CAAC;QACd;QAEA;;OAEC,GACD,QAAQ;YACN,QAAQ,GAAG,CAAC;YAEZ,uBAAuB;YACvB;;YAOA,oBAAoB;YACpB,IAAI;gBACF,MAAM;gBACN,OAAO;gBACP,cAAc;gBACd,iBAAiB;gBACjB,WAAW;YACb;YAEA,QAAQ,GAAG,CAAC;QACd;QAEA;;OAEC,GACD,YAAY;YACV,QAAQ,GAAG,CAAC;YAEZ,wCAAmC;gBACjC,IAAI;oBAAE,WAAW;gBAAM;gBACvB;YACF;;;QAqCF;QAEA;;OAEC,GACD,cAAc;YACZ,IAAI;gBAAE,WAAW;YAAM;QACzB;IACF,CAAC,GACD;IACE,MAAM;IACN,8BAA8B;IAC9B,YAAY,CAAC,QAAU,CAAC;YACtB,MAAM,MAAM,IAAI;YAChB,OAAO,MAAM,KAAK;YAClB,cAAc,MAAM,YAAY;YAChC,iBAAiB,MAAM,eAAe;QACxC,CAAC;AACH"}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/lib/types/usuario.ts"],"sourcesContent":["export enum UserRole {\r\n  ADMIN = 'admin',\r\n  SUPERVISOR = 'supervisor',\r\n  VENDEDOR = 'vendedor',\r\n  CAJERO = 'cajero',\r\n  CLIENTE = 'cliente',\r\n}\r\n\r\nexport interface LoginCredentials {\r\n  username: string;\r\n  password: string;\r\n}\r\n\r\nexport interface AuthResponse {\r\n  user: User;\r\n  token: string;\r\n  refreshToken: string;\r\n}\r\n\r\nexport interface User {\r\n  id: number;\r\n  username: string;\r\n  email: string;\r\n  nombre: string;\r\n  apellido: string;\r\n  rol: UserRole;\r\n  activo: boolean;\r\n  fecha_creacion: string;\r\n  ultimo_acceso: string | null;\r\n  password?: string; // Solo para desarrollo\r\n}"],"names":[],"mappings":";;;;AAAO,IAAA,AAAK,kCAAA;;;;;;WAAA"}},
    {"offset": {"line": 115, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/lib/roles/role-types.ts"],"sourcesContent":["/**\r\n * Definicion de tipos y constantes relacionadas con roles y permisos\r\n */\r\n\r\nimport { UserRole } from '../types/usuario';\r\n\r\n/**\r\n * Acciones que se pueden realizar en el sistema\r\n */\r\nexport enum Permission {\r\n  // Productos\r\n  PRODUCTOS_VER = 'productos:ver',\r\n  PRODUCTOS_CREAR = 'productos:crear',\r\n  PRODUCTOS_EDITAR = 'productos:editar',\r\n  PRODUCTOS_ELIMINAR = 'productos:eliminar',\r\n  \r\n  // Clientes\r\n  CLIENTES_VER = 'clientes:ver',\r\n  CLIENTES_CREAR = 'clientes:crear',\r\n  CLIENTES_EDITAR = 'clientes:editar',\r\n  CLIENTES_ELIMINAR = 'clientes:eliminar',\r\n  \r\n  // Ventas\r\n  VENTAS_VER = 'ventas:ver',\r\n  VENTAS_CREAR = 'ventas:crear',\r\n  VENTAS_CANCELAR = 'ventas:cancelar',\r\n  VENTAS_VER_TODAS = 'ventas:ver_todas',\r\n  \r\n  // Reportes\r\n  REPORTES_VER = 'reportes:ver',\r\n  REPORTES_EXPORTAR = 'reportes:exportar',\r\n  \r\n  // Usuarios\r\n  USUARIOS_VER = 'usuarios:ver',\r\n  USUARIOS_CREAR = 'usuarios:crear',\r\n  USUARIOS_EDITAR = 'usuarios:editar',\r\n  USUARIOS_ELIMINAR = 'usuarios:eliminar',\r\n  \r\n  // Configuracion\r\n  CONFIG_VER = 'config:ver',\r\n  CONFIG_EDITAR = 'config:editar',\r\n}\r\n\r\n/**\r\n * Tipo para mapa de permisos por rol\r\n */\r\nexport type RolePermissions = {\r\n  [key in UserRole]: Permission[];\r\n};"],"names":[],"mappings":"AAAA;;CAEC;;;;AAOM,IAAA,AAAK,oCAAA;IACV,YAAY;;;;;IAMZ,WAAW;;;;;IAMX,SAAS;;;;;IAMT,WAAW;;;IAIX,WAAW;;;;;IAMX,gBAAgB;;;WA7BN"}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/lib/roles/role-config.ts"],"sourcesContent":["/**\r\n * Configuraci√≥n de permisos por rol\r\n */\r\n\r\nimport { UserRole } from '../types/usuario';\r\nimport { Permission, RolePermissions } from './role-types';\r\n\r\n/**\r\n * Mapa de permisos asignados a cada rol\r\n */\r\nexport const rolePermissions: RolePermissions = {\r\n  /**\r\n   * Administrador: acceso completo a todas las funcionalidades\r\n   */\r\n  [UserRole.ADMIN]: [\r\n    Permission.PRODUCTOS_VER,\r\n    Permission.PRODUCTOS_CREAR,\r\n    Permission.PRODUCTOS_EDITAR,\r\n    Permission.PRODUCTOS_ELIMINAR,\r\n\r\n    Permission.CLIENTES_VER,\r\n    Permission.CLIENTES_CREAR,\r\n    Permission.CLIENTES_EDITAR,\r\n    Permission.CLIENTES_ELIMINAR,\r\n\r\n    Permission.VENTAS_VER,\r\n    Permission.VENTAS_CREAR,\r\n    Permission.VENTAS_CANCELAR,\r\n    Permission.VENTAS_VER_TODAS,\r\n\r\n    Permission.REPORTES_VER,\r\n    Permission.REPORTES_EXPORTAR,\r\n\r\n    Permission.USUARIOS_VER,\r\n    Permission.USUARIOS_CREAR,\r\n    Permission.USUARIOS_EDITAR,\r\n    Permission.USUARIOS_ELIMINAR,\r\n\r\n    Permission.CONFIG_VER,\r\n    Permission.CONFIG_EDITAR,\r\n  ],\r\n\r\n  /**\r\n   * Supervisor: puede gestionar productos, clientes, ventas y ver reportes\r\n   */\r\n  [UserRole.SUPERVISOR]: [\r\n    Permission.PRODUCTOS_VER,\r\n    Permission.PRODUCTOS_CREAR,\r\n    Permission.PRODUCTOS_EDITAR,\r\n\r\n    Permission.CLIENTES_VER,\r\n    Permission.CLIENTES_CREAR,\r\n    Permission.CLIENTES_EDITAR,\r\n\r\n    Permission.VENTAS_VER,\r\n    Permission.VENTAS_CREAR,\r\n    Permission.VENTAS_CANCELAR,\r\n    Permission.VENTAS_VER_TODAS,\r\n\r\n    Permission.REPORTES_VER,\r\n    Permission.REPORTES_EXPORTAR,\r\n  ],\r\n\r\n  /**\r\n   * Vendedor: puede realizar ventas y ver productos y clientes\r\n   */\r\n  [UserRole.VENDEDOR]: [\r\n    Permission.PRODUCTOS_VER,\r\n\r\n    Permission.CLIENTES_VER,\r\n    Permission.CLIENTES_CREAR,\r\n\r\n    Permission.VENTAS_VER,\r\n    Permission.VENTAS_CREAR,\r\n  ],\r\n\r\n  /**\r\n   * Cajero: enfocado en registrar y cobrar ventas en caja\r\n   */\r\n  [UserRole.CAJERO]: [\r\n    Permission.VENTAS_VER,\r\n    Permission.VENTAS_CREAR,\r\n    Permission.VENTAS_CANCELAR,\r\n    Permission.CLIENTES_VER,\r\n  ],\r\n\r\n  /**\r\n   * Cliente: si lo quieres agregar\r\n   */\r\n  [UserRole.CLIENTE]: [\r\n    Permission.VENTAS_VER, // solo ver sus propias ventas\r\n  ],\r\n};\r\n\r\n/**\r\n * Nombres descriptivos de los roles\r\n */\r\nexport const roleLabels: Record<UserRole, string> = {\r\n  [UserRole.ADMIN]: 'Administrador',\r\n  [UserRole.SUPERVISOR]: 'Supervisor',\r\n  [UserRole.VENDEDOR]: 'Vendedor',\r\n  [UserRole.CAJERO]: 'Cajero',\r\n  [UserRole.CLIENTE]: 'Cliente',\r\n};\r\n\r\n/**\r\n * Descripciones de los roles\r\n */\r\nexport const roleDescriptions: Record<UserRole, string> = {\r\n  [UserRole.ADMIN]: 'Acceso completo al sistema, puede gestionar usuarios y configuraci√≥n',\r\n  [UserRole.SUPERVISOR]: 'Puede gestionar productos, clientes, ventas y ver reportes',\r\n  [UserRole.VENDEDOR]: 'Puede realizar ventas y consultar productos y clientes',\r\n  [UserRole.CAJERO]: 'Puede registrar y cobrar ventas en caja, gestionando clientes b√°sicos',\r\n  [UserRole.CLIENTE]: 'Solo puede consultar sus propias ventas',\r\n};\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;AAED;AACA;;;AAKO,MAAM,kBAAmC;IAC9C;;GAEC,GACD,CAAC,mIAAQ,CAAC,KAAK,CAAC,EAAE;QAChB,2IAAU,CAAC,aAAa;QACxB,2IAAU,CAAC,eAAe;QAC1B,2IAAU,CAAC,gBAAgB;QAC3B,2IAAU,CAAC,kBAAkB;QAE7B,2IAAU,CAAC,YAAY;QACvB,2IAAU,CAAC,cAAc;QACzB,2IAAU,CAAC,eAAe;QAC1B,2IAAU,CAAC,iBAAiB;QAE5B,2IAAU,CAAC,UAAU;QACrB,2IAAU,CAAC,YAAY;QACvB,2IAAU,CAAC,eAAe;QAC1B,2IAAU,CAAC,gBAAgB;QAE3B,2IAAU,CAAC,YAAY;QACvB,2IAAU,CAAC,iBAAiB;QAE5B,2IAAU,CAAC,YAAY;QACvB,2IAAU,CAAC,cAAc;QACzB,2IAAU,CAAC,eAAe;QAC1B,2IAAU,CAAC,iBAAiB;QAE5B,2IAAU,CAAC,UAAU;QACrB,2IAAU,CAAC,aAAa;KACzB;IAED;;GAEC,GACD,CAAC,mIAAQ,CAAC,UAAU,CAAC,EAAE;QACrB,2IAAU,CAAC,aAAa;QACxB,2IAAU,CAAC,eAAe;QAC1B,2IAAU,CAAC,gBAAgB;QAE3B,2IAAU,CAAC,YAAY;QACvB,2IAAU,CAAC,cAAc;QACzB,2IAAU,CAAC,eAAe;QAE1B,2IAAU,CAAC,UAAU;QACrB,2IAAU,CAAC,YAAY;QACvB,2IAAU,CAAC,eAAe;QAC1B,2IAAU,CAAC,gBAAgB;QAE3B,2IAAU,CAAC,YAAY;QACvB,2IAAU,CAAC,iBAAiB;KAC7B;IAED;;GAEC,GACD,CAAC,mIAAQ,CAAC,QAAQ,CAAC,EAAE;QACnB,2IAAU,CAAC,aAAa;QAExB,2IAAU,CAAC,YAAY;QACvB,2IAAU,CAAC,cAAc;QAEzB,2IAAU,CAAC,UAAU;QACrB,2IAAU,CAAC,YAAY;KACxB;IAED;;GAEC,GACD,CAAC,mIAAQ,CAAC,MAAM,CAAC,EAAE;QACjB,2IAAU,CAAC,UAAU;QACrB,2IAAU,CAAC,YAAY;QACvB,2IAAU,CAAC,eAAe;QAC1B,2IAAU,CAAC,YAAY;KACxB;IAED;;GAEC,GACD,CAAC,mIAAQ,CAAC,OAAO,CAAC,EAAE;QAClB,2IAAU,CAAC,UAAU;KACtB;AACH;AAKO,MAAM,aAAuC;IAClD,CAAC,mIAAQ,CAAC,KAAK,CAAC,EAAE;IAClB,CAAC,mIAAQ,CAAC,UAAU,CAAC,EAAE;IACvB,CAAC,mIAAQ,CAAC,QAAQ,CAAC,EAAE;IACrB,CAAC,mIAAQ,CAAC,MAAM,CAAC,EAAE;IACnB,CAAC,mIAAQ,CAAC,OAAO,CAAC,EAAE;AACtB;AAKO,MAAM,mBAA6C;IACxD,CAAC,mIAAQ,CAAC,KAAK,CAAC,EAAE;IAClB,CAAC,mIAAQ,CAAC,UAAU,CAAC,EAAE;IACvB,CAAC,mIAAQ,CAAC,QAAQ,CAAC,EAAE;IACrB,CAAC,mIAAQ,CAAC,MAAM,CAAC,EAAE;IACnB,CAAC,mIAAQ,CAAC,OAAO,CAAC,EAAE;AACtB"}},
    {"offset": {"line": 250, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/lib/roles/role-checker.ts"],"sourcesContent":["/**\r\n * Funciones utilitarias para verificar permisos y roles\r\n */\r\n\r\nimport { User, UserRole } from '../types/usuario';\r\nimport { Permission } from './role-types';\r\nimport { rolePermissions } from './role-config';\r\n\r\n/**\r\n * Verifica si un usuario tiene un permiso especifico\r\n */\r\nexport function hasPermission(user: User | null, permission: Permission): boolean {\r\n  if (!user) return false;\r\n  \r\n  const permissions = rolePermissions[user.rol];\r\n  return permissions.includes(permission);\r\n}\r\n\r\n/**\r\n * Verifica si un usuario tiene al menos uno de los permisos especificados\r\n */\r\nexport function hasAnyPermission(user: User | null, permissions: Permission[]): boolean {\r\n  if (!user) return false;\r\n  \r\n  return permissions.some(permission => hasPermission(user, permission));\r\n}\r\n\r\n/**\r\n * Verifica si un usuario tiene todos los permisos especificados\r\n */\r\nexport function hasAllPermissions(user: User | null, permissions: Permission[]): boolean {\r\n  if (!user) return false;\r\n  \r\n  return permissions.every(permission => hasPermission(user, permission));\r\n}\r\n\r\n/**\r\n * Verifica si un usuario tiene un rol especifico\r\n */\r\nexport function hasRole(user: User | null, role: UserRole): boolean {\r\n  if (!user) return false;\r\n  \r\n  return user.rol === role;\r\n}\r\n\r\n/**\r\n * Verifica si un usuario tiene al menos uno de los roles especificados\r\n */\r\nexport function hasAnyRole(user: User | null, roles: UserRole[]): boolean {\r\n  if (!user) return false;\r\n  \r\n  return roles.includes(user.rol);\r\n}\r\n\r\n/**\r\n * Obtiene todos los permisos de un usuario\r\n */\r\nexport function getUserPermissions(user: User | null): Permission[] {\r\n  if (!user) return [];\r\n  \r\n  return rolePermissions[user.rol];\r\n}\r\n\r\n/**\r\n * Verifica si un usuario puede ver una seccion especifica\r\n */\r\nexport function canAccessSection(user: User | null, section: string): boolean {\r\n  if (!user) return false;\r\n  \r\n  // El dashboard es visible para cualquier usuario autenticado\r\n  if (section === 'dashboard') {\r\n    return true;\r\n  }\r\n\r\n  const sectionPermissions: Record<string, Permission> = {\r\n    productos: Permission.PRODUCTOS_VER,\r\n    clientes: Permission.CLIENTES_VER,\r\n    ventas: Permission.VENTAS_VER,\r\n    reportes: Permission.REPORTES_VER,\r\n    usuarios: Permission.USUARIOS_VER,\r\n    configuracion: Permission.CONFIG_VER,\r\n  };\r\n  \r\n  const requiredPermission = sectionPermissions[section];\r\n  if (!requiredPermission) return false;\r\n  \r\n  return hasPermission(user, requiredPermission);\r\n}\r\n\r\n/**\r\n * Verifica si un usuario es administrador\r\n */\r\nexport function isAdmin(user: User | null): boolean {\r\n  return hasRole(user, UserRole.ADMIN);\r\n}\r\n\r\n/**\r\n * Verifica si un usuario es supervisor o superior\r\n */\r\nexport function isSupervisorOrAbove(user: User | null): boolean {\r\n  return hasAnyRole(user, [UserRole.ADMIN, UserRole.SUPERVISOR]);\r\n}\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;;;;;;;;;AAED;AACA;AACA;;;;AAKO,SAAS,cAAc,IAAiB,EAAE,UAAsB;IACrE,IAAI,CAAC,MAAM,OAAO;IAElB,MAAM,cAAc,iJAAe,CAAC,KAAK,GAAG,CAAC;IAC7C,OAAO,YAAY,QAAQ,CAAC;AAC9B;AAKO,SAAS,iBAAiB,IAAiB,EAAE,WAAyB;IAC3E,IAAI,CAAC,MAAM,OAAO;IAElB,OAAO,YAAY,IAAI,CAAC,CAAA,aAAc,cAAc,MAAM;AAC5D;AAKO,SAAS,kBAAkB,IAAiB,EAAE,WAAyB;IAC5E,IAAI,CAAC,MAAM,OAAO;IAElB,OAAO,YAAY,KAAK,CAAC,CAAA,aAAc,cAAc,MAAM;AAC7D;AAKO,SAAS,QAAQ,IAAiB,EAAE,IAAc;IACvD,IAAI,CAAC,MAAM,OAAO;IAElB,OAAO,KAAK,GAAG,KAAK;AACtB;AAKO,SAAS,WAAW,IAAiB,EAAE,KAAiB;IAC7D,IAAI,CAAC,MAAM,OAAO;IAElB,OAAO,MAAM,QAAQ,CAAC,KAAK,GAAG;AAChC;AAKO,SAAS,mBAAmB,IAAiB;IAClD,IAAI,CAAC,MAAM,OAAO,EAAE;IAEpB,OAAO,iJAAe,CAAC,KAAK,GAAG,CAAC;AAClC;AAKO,SAAS,iBAAiB,IAAiB,EAAE,OAAe;IACjE,IAAI,CAAC,MAAM,OAAO;IAElB,6DAA6D;IAC7D,IAAI,YAAY,aAAa;QAC3B,OAAO;IACT;IAEA,MAAM,qBAAiD;QACrD,WAAW,2IAAU,CAAC,aAAa;QACnC,UAAU,2IAAU,CAAC,YAAY;QACjC,QAAQ,2IAAU,CAAC,UAAU;QAC7B,UAAU,2IAAU,CAAC,YAAY;QACjC,UAAU,2IAAU,CAAC,YAAY;QACjC,eAAe,2IAAU,CAAC,UAAU;IACtC;IAEA,MAAM,qBAAqB,kBAAkB,CAAC,QAAQ;IACtD,IAAI,CAAC,oBAAoB,OAAO;IAEhC,OAAO,cAAc,MAAM;AAC7B;AAKO,SAAS,QAAQ,IAAiB;IACvC,OAAO,QAAQ,MAAM,mIAAQ,CAAC,KAAK;AACrC;AAKO,SAAS,oBAAoB,IAAiB;IACnD,OAAO,WAAW,MAAM;QAAC,mIAAQ,CAAC,KAAK;QAAE,mIAAQ,CAAC,UAAU;KAAC;AAC/D"}},
    {"offset": {"line": 334, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/lib/config/test-users.ts"],"sourcesContent":["import { LoginCredentials, User, UserRole } from '../types/usuario';\r\n\r\n// Usuarios de prueba en memoria\r\nexport const testUsers: User[] = [\r\n  {\r\n    id: 1,\r\n    username: 'admin',\r\n    email: 'admin@test.com',\r\n    nombre: 'Admin',\r\n    apellido: 'Principal',\r\n    rol: UserRole.ADMIN,\r\n    activo: true,\r\n    fecha_creacion: new Date().toISOString(),\r\n    ultimo_acceso: null,\r\n    password: 'admin',\r\n  },\r\n  {\r\n    id: 2,\r\n    username: 'supervisor', \r\n    email: 'supervisor@test.com',\r\n    nombre: 'Sara',\r\n    apellido: 'Supervisor',\r\n    rol: UserRole.SUPERVISOR,\r\n    activo: true,\r\n    fecha_creacion: new Date().toISOString(),\r\n    ultimo_acceso: null,\r\n    password: 'supervisor',\r\n  },\r\n  {\r\n    id: 3,\r\n    username: 'vendedor',\r\n    email: 'vendedor@test.com',\r\n    nombre: 'V√≠ctor',\r\n    apellido: 'Vendedor',\r\n    rol: UserRole.VENDEDOR,\r\n    activo: true,\r\n    fecha_creacion: new Date().toISOString(),\r\n    ultimo_acceso: null,\r\n    password: 'vendedor',\r\n  },\r\n  {\r\n    id: 4,\r\n    username: 'cajero',\r\n    email: 'cajero@test.com',\r\n    nombre: 'Carlos',\r\n    apellido: 'Cajero',\r\n    rol: UserRole.CAJERO,\r\n    activo: true,\r\n    fecha_creacion: new Date().toISOString(),\r\n    ultimo_acceso: null,\r\n    password: 'cajero',\r\n  },\r\n  {\r\n    id: 5,\r\n    username: 'cliente',\r\n    email: 'cliente@test.com',\r\n    nombre: 'Carla',\r\n    apellido: 'Cliente',\r\n    rol: UserRole.CLIENTE,\r\n    activo: true,\r\n    fecha_creacion: new Date().toISOString(),\r\n    ultimo_acceso: null,\r\n    password: 'cliente',\r\n  },\r\n];\r\n\r\n// Funci√≥n INFALIBLE de login - VERSI√ìN SIMPLIFICADA\r\nexport function loginTestUser(credentials: LoginCredentials): User | null {\r\n  console.log('üîê loginTestUser(): Credenciales recibidas:', credentials);\r\n  \r\n  // Validaci√≥n b√°sica\r\n  if (!credentials?.username || !credentials?.password) {\r\n    console.error('‚ùå Credenciales incompletas');\r\n    return null;\r\n  }\r\n\r\n  const { username, password } = credentials;\r\n  \r\n  // BUSCAR USUARIO DE FORMA DIRECTA\r\n  const user = testUsers.find(u => \r\n    u.username.toLowerCase() === username.toLowerCase().trim() && \r\n    u.password === password\r\n  );\r\n\r\n  console.log('üë§ Resultado b√∫squeda:', user ? `‚úÖ ${user.username}` : '‚ùå No encontrado');\r\n  \r\n  return user || null;\r\n}\r\n\r\n// Debug function\r\nexport function debugUsers(): void {\r\n  console.log('üë• USUARIOS DISPONIBLES:');\r\n  testUsers.forEach(user => {\r\n    console.log(`   ${user.username} / ${user.password} (${user.rol})`);\r\n  });\r\n}\r\n\r\n// Auto-debug al cargar\r\nif (typeof window !== 'undefined') {\r\n  setTimeout(() => {\r\n    console.log('üîç Debug autom√°tico de usuarios:');\r\n    debugUsers();\r\n  }, 1000);\r\n}"],"names":[],"mappings":";;;;;;;;AAAA;;AAGO,MAAM,YAAoB;IAC/B;QACE,IAAI;QACJ,UAAU;QACV,OAAO;QACP,QAAQ;QACR,UAAU;QACV,KAAK,mIAAQ,CAAC,KAAK;QACnB,QAAQ;QACR,gBAAgB,IAAI,OAAO,WAAW;QACtC,eAAe;QACf,UAAU;IACZ;IACA;QACE,IAAI;QACJ,UAAU;QACV,OAAO;QACP,QAAQ;QACR,UAAU;QACV,KAAK,mIAAQ,CAAC,UAAU;QACxB,QAAQ;QACR,gBAAgB,IAAI,OAAO,WAAW;QACtC,eAAe;QACf,UAAU;IACZ;IACA;QACE,IAAI;QACJ,UAAU;QACV,OAAO;QACP,QAAQ;QACR,UAAU;QACV,KAAK,mIAAQ,CAAC,QAAQ;QACtB,QAAQ;QACR,gBAAgB,IAAI,OAAO,WAAW;QACtC,eAAe;QACf,UAAU;IACZ;IACA;QACE,IAAI;QACJ,UAAU;QACV,OAAO;QACP,QAAQ;QACR,UAAU;QACV,KAAK,mIAAQ,CAAC,MAAM;QACpB,QAAQ;QACR,gBAAgB,IAAI,OAAO,WAAW;QACtC,eAAe;QACf,UAAU;IACZ;IACA;QACE,IAAI;QACJ,UAAU;QACV,OAAO;QACP,QAAQ;QACR,UAAU;QACV,KAAK,mIAAQ,CAAC,OAAO;QACrB,QAAQ;QACR,gBAAgB,IAAI,OAAO,WAAW;QACtC,eAAe;QACf,UAAU;IACZ;CACD;AAGM,SAAS,cAAc,WAA6B;IACzD,QAAQ,GAAG,CAAC,+CAA+C;IAE3D,oBAAoB;IACpB,IAAI,CAAC,aAAa,YAAY,CAAC,aAAa,UAAU;QACpD,QAAQ,KAAK,CAAC;QACd,OAAO;IACT;IAEA,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG;IAE/B,kCAAkC;IAClC,MAAM,OAAO,UAAU,IAAI,CAAC,CAAA,IAC1B,EAAE,QAAQ,CAAC,WAAW,OAAO,SAAS,WAAW,GAAG,IAAI,MACxD,EAAE,QAAQ,KAAK;IAGjB,QAAQ,GAAG,CAAC,0BAA0B,OAAO,CAAC,EAAE,EAAE,KAAK,QAAQ,EAAE,GAAG;IAEpE,OAAO,QAAQ;AACjB;AAGO,SAAS;IACd,QAAQ,GAAG,CAAC;IACZ,UAAU,OAAO,CAAC,CAAA;QAChB,QAAQ,GAAG,CAAC,CAAC,GAAG,EAAE,KAAK,QAAQ,CAAC,GAAG,EAAE,KAAK,QAAQ,CAAC,EAAE,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC;IACpE;AACF;AAEA,uBAAuB;AACvB"}},
    {"offset": {"line": 432, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/hooks/use-auth.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect } from 'react';\r\nimport { User, LoginCredentials } from '../lib/types/usuario';\r\nimport { useAuthStore } from '@/store/auth-store';\r\nimport { Permission } from '@/lib/roles/role-types';\r\nimport { hasPermission as checkPermission } from '@/lib/roles/role-checker';\r\nimport { loginTestUser, debugUsers } from '@/lib/config/test-users';\r\n\r\nexport function useAuth() {\r\n  const {\r\n    user,\r\n    isAuthenticated,\r\n    isLoading,\r\n    login: storeLogin,\r\n    logout: storeLogout,\r\n    initialize,\r\n    clearLoading,\r\n  } = useAuthStore();\r\n\r\n  // Inicializar al montar el hook\r\n  useEffect(() => {\r\n    console.log('üéØ useAuth inicializando...');\r\n    initialize();\r\n    debugUsers();\r\n  }, [initialize]);\r\n\r\n  // =============================\r\n  // üöÄ LOGIN\r\n  // =============================\r\n  async function login(credentials: LoginCredentials) {\r\n    console.log('üîê Intentando login...', credentials);\r\n\r\n    try {\r\n      const loggedUser = loginTestUser(credentials);\r\n\r\n      if (!loggedUser) {\r\n        console.warn('‚ùå Credenciales incorrectas');\r\n        clearLoading();\r\n        return {\r\n          success: false,\r\n          error: 'Usuario o contrase√±a incorrectos',\r\n        };\r\n      }\r\n\r\n      console.log('‚úÖ Usuario autenticado:', loggedUser.username);\r\n\r\n      const updatedUser: User = {\r\n        ...loggedUser,\r\n        ultimo_acceso: new Date().toISOString(),\r\n      };\r\n\r\n      // Tokens fake para pruebas\r\n      const token = `fake-token-${updatedUser.id}-${Date.now()}`;\r\n      const refreshToken = `fake-refresh-${updatedUser.id}-${Date.now()}`;\r\n\r\n      storeLogin(updatedUser, token, refreshToken);\r\n\r\n      return { success: true, user: updatedUser };\r\n    } catch (error) {\r\n      console.error('üí• Error en login:', error);\r\n      return {\r\n        success: false,\r\n        error: 'Error interno del sistema',\r\n      };\r\n    }\r\n  }\r\n\r\n  // =============================\r\n  // üö™ LOGOUT\r\n  // =============================\r\n  function logout() {\r\n    console.log('üö™ Cerrando sesi√≥n...');\r\n    storeLogout();\r\n    document.cookie =\r\n      'auth_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT';\r\n  }\r\n\r\n  // =============================\r\n  // üîí ROLES Y PERMISOS\r\n  // =============================\r\n  function hasPermission(permission: Permission | string): boolean {\r\n    if (!user) return false;\r\n    return checkPermission(user, permission as Permission);\r\n  }\r\n\r\n  // =============================\r\n  // üì¶ RETORNO DEL HOOK\r\n  // =============================\r\n  return {\r\n    user,\r\n    isAuthenticated,\r\n    isLoading,\r\n    login,\r\n    logout,\r\n    hasPermission,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAEA;AAEA;AACA;AAPA;;;;;AASO,SAAS;IACd,MAAM,EACJ,IAAI,EACJ,eAAe,EACf,SAAS,EACT,OAAO,UAAU,EACjB,QAAQ,WAAW,EACnB,UAAU,EACV,YAAY,EACb,GAAG,IAAA,sIAAY;IAEhB,gCAAgC;IAChC,IAAA,kNAAS,EAAC;QACR,QAAQ,GAAG,CAAC;QACZ;QACA,IAAA,4IAAU;IACZ,GAAG;QAAC;KAAW;IAEf,gCAAgC;IAChC,WAAW;IACX,gCAAgC;IAChC,eAAe,MAAM,WAA6B;QAChD,QAAQ,GAAG,CAAC,0BAA0B;QAEtC,IAAI;YACF,MAAM,aAAa,IAAA,+IAAa,EAAC;YAEjC,IAAI,CAAC,YAAY;gBACf,QAAQ,IAAI,CAAC;gBACb;gBACA,OAAO;oBACL,SAAS;oBACT,OAAO;gBACT;YACF;YAEA,QAAQ,GAAG,CAAC,0BAA0B,WAAW,QAAQ;YAEzD,MAAM,cAAoB;gBACxB,GAAG,UAAU;gBACb,eAAe,IAAI,OAAO,WAAW;YACvC;YAEA,2BAA2B;YAC3B,MAAM,QAAQ,CAAC,WAAW,EAAE,YAAY,EAAE,CAAC,CAAC,EAAE,KAAK,GAAG,IAAI;YAC1D,MAAM,eAAe,CAAC,aAAa,EAAE,YAAY,EAAE,CAAC,CAAC,EAAE,KAAK,GAAG,IAAI;YAEnE,WAAW,aAAa,OAAO;YAE/B,OAAO;gBAAE,SAAS;gBAAM,MAAM;YAAY;QAC5C,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,sBAAsB;YACpC,OAAO;gBACL,SAAS;gBACT,OAAO;YACT;QACF;IACF;IAEA,gCAAgC;IAChC,YAAY;IACZ,gCAAgC;IAChC,SAAS;QACP,QAAQ,GAAG,CAAC;QACZ;QACA,SAAS,MAAM,GACb;IACJ;IAEA,gCAAgC;IAChC,sBAAsB;IACtB,gCAAgC;IAChC,SAAS,cAAc,UAA+B;QACpD,IAAI,CAAC,MAAM,OAAO;QAClB,OAAO,IAAA,gJAAe,EAAC,MAAM;IAC/B;IAEA,gCAAgC;IAChC,sBAAsB;IACtB,gCAAgC;IAChC,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 522, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/lib/config/settings.ts"],"sourcesContent":["/**\r\n * Configuraciones globales y constantes de la aplicacion\r\n */\r\n\r\n/**\r\n * Configuracion de paginacion\r\n */\r\nexport const pagination = {\r\n  defaultPageSize: 10,\r\n  pageSizeOptions: [10, 25, 50, 100],\r\n  maxPageSize: 100,\r\n} as const;\r\n\r\n/**\r\n * Configuracion de validacion\r\n */\r\nexport const validation = {\r\n  password: {\r\n    minLength: 8,\r\n    maxLength: 128,\r\n    requireUppercase: true,\r\n    requireLowercase: true,\r\n    requireNumbers: true,\r\n    requireSpecialChars: true,\r\n  },\r\n  username: {\r\n    minLength: 3,\r\n    maxLength: 50,\r\n  },\r\n  email: {\r\n    maxLength: 255,\r\n  },\r\n  producto: {\r\n    nombre: {\r\n      minLength: 2,\r\n      maxLength: 200,\r\n    },\r\n    codigo: {\r\n      minLength: 1,\r\n      maxLength: 50,\r\n    },\r\n    precio: {\r\n      min: 0,\r\n      max: 999999.99,\r\n    },\r\n    stock: {\r\n      min: 0,\r\n      max: 999999,\r\n    },\r\n  },\r\n  cliente: {\r\n    nombre: {\r\n      minLength: 2,\r\n      maxLength: 200,\r\n    },\r\n    documento: {\r\n      minLength: 8,\r\n      maxLength: 20,\r\n    },\r\n  },\r\n} as const;\r\n\r\n/**\r\n * Configuracion de formato de moneda\r\n */\r\nexport const currency = {\r\n  locale: 'es-PE',\r\n  currency: 'PEN',\r\n  symbol: 'S/',\r\n} as const;\r\n\r\n/**\r\n * Configuracion de formato de fecha\r\n */\r\nexport const dateFormat = {\r\n  display: 'dd/MM/yyyy',\r\n  displayWithTime: 'dd/MM/yyyy HH:mm',\r\n  api: 'yyyy-MM-dd',\r\n  apiWithTime: \"yyyy-MM-dd'T'HH:mm:ss\",\r\n} as const;\r\n\r\n/**\r\n * Mensajes de la aplicacion\r\n */\r\nexport const messages = {\r\n  success: {\r\n    created: 'Registro creado exitosamente',\r\n    updated: 'Registro actualizado exitosamente',\r\n    deleted: 'Registro eliminado exitosamente',\r\n    saved: 'Cambios guardados exitosamente',\r\n  },\r\n  error: {\r\n    generic: 'Ha ocurrido un error. Por favor intenta nuevamente',\r\n    network: 'Error de conexion. Verifica tu internet',\r\n    unauthorized: 'No tienes permisos para realizar esta accion',\r\n    notFound: 'Registro no encontrado',\r\n    validation: 'Por favor corrige los errores en el formulario',\r\n  },\r\n  confirmation: {\r\n    delete: 'Estas seguro de eliminar este registro?',\r\n    cancel: 'Estas seguro de cancelar? Se perderan los cambios',\r\n  },\r\n} as const;\r\n\r\n/**\r\n * Configuracion de almacenamiento local\r\n */\r\nexport const storage = {\r\n  keys: {\r\n    authToken: 'auth_token',\r\n    refreshToken: 'refresh_token',\r\n    user: 'user_data',\r\n    cart: 'cart_data',\r\n    preferences: 'user_preferences',\r\n  },\r\n} as const;"],"names":[],"mappings":"AAAA;;CAEC,GAED;;CAEC;;;;;;;;;;;;;;AACM,MAAM,aAAa;IACxB,iBAAiB;IACjB,iBAAiB;QAAC;QAAI;QAAI;QAAI;KAAI;IAClC,aAAa;AACf;AAKO,MAAM,aAAa;IACxB,UAAU;QACR,WAAW;QACX,WAAW;QACX,kBAAkB;QAClB,kBAAkB;QAClB,gBAAgB;QAChB,qBAAqB;IACvB;IACA,UAAU;QACR,WAAW;QACX,WAAW;IACb;IACA,OAAO;QACL,WAAW;IACb;IACA,UAAU;QACR,QAAQ;YACN,WAAW;YACX,WAAW;QACb;QACA,QAAQ;YACN,WAAW;YACX,WAAW;QACb;QACA,QAAQ;YACN,KAAK;YACL,KAAK;QACP;QACA,OAAO;YACL,KAAK;YACL,KAAK;QACP;IACF;IACA,SAAS;QACP,QAAQ;YACN,WAAW;YACX,WAAW;QACb;QACA,WAAW;YACT,WAAW;YACX,WAAW;QACb;IACF;AACF;AAKO,MAAM,WAAW;IACtB,QAAQ;IACR,UAAU;IACV,QAAQ;AACV;AAKO,MAAM,aAAa;IACxB,SAAS;IACT,iBAAiB;IACjB,KAAK;IACL,aAAa;AACf;AAKO,MAAM,WAAW;IACtB,SAAS;QACP,SAAS;QACT,SAAS;QACT,SAAS;QACT,OAAO;IACT;IACA,OAAO;QACL,SAAS;QACT,SAAS;QACT,cAAc;QACd,UAAU;QACV,YAAY;IACd;IACA,cAAc;QACZ,QAAQ;QACR,QAAQ;IACV;AACF;AAKO,MAAM,UAAU;IACrB,MAAM;QACJ,WAAW;QACX,cAAc;QACd,MAAM;QACN,MAAM;QACN,aAAa;IACf;AACF"}},
    {"offset": {"line": 638, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/lib/formatters.ts"],"sourcesContent":["/**\r\n * Utilidades para formateo de datos\r\n */\r\n\r\nimport { format, parseISO } from 'date-fns';\r\nimport { es } from 'date-fns/locale';\r\nimport { currency, dateFormat } from './config/settings';\r\n\r\n/**\r\n * Formatea un numero como moneda\r\n */\r\nexport function formatCurrency(amount: number): string {\r\n  return new Intl.NumberFormat(currency.locale, {\r\n    style: 'currency',\r\n    currency: currency.currency,\r\n    minimumFractionDigits: 2,\r\n    maximumFractionDigits: 2,\r\n  }).format(amount);\r\n}\r\n\r\n/**\r\n * Formatea un numero simple con separadores de miles\r\n */\r\nexport function formatNumber(value: number, decimals: number = 0): string {\r\n  return new Intl.NumberFormat(currency.locale, {\r\n    minimumFractionDigits: decimals,\r\n    maximumFractionDigits: decimals,\r\n  }).format(value);\r\n}\r\n\r\n/**\r\n * Formatea una fecha a string legible\r\n */\r\nexport function formatDate(date: string | Date, withTime: boolean = false): string {\r\n  try {\r\n    const dateObj = typeof date === 'string' ? parseISO(date) : date;\r\n    const formatString = withTime ? dateFormat.displayWithTime : dateFormat.display;\r\n    \r\n    return format(dateObj, formatString, { locale: es });\r\n  } catch {\r\n    return 'Fecha invalida';\r\n  }\r\n}\r\n\r\n/**\r\n * Formatea una fecha para enviar a la API\r\n */\r\nexport function formatDateForApi(date: Date): string {\r\n  return format(date, dateFormat.api);\r\n}\r\n\r\n/**\r\n * Formatea una fecha con hora para enviar a la API\r\n */\r\nexport function formatDateTimeForApi(date: Date): string {\r\n  return format(date, dateFormat.apiWithTime);\r\n}\r\n\r\n/**\r\n * Formatea un nombre completo desde nombre y apellido\r\n */\r\nexport function formatFullName(nombre: string, apellido?: string | null): string {\r\n  if (!apellido) return nombre;\r\n  return `${nombre} ${apellido}`;\r\n}\r\n\r\n/**\r\n * Formatea un numero de documento con su tipo\r\n */\r\nexport function formatDocument(tipo: string, numero: string): string {\r\n  return `${tipo}: ${numero}`;\r\n}\r\n\r\n/**\r\n * Formatea un telefono\r\n */\r\nexport function formatPhone(phone: string): string {\r\n  // Eliminar caracteres no numericos\r\n  const cleaned = phone.replace(/\\D/g, '');\r\n  \r\n  // Formatear segun longitud\r\n  if (cleaned.length === 9) {\r\n    return cleaned.replace(/(\\d{3})(\\d{3})(\\d{3})/, '$1 $2 $3');\r\n  }\r\n  \r\n  return phone;\r\n}\r\n\r\n/**\r\n * Formatea un porcentaje\r\n */\r\nexport function formatPercentage(value: number, decimals: number = 2): string {\r\n  return `${formatNumber(value, decimals)}%`;\r\n}\r\n\r\n/**\r\n * Trunca un texto largo\r\n */\r\nexport function truncateText(text: string, maxLength: number): string {\r\n  if (text.length <= maxLength) return text;\r\n  \r\n  return `${text.substring(0, maxLength)}...`;\r\n}\r\n\r\n/**\r\n * Capitaliza la primera letra de un string\r\n */\r\nexport function capitalize(text: string): string {\r\n  if (!text) return '';\r\n  return text.charAt(0).toUpperCase() + text.slice(1).toLowerCase();\r\n}\r\n\r\n/**\r\n * Convierte un string a titulo (primera letra de cada palabra mayuscula)\r\n */\r\nexport function toTitleCase(text: string): string {\r\n  return text\r\n    .toLowerCase()\r\n    .split(' ')\r\n    .map(word => capitalize(word))\r\n    .join(' ');\r\n}"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;;;;;;;;;;;;;;;AAED;AAAA;AACA;AACA;;;;AAKO,SAAS,eAAe,MAAc;IAC3C,OAAO,IAAI,KAAK,YAAY,CAAC,qIAAQ,CAAC,MAAM,EAAE;QAC5C,OAAO;QACP,UAAU,qIAAQ,CAAC,QAAQ;QAC3B,uBAAuB;QACvB,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAKO,SAAS,aAAa,KAAa,EAAE,WAAmB,CAAC;IAC9D,OAAO,IAAI,KAAK,YAAY,CAAC,qIAAQ,CAAC,MAAM,EAAE;QAC5C,uBAAuB;QACvB,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAKO,SAAS,WAAW,IAAmB,EAAE,WAAoB,KAAK;IACvE,IAAI;QACF,MAAM,UAAU,OAAO,SAAS,WAAW,IAAA,oJAAQ,EAAC,QAAQ;QAC5D,MAAM,eAAe,WAAW,uIAAU,CAAC,eAAe,GAAG,uIAAU,CAAC,OAAO;QAE/E,OAAO,IAAA,gKAAM,EAAC,SAAS,cAAc;YAAE,QAAQ,kJAAE;QAAC;IACpD,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAKO,SAAS,iBAAiB,IAAU;IACzC,OAAO,IAAA,gKAAM,EAAC,MAAM,uIAAU,CAAC,GAAG;AACpC;AAKO,SAAS,qBAAqB,IAAU;IAC7C,OAAO,IAAA,gKAAM,EAAC,MAAM,uIAAU,CAAC,WAAW;AAC5C;AAKO,SAAS,eAAe,MAAc,EAAE,QAAwB;IACrE,IAAI,CAAC,UAAU,OAAO;IACtB,OAAO,GAAG,OAAO,CAAC,EAAE,UAAU;AAChC;AAKO,SAAS,eAAe,IAAY,EAAE,MAAc;IACzD,OAAO,GAAG,KAAK,EAAE,EAAE,QAAQ;AAC7B;AAKO,SAAS,YAAY,KAAa;IACvC,mCAAmC;IACnC,MAAM,UAAU,MAAM,OAAO,CAAC,OAAO;IAErC,2BAA2B;IAC3B,IAAI,QAAQ,MAAM,KAAK,GAAG;QACxB,OAAO,QAAQ,OAAO,CAAC,yBAAyB;IAClD;IAEA,OAAO;AACT;AAKO,SAAS,iBAAiB,KAAa,EAAE,WAAmB,CAAC;IAClE,OAAO,GAAG,aAAa,OAAO,UAAU,CAAC,CAAC;AAC5C;AAKO,SAAS,aAAa,IAAY,EAAE,SAAiB;IAC1D,IAAI,KAAK,MAAM,IAAI,WAAW,OAAO;IAErC,OAAO,GAAG,KAAK,SAAS,CAAC,GAAG,WAAW,GAAG,CAAC;AAC7C;AAKO,SAAS,WAAW,IAAY;IACrC,IAAI,CAAC,MAAM,OAAO;IAClB,OAAO,KAAK,MAAM,CAAC,GAAG,WAAW,KAAK,KAAK,KAAK,CAAC,GAAG,WAAW;AACjE;AAKO,SAAS,YAAY,IAAY;IACtC,OAAO,KACJ,WAAW,GACX,KAAK,CAAC,KACN,GAAG,CAAC,CAAA,OAAQ,WAAW,OACvB,IAAI,CAAC;AACV"}},
    {"offset": {"line": 738, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/components/modules/layout/header.tsx"],"sourcesContent":["/**\r\n * Barra superior del dashboard\r\n */\r\n\r\n'use client';\r\n\r\nimport React from 'react';\r\nimport { useAuth } from '@/hooks/use-auth';\r\nimport { formatFullName } from '@/lib/formatters';\r\nimport { roleLabels } from '@/lib/roles/role-config';\r\nimport { Bell, Settings } from 'lucide-react';\r\n\r\nexport function Header() {\r\n  const { user } = useAuth();\r\n  \r\n  if (!user) return null;\r\n  \r\n  return (\r\n    <header className=\"h-16 bg-white border-b border-secondary-200 flex items-center justify-between px-6\">\r\n      {/* Titulo de la pagina actual */}\r\n      <div>\r\n        <h2 className=\"text-xl font-semibold text-secondary-900\">\r\n          Bienvenido, {user.nombre}\r\n        </h2>\r\n        <p className=\"text-sm text-secondary-600\">{roleLabels[user.rol]}</p>\r\n      </div>\r\n      \r\n      {/* Acciones */}\r\n      <div className=\"flex items-center gap-4\">\r\n        {/* Notificaciones */}\r\n        <button className=\"p-2 text-secondary-600 hover:text-secondary-900 hover:bg-secondary-100 rounded-lg transition-colors relative\">\r\n          <Bell className=\"w-5 h-5\" />\r\n          <span className=\"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full\" />\r\n        </button>\r\n        \r\n        {/* Configuracion */}\r\n        <button className=\"p-2 text-secondary-600 hover:text-secondary-900 hover:bg-secondary-100 rounded-lg transition-colors\">\r\n          <Settings className=\"w-5 h-5\" />\r\n        </button>\r\n        \r\n        {/* Avatar y nombre */}\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"w-10 h-10 bg-primary-100 text-primary-700 rounded-full flex items-center justify-center font-medium\">\r\n            {user.nombre.charAt(0).toUpperCase()}\r\n          </div>\r\n          <div className=\"hidden md:block\">\r\n            <p className=\"text-sm font-medium text-secondary-900\">\r\n              {formatFullName(user.nombre, user.apellido)}\r\n            </p>\r\n            <p className=\"text-xs text-secondary-600\">{user.email}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}"],"names":[],"mappings":"AAAA;;CAEC;;;;;AAKD;AACA;AACA;AACA;AAAA;AANA;;;;;;AAQO,SAAS;IACd,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,+HAAO;IAExB,IAAI,CAAC,MAAM,OAAO;IAElB,qBACE,8OAAC;QAAO,WAAU;;0BAEhB,8OAAC;;kCACC,8OAAC;wBAAG,WAAU;;4BAA2C;4BAC1C,KAAK,MAAM;;;;;;;kCAE1B,8OAAC;wBAAE,WAAU;kCAA8B,4IAAU,CAAC,KAAK,GAAG,CAAC;;;;;;;;;;;;0BAIjE,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAO,WAAU;;0CAChB,8OAAC,2MAAI;gCAAC,WAAU;;;;;;0CAChB,8OAAC;gCAAK,WAAU;;;;;;;;;;;;kCAIlB,8OAAC;wBAAO,WAAU;kCAChB,cAAA,8OAAC,uNAAQ;4BAAC,WAAU;;;;;;;;;;;kCAItB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACZ,KAAK,MAAM,CAAC,MAAM,CAAC,GAAG,WAAW;;;;;;0CAEpC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAU;kDACV,IAAA,mIAAc,EAAC,KAAK,MAAM,EAAE,KAAK,QAAQ;;;;;;kDAE5C,8OAAC;wCAAE,WAAU;kDAA8B,KAAK,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMjE"}},
    {"offset": {"line": 906, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/components/modules/layout/sidebar.tsx"],"sourcesContent":["/**\r\n * Barra lateral de navegacion\r\n */\r\n\r\n'use client';\r\n\r\nimport React from 'react';\r\nimport Link from 'next/link';\r\nimport { usePathname } from 'next/navigation';\r\nimport { clsx } from 'clsx';\r\nimport {\r\n  LayoutDashboard,\r\n  Package,\r\n  Users,\r\n  ShoppingCart,\r\n  BarChart3,\r\n  LogOut,\r\n} from 'lucide-react';\r\nimport { useAuth } from '@/hooks/use-auth';\r\nimport { canAccessSection } from '@/lib/roles/role-checker';\r\n\r\ninterface NavItem {\r\n  label: string;\r\n  href: string;\r\n  icon: React.ReactNode;\r\n  section: string;\r\n}\r\n\r\nconst navItems: NavItem[] = [\r\n  {\r\n    label: 'Dashboard',\r\n    href: '/dashboard',\r\n    icon: <LayoutDashboard className=\"w-5 h-5\" />,\r\n    section: 'dashboard',\r\n  },\r\n  {\r\n    label: 'Productos',\r\n    href: '/dashboard/productos',\r\n    icon: <Package className=\"w-5 h-5\" />,\r\n    section: 'productos',\r\n  },\r\n  {\r\n    label: 'Clientes',\r\n    href: '/dashboard/clientes',\r\n    icon: <Users className=\"w-5 h-5\" />,\r\n    section: 'clientes',\r\n  },\r\n  {\r\n    label: 'Ventas',\r\n    href: '/dashboard/ventas',\r\n    icon: <ShoppingCart className=\"w-5 h-5\" />,\r\n    section: 'ventas',\r\n  },\r\n  {\r\n    label: 'Reportes',\r\n    href: '/dashboard/reportes',\r\n    icon: <BarChart3 className=\"w-5 h-5\" />,\r\n    section: 'reportes',\r\n  },\r\n];\r\n\r\nexport function Sidebar() {\r\n  const pathname = usePathname();\r\n  const { user, logout } = useAuth();\r\n  \r\n  return (\r\n    <aside className=\"w-64 bg-white border-r border-secondary-200 flex flex-col\">\r\n      {/* Logo */}\r\n      <div className=\"h-16 flex items-center justify-center border-b border-secondary-200\">\r\n        <h1 className=\"text-xl font-bold text-primary-600\">POS System</h1>\r\n      </div>\r\n      \r\n      {/* Navegacion */}\r\n      <nav className=\"flex-1 px-4 py-6 space-y-1\">\r\n        {navItems.map((item) => {\r\n          // Verificar si el usuario tiene acceso a esta seccion\r\n          if (!canAccessSection(user, item.section)) {\r\n            return null;\r\n          }\r\n          \r\n          const isActive = pathname === item.href;\r\n          \r\n          return (\r\n            <Link\r\n              key={item.href}\r\n              href={item.href}\r\n              className={clsx(\r\n                'flex items-center gap-3 px-4 py-3 rounded-lg transition-colors',\r\n                isActive\r\n                  ? 'bg-primary-50 text-primary-700 font-medium'\r\n                  : 'text-secondary-700 hover:bg-secondary-50'\r\n              )}\r\n            >\r\n              {item.icon}\r\n              <span>{item.label}</span>\r\n            </Link>\r\n          );\r\n        })}\r\n      </nav>\r\n      \r\n      {/* Footer con boton de logout */}\r\n      <div className=\"px-4 py-4 border-t border-secondary-200\">\r\n        <button\r\n          onClick={logout}\r\n          className=\"flex items-center gap-3 px-4 py-3 w-full rounded-lg text-secondary-700 hover:bg-secondary-50 transition-colors\"\r\n        >\r\n          <LogOut className=\"w-5 h-5\" />\r\n          <span>Cerrar Sesion</span>\r\n        </button>\r\n      </div>\r\n    </aside>\r\n  );\r\n}"],"names":[],"mappings":"AAAA;;CAEC;;;;;AAKD;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AAfA;;;;;;;;AAwBA,MAAM,WAAsB;IAC1B;QACE,OAAO;QACP,MAAM;QACN,oBAAM,8OAAC,gPAAe;YAAC,WAAU;;;;;;QACjC,SAAS;IACX;IACA;QACE,OAAO;QACP,MAAM;QACN,oBAAM,8OAAC,oNAAO;YAAC,WAAU;;;;;;QACzB,SAAS;IACX;IACA;QACE,OAAO;QACP,MAAM;QACN,oBAAM,8OAAC,8MAAK;YAAC,WAAU;;;;;;QACvB,SAAS;IACX;IACA;QACE,OAAO;QACP,MAAM;QACN,oBAAM,8OAAC,uOAAY;YAAC,WAAU;;;;;;QAC9B,SAAS;IACX;IACA;QACE,OAAO;QACP,MAAM;QACN,oBAAM,8OAAC,kOAAS;YAAC,WAAU;;;;;;QAC3B,SAAS;IACX;CACD;AAEM,SAAS;IACd,MAAM,WAAW,IAAA,iJAAW;IAC5B,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,IAAA,+HAAO;IAEhC,qBACE,8OAAC;QAAM,WAAU;;0BAEf,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAG,WAAU;8BAAqC;;;;;;;;;;;0BAIrD,8OAAC;gBAAI,WAAU;0BACZ,SAAS,GAAG,CAAC,CAAC;oBACb,sDAAsD;oBACtD,IAAI,CAAC,IAAA,mJAAgB,EAAC,MAAM,KAAK,OAAO,GAAG;wBACzC,OAAO;oBACT;oBAEA,MAAM,WAAW,aAAa,KAAK,IAAI;oBAEvC,qBACE,8OAAC,uKAAI;wBAEH,MAAM,KAAK,IAAI;wBACf,WAAW,IAAA,6IAAI,EACb,kEACA,WACI,+CACA;;4BAGL,KAAK,IAAI;0CACV,8OAAC;0CAAM,KAAK,KAAK;;;;;;;uBAVZ,KAAK,IAAI;;;;;gBAapB;;;;;;0BAIF,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBACC,SAAS;oBACT,WAAU;;sCAEV,8OAAC,qNAAM;4BAAC,WAAU;;;;;;sCAClB,8OAAC;sCAAK;;;;;;;;;;;;;;;;;;;;;;;AAKhB"}},
    {"offset": {"line": 1089, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/components/modules/layout/protected-route.tsx"],"sourcesContent":["/**\r\n * Componente para proteger rutas que requieren autenticacion\r\n */\r\n\r\n'use client';\r\n\r\nimport React, { useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuth } from '@/hooks/use-auth';\r\n\r\ninterface ProtectedRouteProps {\r\n  children: React.ReactNode;\r\n  requiredPermission?: string;\r\n}\r\n\r\nexport function ProtectedRoute({ children, requiredPermission }: ProtectedRouteProps) {\r\n  const router = useRouter();\r\n  const { isAuthenticated, isLoading, user, hasPermission } = useAuth();\r\n  \r\n  useEffect(() => {\r\n    if (!isLoading && !isAuthenticated) {\r\n      router.push('/login');\r\n    }\r\n  }, [isAuthenticated, isLoading, router]);\r\n  \r\n  // Mostrar loading mientras se verifica la autenticacion\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto\" />\r\n          <p className=\"mt-4 text-secondary-600\">Cargando...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  // Si no esta autenticado, no mostrar nada (se redirigira)\r\n  if (!isAuthenticated || !user) {\r\n    return null;\r\n  }\r\n  \r\n  // Verificar permisos si se especificaron\r\n  if (requiredPermission && !hasPermission(requiredPermission)) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-2xl font-bold text-secondary-900\">Acceso Denegado</h2>\r\n          <p className=\"mt-2 text-secondary-600\">\r\n            No tienes permisos para acceder a esta seccion\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  return <>{children}</>;\r\n}"],"names":[],"mappings":"AAAA;;CAEC;;;;;AAID;AACA;AACA;AAJA;;;;;AAWO,SAAS,eAAe,EAAE,QAAQ,EAAE,kBAAkB,EAAuB;IAClF,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,EAAE,eAAe,EAAE,SAAS,EAAE,IAAI,EAAE,aAAa,EAAE,GAAG,IAAA,+HAAO;IAEnE,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,aAAa,CAAC,iBAAiB;YAClC,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAiB;QAAW;KAAO;IAEvC,wDAAwD;IACxD,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAA0B;;;;;;;;;;;;;;;;;IAI/C;IAEA,0DAA0D;IAC1D,IAAI,CAAC,mBAAmB,CAAC,MAAM;QAC7B,OAAO;IACT;IAEA,yCAAyC;IACzC,IAAI,sBAAsB,CAAC,cAAc,qBAAqB;QAC5D,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAwC;;;;;;kCACtD,8OAAC;wBAAE,WAAU;kCAA0B;;;;;;;;;;;;;;;;;IAM/C;IAEA,qBAAO;kBAAG;;AACZ"}}]
}