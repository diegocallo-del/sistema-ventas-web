{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/components/ui/input.tsx"],"sourcesContent":["/**\r\n * Componente de input reutilizable\r\n */\r\n\r\nimport React from 'react';\r\nimport { clsx } from 'clsx';\r\n\r\ninterface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {\r\n  label?: string;\r\n  error?: string;\r\n  helperText?: string;\r\n  leftIcon?: React.ReactNode;\r\n  rightIcon?: React.ReactNode;\r\n}\r\n\r\nexport const Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ label, error, helperText, leftIcon, rightIcon, className, ...props }, ref) => {\r\n    return (\r\n      <div className=\"w-full\">\r\n        {label && (\r\n          <label className=\"block text-sm font-medium text-secondary-700 mb-1\">\r\n            {label}\r\n            {props.required && <span className=\"text-red-500 ml-1\">*</span>}\r\n          </label>\r\n        )}\r\n        \r\n        <div className=\"relative\">\r\n          {leftIcon && (\r\n            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n              {leftIcon}\r\n            </div>\r\n          )}\r\n          \r\n          <input\r\n            ref={ref}\r\n            className={clsx(\r\n              'block w-full rounded-lg border px-3 py-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-0 transition-colors',\r\n              error\r\n                ? 'border-red-300 text-red-900 placeholder-red-300 focus:ring-red-500 focus:border-red-500'\r\n                : 'border-secondary-300 focus:ring-primary-500 focus:border-primary-500',\r\n              leftIcon && 'pl-10',\r\n              rightIcon && 'pr-10',\r\n              props.disabled && 'bg-secondary-50 cursor-not-allowed',\r\n              className\r\n            )}\r\n            {...props}\r\n          />\r\n          \r\n          {rightIcon && (\r\n            <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none\">\r\n              {rightIcon}\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        {error && (\r\n          <p className=\"mt-1 text-sm text-red-600\">{error}</p>\r\n        )}\r\n        \r\n        {helperText && !error && (\r\n          <p className=\"mt-1 text-sm text-secondary-500\">{helperText}</p>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nInput.displayName = 'Input';"],"names":[],"mappings":"AAAA;;CAEC;;;;;AAED;AACA;;;;AAUO,MAAM,sBAAQ,gNAAK,CAAC,UAAU,CACnC,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,UAAU,EAAE,QAAQ,EAAE,SAAS,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACvE,qBACE,8OAAC;QAAI,WAAU;;YACZ,uBACC,8OAAC;gBAAM,WAAU;;oBACd;oBACA,MAAM,QAAQ,kBAAI,8OAAC;wBAAK,WAAU;kCAAoB;;;;;;;;;;;;0BAI3D,8OAAC;gBAAI,WAAU;;oBACZ,0BACC,8OAAC;wBAAI,WAAU;kCACZ;;;;;;kCAIL,8OAAC;wBACC,KAAK;wBACL,WAAW,IAAA,6IAAI,EACb,4HACA,QACI,4FACA,wEACJ,YAAY,SACZ,aAAa,SACb,MAAM,QAAQ,IAAI,sCAClB;wBAED,GAAG,KAAK;;;;;;oBAGV,2BACC,8OAAC;wBAAI,WAAU;kCACZ;;;;;;;;;;;;YAKN,uBACC,8OAAC;gBAAE,WAAU;0BAA6B;;;;;;YAG3C,cAAc,CAAC,uBACd,8OAAC;gBAAE,WAAU;0BAAmC;;;;;;;;;;;;AAIxD;AAGF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/components/ui/button.tsx"],"sourcesContent":["/**\r\n * Componente de boton reutilizable\r\n */\r\n\r\nimport React from 'react';\r\nimport { clsx } from 'clsx';\r\n\r\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  variant?: 'primary' | 'secondary' | 'danger' | 'ghost';\r\n  size?: 'sm' | 'md' | 'lg';\r\n  isLoading?: boolean;\r\n  fullWidth?: boolean;\r\n}\r\n\r\nexport function Button({\r\n  children,\r\n  variant = 'primary',\r\n  size = 'md',\r\n  isLoading = false,\r\n  fullWidth = false,\r\n  className,\r\n  disabled,\r\n  ...props\r\n}: ButtonProps) {\r\n  const baseStyles = 'font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed';\r\n  \r\n  const variantStyles = {\r\n    primary: 'bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500',\r\n    secondary: 'bg-secondary-200 text-secondary-900 hover:bg-secondary-300 focus:ring-secondary-500',\r\n    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',\r\n    ghost: 'bg-transparent text-secondary-700 hover:bg-secondary-100 focus:ring-secondary-500',\r\n  };\r\n  \r\n  const sizeStyles = {\r\n    sm: 'px-3 py-1.5 text-sm',\r\n    md: 'px-4 py-2 text-base',\r\n    lg: 'px-6 py-3 text-lg',\r\n  };\r\n  \r\n  return (\r\n    <button\r\n      className={clsx(\r\n        baseStyles,\r\n        variantStyles[variant],\r\n        sizeStyles[size],\r\n        fullWidth && 'w-full',\r\n        className\r\n      )}\r\n      disabled={disabled || isLoading}\r\n      {...props}\r\n    >\r\n      {isLoading ? (\r\n        <span className=\"flex items-center justify-center\">\r\n          <svg\r\n            className=\"animate-spin -ml-1 mr-2 h-4 w-4\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n          >\r\n            <circle\r\n              className=\"opacity-25\"\r\n              cx=\"12\"\r\n              cy=\"12\"\r\n              r=\"10\"\r\n              stroke=\"currentColor\"\r\n              strokeWidth=\"4\"\r\n            />\r\n            <path\r\n              className=\"opacity-75\"\r\n              fill=\"currentColor\"\r\n              d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n            />\r\n          </svg>\r\n          Cargando...\r\n        </span>\r\n      ) : (\r\n        children\r\n      )}\r\n    </button>\r\n  );\r\n}"],"names":[],"mappings":"AAAA;;CAEC;;;;;AAGD;;;AASO,SAAS,OAAO,EACrB,QAAQ,EACR,UAAU,SAAS,EACnB,OAAO,IAAI,EACX,YAAY,KAAK,EACjB,YAAY,KAAK,EACjB,SAAS,EACT,QAAQ,EACR,GAAG,OACS;IACZ,MAAM,aAAa;IAEnB,MAAM,gBAAgB;QACpB,SAAS;QACT,WAAW;QACX,QAAQ;QACR,OAAO;IACT;IAEA,MAAM,aAAa;QACjB,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,qBACE,8OAAC;QACC,WAAW,IAAA,6IAAI,EACb,YACA,aAAa,CAAC,QAAQ,EACtB,UAAU,CAAC,KAAK,EAChB,aAAa,UACb;QAEF,UAAU,YAAY;QACrB,GAAG,KAAK;kBAER,0BACC,8OAAC;YAAK,WAAU;;8BACd,8OAAC;oBACC,WAAU;oBACV,OAAM;oBACN,MAAK;oBACL,SAAQ;;sCAER,8OAAC;4BACC,WAAU;4BACV,IAAG;4BACH,IAAG;4BACH,GAAE;4BACF,QAAO;4BACP,aAAY;;;;;;sCAEd,8OAAC;4BACC,WAAU;4BACV,MAAK;4BACL,GAAE;;;;;;;;;;;;gBAEA;;;;;;mBAIR;;;;;;AAIR"}},
    {"offset": {"line": 204, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/components/ui/card.tsx"],"sourcesContent":["/**\r\n * Componente de tarjeta reutilizable\r\n */\r\n\r\nimport React from 'react';\r\nimport { clsx } from 'clsx';\r\n\r\ninterface CardProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  variant?: 'default' | 'bordered' | 'elevated';\r\n}\r\n\r\nexport function Card({ children, variant = 'default', className, ...props }: CardProps) {\r\n  const variantStyles = {\r\n    default: 'bg-white rounded-lg shadow',\r\n    bordered: 'bg-white rounded-lg border border-secondary-200',\r\n    elevated: 'bg-white rounded-lg shadow-lg',\r\n  };\r\n  \r\n  return (\r\n    <div className={clsx(variantStyles[variant], className)} {...props}>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface CardHeaderProps extends React.HTMLAttributes<HTMLDivElement> {}\r\n\r\nexport function CardHeader({ children, className, ...props }: CardHeaderProps) {\r\n  return (\r\n    <div className={clsx('px-6 py-4 border-b border-secondary-200', className)} {...props}>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface CardTitleProps extends React.HTMLAttributes<HTMLHeadingElement> {}\r\n\r\nexport function CardTitle({ children, className, ...props }: CardTitleProps) {\r\n  return (\r\n    <h3 className={clsx('text-lg font-semibold text-secondary-900', className)} {...props}>\r\n      {children}\r\n    </h3>\r\n  );\r\n}\r\n\r\ninterface CardContentProps extends React.HTMLAttributes<HTMLDivElement> {}\r\n\r\nexport function CardContent({ children, className, ...props }: CardContentProps) {\r\n  return (\r\n    <div className={clsx('px-6 py-4', className)} {...props}>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface CardFooterProps extends React.HTMLAttributes<HTMLDivElement> {}\r\n\r\nexport function CardFooter({ children, className, ...props }: CardFooterProps) {\r\n  return (\r\n    <div className={clsx('px-6 py-4 border-t border-secondary-200 bg-secondary-50', className)} {...props}>\r\n      {children}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;;AAGD;;;AAMO,SAAS,KAAK,EAAE,QAAQ,EAAE,UAAU,SAAS,EAAE,SAAS,EAAE,GAAG,OAAkB;IACpF,MAAM,gBAAgB;QACpB,SAAS;QACT,UAAU;QACV,UAAU;IACZ;IAEA,qBACE,8OAAC;QAAI,WAAW,IAAA,6IAAI,EAAC,aAAa,CAAC,QAAQ,EAAE;QAAa,GAAG,KAAK;kBAC/D;;;;;;AAGP;AAIO,SAAS,WAAW,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,OAAwB;IAC3E,qBACE,8OAAC;QAAI,WAAW,IAAA,6IAAI,EAAC,2CAA2C;QAAa,GAAG,KAAK;kBAClF;;;;;;AAGP;AAIO,SAAS,UAAU,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,OAAuB;IACzE,qBACE,8OAAC;QAAG,WAAW,IAAA,6IAAI,EAAC,4CAA4C;QAAa,GAAG,KAAK;kBAClF;;;;;;AAGP;AAIO,SAAS,YAAY,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,OAAyB;IAC7E,qBACE,8OAAC;QAAI,WAAW,IAAA,6IAAI,EAAC,aAAa;QAAa,GAAG,KAAK;kBACpD;;;;;;AAGP;AAIO,SAAS,WAAW,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,OAAwB;IAC3E,qBACE,8OAAC;QAAI,WAAW,IAAA,6IAAI,EAAC,2DAA2D;QAAa,GAAG,KAAK;kBAClG;;;;;;AAGP"}},
    {"offset": {"line": 286, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/store/auth-store.ts"],"sourcesContent":["/**\r\n * Store global de autenticacion usando Zustand CON PERSISTENCIA\r\n */\r\n\r\nimport { create } from 'zustand';\r\nimport { persist } from 'zustand/middleware';\r\nimport { User } from '@/lib/types/usuario';\r\n\r\ninterface AuthState {\r\n  // Estado\r\n  user: User | null;\r\n  token: string | null;\r\n  refreshToken: string | null;\r\n  isLoading: boolean;\r\n  isAuthenticated: boolean;\r\n  \r\n  // Acciones\r\n  login: (user: User, token: string, refreshToken: string) => void;\r\n  logout: () => void;\r\n  initialize: () => void;\r\n  clearLoading: () => void;\r\n}\r\n\r\n/**\r\n * Store de autenticacion con persistencia\r\n */\r\nexport const useAuthStore = create<AuthState>()(\r\n  persist(\r\n    (set, get) => ({\r\n      // Estado inicial\r\n      user: null,\r\n      token: null,\r\n      refreshToken: null,\r\n      isLoading: true,\r\n      isAuthenticated: false,\r\n\r\n      /**\r\n       * Inicia sesion con usuario y tokens\r\n       */\r\n      login: (user: User, token: string, refreshToken: string) => {\r\n        console.log('üîÑ Store.login():', { \r\n          user: user.username, \r\n          token: token.substring(0, 10) + '...',\r\n          refreshToken: refreshToken.substring(0, 10) + '...'\r\n        });\r\n        \r\n        // Guardar en localStorage y cookie para que proxy.ts pueda leer el token\r\n        if (typeof window !== 'undefined') {\r\n          localStorage.setItem('user_data', JSON.stringify(user));\r\n          localStorage.setItem('auth_token', token);\r\n          localStorage.setItem('refresh_token', refreshToken);\r\n          document.cookie = `auth_token=${token}; path=/; max-age=86400`;\r\n          console.log('üíæ Store: Datos guardados en localStorage y cookie');\r\n        }\r\n\r\n        // Actualizar estado\r\n        set({\r\n          user,\r\n          token,\r\n          refreshToken,\r\n          isAuthenticated: true,\r\n          isLoading: false,\r\n        });\r\n        \r\n        console.log('‚úÖ Store: Login completado - Estado actualizado');\r\n      },\r\n\r\n      /**\r\n       * Cierra sesion y limpia datos\r\n       */\r\n      logout: () => {\r\n        console.log('üîÑ Store: Iniciando logout...');\r\n        \r\n        // Limpiar localStorage\r\n        if (typeof window !== 'undefined') {\r\n          localStorage.removeItem('user_data');\r\n          localStorage.removeItem('auth_token');\r\n          localStorage.removeItem('refresh_token');\r\n          console.log('üßπ Store: localStorage limpiado');\r\n        }\r\n\r\n        // Actualizar estado\r\n        set({\r\n          user: null,\r\n          token: null,\r\n          refreshToken: null,\r\n          isAuthenticated: false,\r\n          isLoading: false,\r\n        });\r\n        \r\n        console.log('‚úÖ Store: Logout completado');\r\n      },\r\n\r\n      /**\r\n       * Inicializa el store desde localStorage\r\n       */\r\n      initialize: () => {\r\n        console.log('üîÑ Store: Inicializando desde localStorage...');\r\n        \r\n        if (typeof window === 'undefined') {\r\n          set({ isLoading: false });\r\n          return;\r\n        }\r\n\r\n        try {\r\n          const userData = localStorage.getItem('user_data');\r\n          const token = localStorage.getItem('auth_token');\r\n          const refreshToken = localStorage.getItem('refresh_token');\r\n          \r\n          console.log('üì¶ Store.initialize(): Datos encontrados:', { \r\n            userData: userData ? '‚úÖ' : '‚ùå',\r\n            token: token ? '‚úÖ' : '‚ùå',\r\n            refreshToken: refreshToken ? '‚úÖ' : '‚ùå'\r\n          });\r\n\r\n          if (userData && token) {\r\n            const user = JSON.parse(userData) as User;\r\n            set({\r\n              user,\r\n              token,\r\n              refreshToken,\r\n              isAuthenticated: true,\r\n              isLoading: false,\r\n            });\r\n            console.log('‚úÖ Store: Usuario autenticado cargado:', user.username);\r\n          } else {\r\n            set({ \r\n              isLoading: false,\r\n              isAuthenticated: false \r\n            });\r\n            console.log('‚ùå Store: No hay usuario autenticado en localStorage');\r\n          }\r\n        } catch (error) {\r\n          console.error('üí• Store: Error en initialize():', error);\r\n          set({ \r\n            isLoading: false,\r\n            isAuthenticated: false \r\n          });\r\n        }\r\n      },\r\n\r\n      /**\r\n       * Limpia el estado de loading\r\n       */\r\n      clearLoading: () => {\r\n        set({ isLoading: false });\r\n      },\r\n    }),\r\n    {\r\n      name: 'auth-storage',\r\n      // Solo persistir estos campos\r\n      partialize: (state) => ({\r\n        user: state.user,\r\n        token: state.token,\r\n        refreshToken: state.refreshToken,\r\n        isAuthenticated: state.isAuthenticated,\r\n      }),\r\n    }\r\n  )\r\n);"],"names":[],"mappings":"AAAA;;CAEC;;;;AAED;AACA;;;AAqBO,MAAM,eAAe,IAAA,kKAAM,IAChC,IAAA,wJAAO,EACL,CAAC,KAAK,MAAQ,CAAC;QACb,iBAAiB;QACjB,MAAM;QACN,OAAO;QACP,cAAc;QACd,WAAW;QACX,iBAAiB;QAEjB;;OAEC,GACD,OAAO,CAAC,MAAY,OAAe;YACjC,QAAQ,GAAG,CAAC,qBAAqB;gBAC/B,MAAM,KAAK,QAAQ;gBACnB,OAAO,MAAM,SAAS,CAAC,GAAG,MAAM;gBAChC,cAAc,aAAa,SAAS,CAAC,GAAG,MAAM;YAChD;YAEA,yEAAyE;YACzE;;YAQA,oBAAoB;YACpB,IAAI;gBACF;gBACA;gBACA;gBACA,iBAAiB;gBACjB,WAAW;YACb;YAEA,QAAQ,GAAG,CAAC;QACd;QAEA;;OAEC,GACD,QAAQ;YACN,QAAQ,GAAG,CAAC;YAEZ,uBAAuB;YACvB;;YAOA,oBAAoB;YACpB,IAAI;gBACF,MAAM;gBACN,OAAO;gBACP,cAAc;gBACd,iBAAiB;gBACjB,WAAW;YACb;YAEA,QAAQ,GAAG,CAAC;QACd;QAEA;;OAEC,GACD,YAAY;YACV,QAAQ,GAAG,CAAC;YAEZ,wCAAmC;gBACjC,IAAI;oBAAE,WAAW;gBAAM;gBACvB;YACF;;;QAqCF;QAEA;;OAEC,GACD,cAAc;YACZ,IAAI;gBAAE,WAAW;YAAM;QACzB;IACF,CAAC,GACD;IACE,MAAM;IACN,8BAA8B;IAC9B,YAAY,CAAC,QAAU,CAAC;YACtB,MAAM,MAAM,IAAI;YAChB,OAAO,MAAM,KAAK;YAClB,cAAc,MAAM,YAAY;YAChC,iBAAiB,MAAM,eAAe;QACxC,CAAC;AACH"}},
    {"offset": {"line": 375, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/lib/types/usuario.ts"],"sourcesContent":["export enum UserRole {\r\n  ADMIN = 'admin',\r\n  SUPERVISOR = 'supervisor',\r\n  VENDEDOR = 'vendedor',\r\n  CAJERO = 'cajero',\r\n  CLIENTE = 'cliente',\r\n}\r\n\r\nexport interface LoginCredentials {\r\n  username: string;\r\n  password: string;\r\n}\r\n\r\nexport interface AuthResponse {\r\n  user: User;\r\n  token: string;\r\n  refreshToken: string;\r\n}\r\n\r\nexport interface User {\r\n  id: number;\r\n  username: string;\r\n  email: string;\r\n  nombre: string;\r\n  apellido: string;\r\n  rol: UserRole;\r\n  activo: boolean;\r\n  fecha_creacion: string;\r\n  ultimo_acceso: string | null;\r\n  password?: string; // Solo para desarrollo\r\n}"],"names":[],"mappings":";;;;AAAO,IAAA,AAAK,kCAAA;;;;;;WAAA"}},
    {"offset": {"line": 391, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/lib/roles/role-types.ts"],"sourcesContent":["/**\r\n * Definicion de tipos y constantes relacionadas con roles y permisos\r\n */\r\n\r\nimport { UserRole } from '../types/usuario';\r\n\r\n/**\r\n * Acciones que se pueden realizar en el sistema\r\n */\r\nexport enum Permission {\r\n  // Productos\r\n  PRODUCTOS_VER = 'productos:ver',\r\n  PRODUCTOS_CREAR = 'productos:crear',\r\n  PRODUCTOS_EDITAR = 'productos:editar',\r\n  PRODUCTOS_ELIMINAR = 'productos:eliminar',\r\n  \r\n  // Clientes\r\n  CLIENTES_VER = 'clientes:ver',\r\n  CLIENTES_CREAR = 'clientes:crear',\r\n  CLIENTES_EDITAR = 'clientes:editar',\r\n  CLIENTES_ELIMINAR = 'clientes:eliminar',\r\n  \r\n  // Ventas\r\n  VENTAS_VER = 'ventas:ver',\r\n  VENTAS_CREAR = 'ventas:crear',\r\n  VENTAS_CANCELAR = 'ventas:cancelar',\r\n  VENTAS_VER_TODAS = 'ventas:ver_todas',\r\n  \r\n  // Reportes\r\n  REPORTES_VER = 'reportes:ver',\r\n  REPORTES_EXPORTAR = 'reportes:exportar',\r\n  \r\n  // Usuarios\r\n  USUARIOS_VER = 'usuarios:ver',\r\n  USUARIOS_CREAR = 'usuarios:crear',\r\n  USUARIOS_EDITAR = 'usuarios:editar',\r\n  USUARIOS_ELIMINAR = 'usuarios:eliminar',\r\n  \r\n  // Configuracion\r\n  CONFIG_VER = 'config:ver',\r\n  CONFIG_EDITAR = 'config:editar',\r\n}\r\n\r\n/**\r\n * Tipo para mapa de permisos por rol\r\n */\r\nexport type RolePermissions = {\r\n  [key in UserRole]: Permission[];\r\n};"],"names":[],"mappings":"AAAA;;CAEC;;;;AAOM,IAAA,AAAK,oCAAA;IACV,YAAY;;;;;IAMZ,WAAW;;;;;IAMX,SAAS;;;;;IAMT,WAAW;;;IAIX,WAAW;;;;;IAMX,gBAAgB;;;WA7BN"}},
    {"offset": {"line": 430, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/lib/roles/role-config.ts"],"sourcesContent":["/**\r\n * Configuraci√≥n de permisos por rol\r\n */\r\n\r\nimport { UserRole } from '../types/usuario';\r\nimport { Permission, RolePermissions } from './role-types';\r\n\r\n/**\r\n * Mapa de permisos asignados a cada rol\r\n */\r\nexport const rolePermissions: RolePermissions = {\r\n  /**\r\n   * Administrador: acceso completo a todas las funcionalidades\r\n   */\r\n  [UserRole.ADMIN]: [\r\n    Permission.PRODUCTOS_VER,\r\n    Permission.PRODUCTOS_CREAR,\r\n    Permission.PRODUCTOS_EDITAR,\r\n    Permission.PRODUCTOS_ELIMINAR,\r\n\r\n    Permission.CLIENTES_VER,\r\n    Permission.CLIENTES_CREAR,\r\n    Permission.CLIENTES_EDITAR,\r\n    Permission.CLIENTES_ELIMINAR,\r\n\r\n    Permission.VENTAS_VER,\r\n    Permission.VENTAS_CREAR,\r\n    Permission.VENTAS_CANCELAR,\r\n    Permission.VENTAS_VER_TODAS,\r\n\r\n    Permission.REPORTES_VER,\r\n    Permission.REPORTES_EXPORTAR,\r\n\r\n    Permission.USUARIOS_VER,\r\n    Permission.USUARIOS_CREAR,\r\n    Permission.USUARIOS_EDITAR,\r\n    Permission.USUARIOS_ELIMINAR,\r\n\r\n    Permission.CONFIG_VER,\r\n    Permission.CONFIG_EDITAR,\r\n  ],\r\n\r\n  /**\r\n   * Supervisor: puede gestionar productos, clientes, ventas y ver reportes\r\n   */\r\n  [UserRole.SUPERVISOR]: [\r\n    Permission.PRODUCTOS_VER,\r\n    Permission.PRODUCTOS_CREAR,\r\n    Permission.PRODUCTOS_EDITAR,\r\n\r\n    Permission.CLIENTES_VER,\r\n    Permission.CLIENTES_CREAR,\r\n    Permission.CLIENTES_EDITAR,\r\n\r\n    Permission.VENTAS_VER,\r\n    Permission.VENTAS_CREAR,\r\n    Permission.VENTAS_CANCELAR,\r\n    Permission.VENTAS_VER_TODAS,\r\n\r\n    Permission.REPORTES_VER,\r\n    Permission.REPORTES_EXPORTAR,\r\n  ],\r\n\r\n  /**\r\n   * Vendedor: puede realizar ventas y ver productos y clientes\r\n   */\r\n  [UserRole.VENDEDOR]: [\r\n    Permission.PRODUCTOS_VER,\r\n\r\n    Permission.CLIENTES_VER,\r\n    Permission.CLIENTES_CREAR,\r\n\r\n    Permission.VENTAS_VER,\r\n    Permission.VENTAS_CREAR,\r\n  ],\r\n\r\n  /**\r\n   * Cajero: enfocado en registrar y cobrar ventas en caja\r\n   */\r\n  [UserRole.CAJERO]: [\r\n    Permission.VENTAS_VER,\r\n    Permission.VENTAS_CREAR,\r\n    Permission.VENTAS_CANCELAR,\r\n    Permission.CLIENTES_VER,\r\n  ],\r\n\r\n  /**\r\n   * Cliente: si lo quieres agregar\r\n   */\r\n  [UserRole.CLIENTE]: [\r\n    Permission.VENTAS_VER, // solo ver sus propias ventas\r\n  ],\r\n};\r\n\r\n/**\r\n * Nombres descriptivos de los roles\r\n */\r\nexport const roleLabels: Record<UserRole, string> = {\r\n  [UserRole.ADMIN]: 'Administrador',\r\n  [UserRole.SUPERVISOR]: 'Supervisor',\r\n  [UserRole.VENDEDOR]: 'Vendedor',\r\n  [UserRole.CAJERO]: 'Cajero',\r\n  [UserRole.CLIENTE]: 'Cliente',\r\n};\r\n\r\n/**\r\n * Descripciones de los roles\r\n */\r\nexport const roleDescriptions: Record<UserRole, string> = {\r\n  [UserRole.ADMIN]: 'Acceso completo al sistema, puede gestionar usuarios y configuraci√≥n',\r\n  [UserRole.SUPERVISOR]: 'Puede gestionar productos, clientes, ventas y ver reportes',\r\n  [UserRole.VENDEDOR]: 'Puede realizar ventas y consultar productos y clientes',\r\n  [UserRole.CAJERO]: 'Puede registrar y cobrar ventas en caja, gestionando clientes b√°sicos',\r\n  [UserRole.CLIENTE]: 'Solo puede consultar sus propias ventas',\r\n};\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;AAED;AACA;;;AAKO,MAAM,kBAAmC;IAC9C;;GAEC,GACD,CAAC,mIAAQ,CAAC,KAAK,CAAC,EAAE;QAChB,2IAAU,CAAC,aAAa;QACxB,2IAAU,CAAC,eAAe;QAC1B,2IAAU,CAAC,gBAAgB;QAC3B,2IAAU,CAAC,kBAAkB;QAE7B,2IAAU,CAAC,YAAY;QACvB,2IAAU,CAAC,cAAc;QACzB,2IAAU,CAAC,eAAe;QAC1B,2IAAU,CAAC,iBAAiB;QAE5B,2IAAU,CAAC,UAAU;QACrB,2IAAU,CAAC,YAAY;QACvB,2IAAU,CAAC,eAAe;QAC1B,2IAAU,CAAC,gBAAgB;QAE3B,2IAAU,CAAC,YAAY;QACvB,2IAAU,CAAC,iBAAiB;QAE5B,2IAAU,CAAC,YAAY;QACvB,2IAAU,CAAC,cAAc;QACzB,2IAAU,CAAC,eAAe;QAC1B,2IAAU,CAAC,iBAAiB;QAE5B,2IAAU,CAAC,UAAU;QACrB,2IAAU,CAAC,aAAa;KACzB;IAED;;GAEC,GACD,CAAC,mIAAQ,CAAC,UAAU,CAAC,EAAE;QACrB,2IAAU,CAAC,aAAa;QACxB,2IAAU,CAAC,eAAe;QAC1B,2IAAU,CAAC,gBAAgB;QAE3B,2IAAU,CAAC,YAAY;QACvB,2IAAU,CAAC,cAAc;QACzB,2IAAU,CAAC,eAAe;QAE1B,2IAAU,CAAC,UAAU;QACrB,2IAAU,CAAC,YAAY;QACvB,2IAAU,CAAC,eAAe;QAC1B,2IAAU,CAAC,gBAAgB;QAE3B,2IAAU,CAAC,YAAY;QACvB,2IAAU,CAAC,iBAAiB;KAC7B;IAED;;GAEC,GACD,CAAC,mIAAQ,CAAC,QAAQ,CAAC,EAAE;QACnB,2IAAU,CAAC,aAAa;QAExB,2IAAU,CAAC,YAAY;QACvB,2IAAU,CAAC,cAAc;QAEzB,2IAAU,CAAC,UAAU;QACrB,2IAAU,CAAC,YAAY;KACxB;IAED;;GAEC,GACD,CAAC,mIAAQ,CAAC,MAAM,CAAC,EAAE;QACjB,2IAAU,CAAC,UAAU;QACrB,2IAAU,CAAC,YAAY;QACvB,2IAAU,CAAC,eAAe;QAC1B,2IAAU,CAAC,YAAY;KACxB;IAED;;GAEC,GACD,CAAC,mIAAQ,CAAC,OAAO,CAAC,EAAE;QAClB,2IAAU,CAAC,UAAU;KACtB;AACH;AAKO,MAAM,aAAuC;IAClD,CAAC,mIAAQ,CAAC,KAAK,CAAC,EAAE;IAClB,CAAC,mIAAQ,CAAC,UAAU,CAAC,EAAE;IACvB,CAAC,mIAAQ,CAAC,QAAQ,CAAC,EAAE;IACrB,CAAC,mIAAQ,CAAC,MAAM,CAAC,EAAE;IACnB,CAAC,mIAAQ,CAAC,OAAO,CAAC,EAAE;AACtB;AAKO,MAAM,mBAA6C;IACxD,CAAC,mIAAQ,CAAC,KAAK,CAAC,EAAE;IAClB,CAAC,mIAAQ,CAAC,UAAU,CAAC,EAAE;IACvB,CAAC,mIAAQ,CAAC,QAAQ,CAAC,EAAE;IACrB,CAAC,mIAAQ,CAAC,MAAM,CAAC,EAAE;IACnB,CAAC,mIAAQ,CAAC,OAAO,CAAC,EAAE;AACtB"}},
    {"offset": {"line": 526, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/lib/roles/role-checker.ts"],"sourcesContent":["/**\r\n * Funciones utilitarias para verificar permisos y roles\r\n */\r\n\r\nimport { User, UserRole } from '../types/usuario';\r\nimport { Permission } from './role-types';\r\nimport { rolePermissions } from './role-config';\r\n\r\n/**\r\n * Verifica si un usuario tiene un permiso especifico\r\n */\r\nexport function hasPermission(user: User | null, permission: Permission): boolean {\r\n  if (!user) return false;\r\n  \r\n  const permissions = rolePermissions[user.rol];\r\n  return permissions.includes(permission);\r\n}\r\n\r\n/**\r\n * Verifica si un usuario tiene al menos uno de los permisos especificados\r\n */\r\nexport function hasAnyPermission(user: User | null, permissions: Permission[]): boolean {\r\n  if (!user) return false;\r\n  \r\n  return permissions.some(permission => hasPermission(user, permission));\r\n}\r\n\r\n/**\r\n * Verifica si un usuario tiene todos los permisos especificados\r\n */\r\nexport function hasAllPermissions(user: User | null, permissions: Permission[]): boolean {\r\n  if (!user) return false;\r\n  \r\n  return permissions.every(permission => hasPermission(user, permission));\r\n}\r\n\r\n/**\r\n * Verifica si un usuario tiene un rol especifico\r\n */\r\nexport function hasRole(user: User | null, role: UserRole): boolean {\r\n  if (!user) return false;\r\n  \r\n  return user.rol === role;\r\n}\r\n\r\n/**\r\n * Verifica si un usuario tiene al menos uno de los roles especificados\r\n */\r\nexport function hasAnyRole(user: User | null, roles: UserRole[]): boolean {\r\n  if (!user) return false;\r\n  \r\n  return roles.includes(user.rol);\r\n}\r\n\r\n/**\r\n * Obtiene todos los permisos de un usuario\r\n */\r\nexport function getUserPermissions(user: User | null): Permission[] {\r\n  if (!user) return [];\r\n  \r\n  return rolePermissions[user.rol];\r\n}\r\n\r\n/**\r\n * Verifica si un usuario puede ver una seccion especifica\r\n */\r\nexport function canAccessSection(user: User | null, section: string): boolean {\r\n  if (!user) return false;\r\n  \r\n  // El dashboard es visible para cualquier usuario autenticado\r\n  if (section === 'dashboard') {\r\n    return true;\r\n  }\r\n\r\n  const sectionPermissions: Record<string, Permission> = {\r\n    productos: Permission.PRODUCTOS_VER,\r\n    clientes: Permission.CLIENTES_VER,\r\n    ventas: Permission.VENTAS_VER,\r\n    reportes: Permission.REPORTES_VER,\r\n    usuarios: Permission.USUARIOS_VER,\r\n    configuracion: Permission.CONFIG_VER,\r\n  };\r\n  \r\n  const requiredPermission = sectionPermissions[section];\r\n  if (!requiredPermission) return false;\r\n  \r\n  return hasPermission(user, requiredPermission);\r\n}\r\n\r\n/**\r\n * Verifica si un usuario es administrador\r\n */\r\nexport function isAdmin(user: User | null): boolean {\r\n  return hasRole(user, UserRole.ADMIN);\r\n}\r\n\r\n/**\r\n * Verifica si un usuario es supervisor o superior\r\n */\r\nexport function isSupervisorOrAbove(user: User | null): boolean {\r\n  return hasAnyRole(user, [UserRole.ADMIN, UserRole.SUPERVISOR]);\r\n}\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;;;;;;;;;AAED;AACA;AACA;;;;AAKO,SAAS,cAAc,IAAiB,EAAE,UAAsB;IACrE,IAAI,CAAC,MAAM,OAAO;IAElB,MAAM,cAAc,iJAAe,CAAC,KAAK,GAAG,CAAC;IAC7C,OAAO,YAAY,QAAQ,CAAC;AAC9B;AAKO,SAAS,iBAAiB,IAAiB,EAAE,WAAyB;IAC3E,IAAI,CAAC,MAAM,OAAO;IAElB,OAAO,YAAY,IAAI,CAAC,CAAA,aAAc,cAAc,MAAM;AAC5D;AAKO,SAAS,kBAAkB,IAAiB,EAAE,WAAyB;IAC5E,IAAI,CAAC,MAAM,OAAO;IAElB,OAAO,YAAY,KAAK,CAAC,CAAA,aAAc,cAAc,MAAM;AAC7D;AAKO,SAAS,QAAQ,IAAiB,EAAE,IAAc;IACvD,IAAI,CAAC,MAAM,OAAO;IAElB,OAAO,KAAK,GAAG,KAAK;AACtB;AAKO,SAAS,WAAW,IAAiB,EAAE,KAAiB;IAC7D,IAAI,CAAC,MAAM,OAAO;IAElB,OAAO,MAAM,QAAQ,CAAC,KAAK,GAAG;AAChC;AAKO,SAAS,mBAAmB,IAAiB;IAClD,IAAI,CAAC,MAAM,OAAO,EAAE;IAEpB,OAAO,iJAAe,CAAC,KAAK,GAAG,CAAC;AAClC;AAKO,SAAS,iBAAiB,IAAiB,EAAE,OAAe;IACjE,IAAI,CAAC,MAAM,OAAO;IAElB,6DAA6D;IAC7D,IAAI,YAAY,aAAa;QAC3B,OAAO;IACT;IAEA,MAAM,qBAAiD;QACrD,WAAW,2IAAU,CAAC,aAAa;QACnC,UAAU,2IAAU,CAAC,YAAY;QACjC,QAAQ,2IAAU,CAAC,UAAU;QAC7B,UAAU,2IAAU,CAAC,YAAY;QACjC,UAAU,2IAAU,CAAC,YAAY;QACjC,eAAe,2IAAU,CAAC,UAAU;IACtC;IAEA,MAAM,qBAAqB,kBAAkB,CAAC,QAAQ;IACtD,IAAI,CAAC,oBAAoB,OAAO;IAEhC,OAAO,cAAc,MAAM;AAC7B;AAKO,SAAS,QAAQ,IAAiB;IACvC,OAAO,QAAQ,MAAM,mIAAQ,CAAC,KAAK;AACrC;AAKO,SAAS,oBAAoB,IAAiB;IACnD,OAAO,WAAW,MAAM;QAAC,mIAAQ,CAAC,KAAK;QAAE,mIAAQ,CAAC,UAAU;KAAC;AAC/D"}},
    {"offset": {"line": 610, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/lib/config/test-users.ts"],"sourcesContent":["import { LoginCredentials, User, UserRole } from '../types/usuario';\r\n\r\n// Usuarios de prueba en memoria\r\nexport const testUsers: User[] = [\r\n  {\r\n    id: 1,\r\n    username: 'admin',\r\n    email: 'admin@test.com',\r\n    nombre: 'Admin',\r\n    apellido: 'Principal',\r\n    rol: UserRole.ADMIN,\r\n    activo: true,\r\n    fecha_creacion: new Date().toISOString(),\r\n    ultimo_acceso: null,\r\n    password: 'admin',\r\n  },\r\n  {\r\n    id: 2,\r\n    username: 'supervisor', \r\n    email: 'supervisor@test.com',\r\n    nombre: 'Sara',\r\n    apellido: 'Supervisor',\r\n    rol: UserRole.SUPERVISOR,\r\n    activo: true,\r\n    fecha_creacion: new Date().toISOString(),\r\n    ultimo_acceso: null,\r\n    password: 'supervisor',\r\n  },\r\n  {\r\n    id: 3,\r\n    username: 'vendedor',\r\n    email: 'vendedor@test.com',\r\n    nombre: 'V√≠ctor',\r\n    apellido: 'Vendedor',\r\n    rol: UserRole.VENDEDOR,\r\n    activo: true,\r\n    fecha_creacion: new Date().toISOString(),\r\n    ultimo_acceso: null,\r\n    password: 'vendedor',\r\n  },\r\n  {\r\n    id: 4,\r\n    username: 'cajero',\r\n    email: 'cajero@test.com',\r\n    nombre: 'Carlos',\r\n    apellido: 'Cajero',\r\n    rol: UserRole.CAJERO,\r\n    activo: true,\r\n    fecha_creacion: new Date().toISOString(),\r\n    ultimo_acceso: null,\r\n    password: 'cajero',\r\n  },\r\n  {\r\n    id: 5,\r\n    username: 'cliente',\r\n    email: 'cliente@test.com',\r\n    nombre: 'Carla',\r\n    apellido: 'Cliente',\r\n    rol: UserRole.CLIENTE,\r\n    activo: true,\r\n    fecha_creacion: new Date().toISOString(),\r\n    ultimo_acceso: null,\r\n    password: 'cliente',\r\n  },\r\n];\r\n\r\n// Funci√≥n INFALIBLE de login - VERSI√ìN SIMPLIFICADA\r\nexport function loginTestUser(credentials: LoginCredentials): User | null {\r\n  console.log('üîê loginTestUser(): Credenciales recibidas:', credentials);\r\n  \r\n  // Validaci√≥n b√°sica\r\n  if (!credentials?.username || !credentials?.password) {\r\n    console.error('‚ùå Credenciales incompletas');\r\n    return null;\r\n  }\r\n\r\n  const { username, password } = credentials;\r\n  \r\n  // BUSCAR USUARIO DE FORMA DIRECTA\r\n  const user = testUsers.find(u => \r\n    u.username.toLowerCase() === username.toLowerCase().trim() && \r\n    u.password === password\r\n  );\r\n\r\n  console.log('üë§ Resultado b√∫squeda:', user ? `‚úÖ ${user.username}` : '‚ùå No encontrado');\r\n  \r\n  return user || null;\r\n}\r\n\r\n// Debug function\r\nexport function debugUsers(): void {\r\n  console.log('üë• USUARIOS DISPONIBLES:');\r\n  testUsers.forEach(user => {\r\n    console.log(`   ${user.username} / ${user.password} (${user.rol})`);\r\n  });\r\n}\r\n\r\n// Auto-debug al cargar\r\nif (typeof window !== 'undefined') {\r\n  setTimeout(() => {\r\n    console.log('üîç Debug autom√°tico de usuarios:');\r\n    debugUsers();\r\n  }, 1000);\r\n}"],"names":[],"mappings":";;;;;;;;AAAA;;AAGO,MAAM,YAAoB;IAC/B;QACE,IAAI;QACJ,UAAU;QACV,OAAO;QACP,QAAQ;QACR,UAAU;QACV,KAAK,mIAAQ,CAAC,KAAK;QACnB,QAAQ;QACR,gBAAgB,IAAI,OAAO,WAAW;QACtC,eAAe;QACf,UAAU;IACZ;IACA;QACE,IAAI;QACJ,UAAU;QACV,OAAO;QACP,QAAQ;QACR,UAAU;QACV,KAAK,mIAAQ,CAAC,UAAU;QACxB,QAAQ;QACR,gBAAgB,IAAI,OAAO,WAAW;QACtC,eAAe;QACf,UAAU;IACZ;IACA;QACE,IAAI;QACJ,UAAU;QACV,OAAO;QACP,QAAQ;QACR,UAAU;QACV,KAAK,mIAAQ,CAAC,QAAQ;QACtB,QAAQ;QACR,gBAAgB,IAAI,OAAO,WAAW;QACtC,eAAe;QACf,UAAU;IACZ;IACA;QACE,IAAI;QACJ,UAAU;QACV,OAAO;QACP,QAAQ;QACR,UAAU;QACV,KAAK,mIAAQ,CAAC,MAAM;QACpB,QAAQ;QACR,gBAAgB,IAAI,OAAO,WAAW;QACtC,eAAe;QACf,UAAU;IACZ;IACA;QACE,IAAI;QACJ,UAAU;QACV,OAAO;QACP,QAAQ;QACR,UAAU;QACV,KAAK,mIAAQ,CAAC,OAAO;QACrB,QAAQ;QACR,gBAAgB,IAAI,OAAO,WAAW;QACtC,eAAe;QACf,UAAU;IACZ;CACD;AAGM,SAAS,cAAc,WAA6B;IACzD,QAAQ,GAAG,CAAC,+CAA+C;IAE3D,oBAAoB;IACpB,IAAI,CAAC,aAAa,YAAY,CAAC,aAAa,UAAU;QACpD,QAAQ,KAAK,CAAC;QACd,OAAO;IACT;IAEA,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG;IAE/B,kCAAkC;IAClC,MAAM,OAAO,UAAU,IAAI,CAAC,CAAA,IAC1B,EAAE,QAAQ,CAAC,WAAW,OAAO,SAAS,WAAW,GAAG,IAAI,MACxD,EAAE,QAAQ,KAAK;IAGjB,QAAQ,GAAG,CAAC,0BAA0B,OAAO,CAAC,EAAE,EAAE,KAAK,QAAQ,EAAE,GAAG;IAEpE,OAAO,QAAQ;AACjB;AAGO,SAAS;IACd,QAAQ,GAAG,CAAC;IACZ,UAAU,OAAO,CAAC,CAAA;QAChB,QAAQ,GAAG,CAAC,CAAC,GAAG,EAAE,KAAK,QAAQ,CAAC,GAAG,EAAE,KAAK,QAAQ,CAAC,EAAE,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC;IACpE;AACF;AAEA,uBAAuB;AACvB"}},
    {"offset": {"line": 708, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/hooks/use-auth.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect } from 'react';\r\nimport { User, LoginCredentials } from '../lib/types/usuario';\r\nimport { useAuthStore } from '@/store/auth-store';\r\nimport { Permission } from '@/lib/roles/role-types';\r\nimport { hasPermission as checkPermission } from '@/lib/roles/role-checker';\r\nimport { loginTestUser, debugUsers } from '@/lib/config/test-users';\r\n\r\nexport function useAuth() {\r\n  const {\r\n    user,\r\n    isAuthenticated,\r\n    isLoading,\r\n    login: storeLogin,\r\n    logout: storeLogout,\r\n    initialize,\r\n    clearLoading,\r\n  } = useAuthStore();\r\n\r\n  // Inicializar al montar el hook\r\n  useEffect(() => {\r\n    console.log('üéØ useAuth inicializando...');\r\n    initialize();\r\n    debugUsers();\r\n  }, [initialize]);\r\n\r\n  // =============================\r\n  // üöÄ LOGIN\r\n  // =============================\r\n  async function login(credentials: LoginCredentials) {\r\n    console.log('üîê Intentando login...', credentials);\r\n\r\n    try {\r\n      const loggedUser = loginTestUser(credentials);\r\n\r\n      if (!loggedUser) {\r\n        console.warn('‚ùå Credenciales incorrectas');\r\n        clearLoading();\r\n        return {\r\n          success: false,\r\n          error: 'Usuario o contrase√±a incorrectos',\r\n        };\r\n      }\r\n\r\n      console.log('‚úÖ Usuario autenticado:', loggedUser.username);\r\n\r\n      const updatedUser: User = {\r\n        ...loggedUser,\r\n        ultimo_acceso: new Date().toISOString(),\r\n      };\r\n\r\n      // Tokens fake para pruebas\r\n      const token = `fake-token-${updatedUser.id}-${Date.now()}`;\r\n      const refreshToken = `fake-refresh-${updatedUser.id}-${Date.now()}`;\r\n\r\n      storeLogin(updatedUser, token, refreshToken);\r\n\r\n      return { success: true, user: updatedUser };\r\n    } catch (error) {\r\n      console.error('üí• Error en login:', error);\r\n      return {\r\n        success: false,\r\n        error: 'Error interno del sistema',\r\n      };\r\n    }\r\n  }\r\n\r\n  // =============================\r\n  // üö™ LOGOUT\r\n  // =============================\r\n  function logout() {\r\n    console.log('üö™ Cerrando sesi√≥n...');\r\n    storeLogout();\r\n    document.cookie =\r\n      'auth_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT';\r\n  }\r\n\r\n  // =============================\r\n  // üîí ROLES Y PERMISOS\r\n  // =============================\r\n  function hasPermission(permission: Permission | string): boolean {\r\n    if (!user) return false;\r\n    return checkPermission(user, permission as Permission);\r\n  }\r\n\r\n  // =============================\r\n  // üì¶ RETORNO DEL HOOK\r\n  // =============================\r\n  return {\r\n    user,\r\n    isAuthenticated,\r\n    isLoading,\r\n    login,\r\n    logout,\r\n    hasPermission,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAEA;AAEA;AACA;AAPA;;;;;AASO,SAAS;IACd,MAAM,EACJ,IAAI,EACJ,eAAe,EACf,SAAS,EACT,OAAO,UAAU,EACjB,QAAQ,WAAW,EACnB,UAAU,EACV,YAAY,EACb,GAAG,IAAA,sIAAY;IAEhB,gCAAgC;IAChC,IAAA,kNAAS,EAAC;QACR,QAAQ,GAAG,CAAC;QACZ;QACA,IAAA,4IAAU;IACZ,GAAG;QAAC;KAAW;IAEf,gCAAgC;IAChC,WAAW;IACX,gCAAgC;IAChC,eAAe,MAAM,WAA6B;QAChD,QAAQ,GAAG,CAAC,0BAA0B;QAEtC,IAAI;YACF,MAAM,aAAa,IAAA,+IAAa,EAAC;YAEjC,IAAI,CAAC,YAAY;gBACf,QAAQ,IAAI,CAAC;gBACb;gBACA,OAAO;oBACL,SAAS;oBACT,OAAO;gBACT;YACF;YAEA,QAAQ,GAAG,CAAC,0BAA0B,WAAW,QAAQ;YAEzD,MAAM,cAAoB;gBACxB,GAAG,UAAU;gBACb,eAAe,IAAI,OAAO,WAAW;YACvC;YAEA,2BAA2B;YAC3B,MAAM,QAAQ,CAAC,WAAW,EAAE,YAAY,EAAE,CAAC,CAAC,EAAE,KAAK,GAAG,IAAI;YAC1D,MAAM,eAAe,CAAC,aAAa,EAAE,YAAY,EAAE,CAAC,CAAC,EAAE,KAAK,GAAG,IAAI;YAEnE,WAAW,aAAa,OAAO;YAE/B,OAAO;gBAAE,SAAS;gBAAM,MAAM;YAAY;QAC5C,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,sBAAsB;YACpC,OAAO;gBACL,SAAS;gBACT,OAAO;YACT;QACF;IACF;IAEA,gCAAgC;IAChC,YAAY;IACZ,gCAAgC;IAChC,SAAS;QACP,QAAQ,GAAG,CAAC;QACZ;QACA,SAAS,MAAM,GACb;IACJ;IAEA,gCAAgC;IAChC,sBAAsB;IACtB,gCAAgC;IAChC,SAAS,cAAc,UAA+B;QACpD,IAAI,CAAC,MAAM,OAAO;QAClB,OAAO,IAAA,gJAAe,EAAC,MAAM;IAC/B;IAEA,gCAAgC;IAChC,sBAAsB;IACtB,gCAAgC;IAChC,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 798, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/components/modules/auth/register-form.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/navigation';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { useAuth } from '@/hooks/use-auth';\r\nimport {\r\n  User,\r\n  Lock,\r\n  Mail,\r\n  AlertCircle,\r\n  Eye,\r\n  EyeOff\r\n} from 'lucide-react';\r\n\r\nexport function RegisterForm() {\r\n  const router = useRouter();\r\n  const { register } = useAuth();\r\n\r\n  const [formData, setFormData] = useState({\r\n    username: '',\r\n    email: '',\r\n    password: '',\r\n    confirmPassword: ''\r\n  });\r\n\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [showPassword2, setShowPassword2] = useState(false);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n    setError(null);\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!formData.username || !formData.email || !formData.password || !formData.confirmPassword) {\r\n      setError('Por favor completa todos los campos');\r\n      return;\r\n    }\r\n\r\n    if (formData.password !== formData.confirmPassword) {\r\n      setError('Las contrase√±as no coinciden');\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n\r\n    const result = await register({\r\n      username: formData.username,\r\n      email: formData.email,\r\n      password: formData.password\r\n    });\r\n\r\n    if (!result.success) {\r\n      setError(result.error || 'Error al registrarse');\r\n      setIsLoading(false);\r\n    } else {\r\n      router.push('/'); // Redirige al login\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center px-4 \r\n      bg-gradient-to-br from-slate-900 via-slate-800 to-black \r\n      animate-gradient-slow relative overflow-hidden\">\r\n\r\n      {/* Efecto lum√≠nico */}\r\n      <div className=\"absolute w-[500px] h-[500px] bg-purple-600/20 rounded-full blur-[150px] top-10 left-10 animate-pulse\"></div>\r\n      <div className=\"absolute w-[350px] h-[350px] bg-blue-500/20 rounded-full blur-[130px] bottom-10 right-10 animate-pulse\"></div>\r\n\r\n      <Card className=\"w-full max-w-md rounded-3xl border border-white/10 \r\n        backdrop-blur-2xl bg-white/10 shadow-[0_0_50px_-10px_rgba(0,0,0,0.8)]\r\n        transition-all animate-fade-in\">\r\n\r\n        <CardHeader className=\"py-8 text-center\">\r\n          <CardTitle className=\"text-4xl font-extrabold text-white tracking-wide drop-shadow-xl\">\r\n            Crear Cuenta\r\n          </CardTitle>\r\n          <p className=\"text-slate-300 mt-2 text-sm\">\r\n            Registra tus datos para continuar\r\n          </p>\r\n        </CardHeader>\r\n\r\n        <CardContent className=\"p-8\">\r\n          <form onSubmit={handleSubmit} className=\"space-y-7\">\r\n\r\n            {error && (\r\n              <div className=\"flex items-center gap-2 p-3 rounded-lg \r\n                bg-red-500/10 border border-red-500/40 text-red-300 text-sm animate-fade-in\">\r\n                <AlertCircle className=\"w-5 h-5\" />\r\n                <span>{error}</span>\r\n              </div>\r\n            )}\r\n\r\n            {/* USUARIO */}\r\n            <div className=\"relative group\">\r\n              <User className=\"absolute left-3 top-1/2 -translate-y-1/2 \r\n                text-slate-400 w-5 h-5 group-hover:text-white transition\" />\r\n\r\n              <Input\r\n                name=\"username\"\r\n                value={formData.username}\r\n                onChange={handleChange}\r\n                placeholder=\"Usuario\"\r\n                className=\"pl-10 bg-white/5 text-white placeholder-slate-400\r\n                  border border-white/10 rounded-xl\r\n                  focus:ring-2 focus:ring-purple-500/70\"\r\n              />\r\n            </div>\r\n\r\n            {/* EMAIL */}\r\n            <div className=\"relative group\">\r\n              <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 \r\n                text-slate-400 w-5 h-5 group-hover:text-white transition\" />\r\n\r\n              <Input\r\n                name=\"email\"\r\n                type=\"email\"\r\n                value={formData.email}\r\n                onChange={handleChange}\r\n                placeholder=\"Correo electr√≥nico\"\r\n                className=\"pl-10 bg-white/5 text-white placeholder-slate-400\r\n                  border border-white/10 rounded-xl\r\n                  focus:ring-2 focus:ring-purple-500/70\"\r\n              />\r\n            </div>\r\n\r\n            {/* CONTRASE√ëA */}\r\n            <div className=\"relative group\">\r\n              <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 \r\n                text-slate-400 w-5 h-5 group-hover:text-white transition\" />\r\n\r\n              <Input\r\n                name=\"password\"\r\n                type={showPassword ? 'text' : 'password'}\r\n                value={formData.password}\r\n                onChange={handleChange}\r\n                placeholder=\"Contrase√±a\"\r\n                className=\"pl-10 pr-12 bg-white/5 text-white placeholder-slate-400\r\n                  border border-white/10 rounded-xl\r\n                  focus:ring-2 focus:ring-purple-500/70\"\r\n              />\r\n\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setShowPassword(prev => !prev)}\r\n                className=\"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 \r\n                  hover:text-white transition\"\r\n              >\r\n                {showPassword ? <EyeOff size={20} /> : <Eye size={20} />}\r\n              </button>\r\n            </div>\r\n\r\n            {/* CONFIRMAR CONTRASE√ëA */}\r\n            <div className=\"relative group\">\r\n              <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 \r\n                text-slate-400 w-5 h-5 group-hover:text-white transition\" />\r\n\r\n              <Input\r\n                name=\"confirmPassword\"\r\n                type={showPassword2 ? 'text' : 'password'}\r\n                value={formData.confirmPassword}\r\n                onChange={handleChange}\r\n                placeholder=\"Confirmar contrase√±a\"\r\n                className=\"pl-10 pr-12 bg-white/5 text-white placeholder-slate-400\r\n                  border border-white/10 rounded-xl\r\n                  focus:ring-2 focus:ring-purple-500/70\"\r\n              />\r\n\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setShowPassword2(prev => !prev)}\r\n                className=\"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 \r\n                  hover:text-white transition\"\r\n              >\r\n                {showPassword2 ? <EyeOff size={20} /> : <Eye size={20} />}\r\n              </button>\r\n            </div>\r\n\r\n            {/* BOT√ìN */}\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              isLoading={isLoading}\r\n              className=\"w-full py-3 rounded-xl text-white font-bold text-lg\r\n                bg-gradient-to-r from-purple-600 to-blue-600\r\n                hover:from-purple-700 hover:to-blue-700\r\n                shadow-[0_5px_25px_rgba(0,0,0,0.4)]\r\n                hover:shadow-[0_5px_35px_rgba(0,0,0,0.6)]\r\n                transition-all duration-300\"\r\n            >\r\n              Registrarse\r\n            </Button>\r\n\r\n            <p className=\"text-center text-slate-300 text-sm mt-3\">\r\n              ¬øYa tienes cuenta?{' '}\r\n              <Link\r\n                href=\"/\"\r\n                className=\"text-purple-300 hover:text-purple-200 underline font-semibold transition\"\r\n              >\r\n                Iniciar sesi√≥n\r\n              </Link>\r\n            </p>\r\n\r\n          </form>\r\n        </CardContent>\r\n      </Card>\r\n\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1158, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/app/%28auth%29/registro/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { RegisterForm } from '@/components/modules/auth/register-form';\r\n\r\nexport default function RegistroPage() {\r\n  return <RegisterForm />;\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,qBAAO,8OAAC,kKAAY;;;;;AACtB"}}]
}