{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/components/ui/input.tsx"],"sourcesContent":["'use client';\r\n\r\nimport * as React from 'react';\r\nimport { cn } from '@/lib/utils';\r\n\r\n/**\r\n * Props extendidos del input\r\n * Incluye todos los atributos estándar de un <input>\r\n */\r\nexport interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {\r\n  // Se pueden agregar props custom aquí si se necesita\r\n}\r\n\r\n/**\r\n * Componente Input reutilizable\r\n * - Compatible con ref\r\n * - Estilos consistentes\r\n */\r\nexport const Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <input\r\n        ref={ref}\r\n        className={cn(\r\n          \"block w-full rounded-xl border border-blue-400/30 bg-slate-800/50 text-white placeholder-slate-400 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400/50 focus:border-blue-400/50 transition-all duration-200\",\r\n          className\r\n        )}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\n\r\nInput.displayName = 'Input';\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAkBO,MAAM,sBAAQ,mNAAgB,CACnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,4NACA;QAED,GAAG,KAAK;;;;;;AAGf;AAGF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/components/ui/button.tsx"],"sourcesContent":["'use client';\r\n\r\nimport * as React from 'react';\r\nimport { cn } from '@/lib/utils';\r\n\r\nexport interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  fullWidth?: boolean;\r\n  isLoading?: boolean;\r\n  variant?: 'primary' | 'ghost' | 'secondary';\r\n  size?: 'sm' | 'md' | 'lg';\r\n  iconLeft?: React.ReactNode;\r\n  iconRight?: React.ReactNode;\r\n}\r\n\r\nexport const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  (\r\n    {\r\n      className,\r\n      children,\r\n      fullWidth,\r\n      isLoading,\r\n      variant = 'primary',\r\n      size = 'md',\r\n      iconLeft,\r\n      iconRight,\r\n      disabled,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    // Clases base según variante\r\n    const variantClasses = {\r\n      primary: 'bg-blue-600/40 hover:bg-blue-600/50 border border-blue-400/30 text-white shadow-[0_0_15px_rgba(59,130,246,0.2)] hover:shadow-[0_0_20px_rgba(59,130,246,0.3)]',\r\n      secondary: 'bg-slate-700/40 hover:bg-slate-700/50 border border-slate-500/30 text-slate-200 shadow-[0_0_10px_rgba(0,0,0,0.2)]',\r\n      ghost: 'bg-transparent border border-blue-400/20 text-slate-300 hover:bg-blue-500/10 hover:border-blue-400/30',\r\n    };\r\n\r\n    // Clases según tamaño\r\n    const sizeClasses = {\r\n      sm: 'text-sm py-2 px-3',\r\n      md: 'text-base py-3 px-5',\r\n      lg: 'text-lg py-4 px-6',\r\n    };\r\n\r\n    return (\r\n      <button\r\n        ref={ref}\r\n        className={cn(\r\n          \"rounded-xl font-medium transition-all duration-300 flex items-center justify-center gap-2 hover:scale-105\",\r\n          variantClasses[variant],\r\n          sizeClasses[size],\r\n          fullWidth && 'w-full',\r\n          (isLoading || disabled) && 'opacity-60 cursor-not-allowed',\r\n          className\r\n        )}\r\n        disabled={isLoading || disabled}\r\n        {...props}\r\n      >\r\n        {isLoading ? (\r\n          <span className=\"animate-spin\">⏳ Cargando...</span>\r\n        ) : (\r\n          <>\r\n            {iconLeft && <span className=\"flex items-center\">{iconLeft}</span>}\r\n            {children}\r\n            {iconRight && <span className=\"flex items-center\">{iconRight}</span>}\r\n          </>\r\n        )}\r\n      </button>\r\n    );\r\n  }\r\n);\r\n\r\nButton.displayName = 'Button';\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAcO,MAAM,uBAAS,mNAAgB,CACpC,CACE,EACE,SAAS,EACT,QAAQ,EACR,SAAS,EACT,SAAS,EACT,UAAU,SAAS,EACnB,OAAO,IAAI,EACX,QAAQ,EACR,SAAS,EACT,QAAQ,EACR,GAAG,OACJ,EACD;IAEA,6BAA6B;IAC7B,MAAM,iBAAiB;QACrB,SAAS;QACT,WAAW;QACX,OAAO;IACT;IAEA,sBAAsB;IACtB,MAAM,cAAc;QAClB,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,qBACE,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,6GACA,cAAc,CAAC,QAAQ,EACvB,WAAW,CAAC,KAAK,EACjB,aAAa,UACb,CAAC,aAAa,QAAQ,KAAK,iCAC3B;QAEF,UAAU,aAAa;QACtB,GAAG,KAAK;kBAER,0BACC,8OAAC;YAAK,WAAU;sBAAe;;;;;qEAE/B;;gBACG,0BAAY,8OAAC;oBAAK,WAAU;8BAAqB;;;;;;gBACjD;gBACA,2BAAa,8OAAC;oBAAK,WAAU;8BAAqB;;;;;;;;;;;;;AAK7D;AAGF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/components/ui/card.tsx"],"sourcesContent":["'use client';\r\n\r\nimport * as React from 'react';\r\nimport { cn } from '@/lib/utils';\r\n\r\ntype CardVariant = 'default' | 'outline';\r\n\r\ninterface CardProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  variant?: CardVariant | (string & {});\r\n}\r\n\r\nexport const Card = React.forwardRef<HTMLDivElement, CardProps>(\r\n  ({ className, children, variant = 'default', ...props }, ref) => {\r\n    const baseClasses =\r\n      \"rounded-3xl border backdrop-blur-xl transition-all duration-300\";\r\n    const variantClasses =\r\n      variant === 'outline'\r\n        ? \"border-blue-400/30 bg-slate-900/60 shadow-[0_0_15px_rgba(59,130,246,0.1)]\"\r\n        : \"border-blue-400/30 bg-slate-900/60 shadow-[0_0_15px_rgba(59,130,246,0.1)]\";\r\n\r\n    return (\r\n      <div\r\n        ref={ref}\r\n        className={cn(baseClasses, variantClasses, className)}\r\n        {...props}\r\n      >\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nexport const CardHeader = ({ className, children, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div className={cn(\"py-4 px-6\", className)} {...props}>{children}</div>\r\n);\r\n\r\nexport const CardContent = ({ className, children, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div className={cn(\"p-6\", className)} {...props}>{children}</div>\r\n);\r\n\r\nexport const CardTitle = ({ className, children, ...props }: React.HTMLAttributes<HTMLHeadingElement>) => (\r\n  <h2 className={cn(\"text-2xl font-bold text-white\", className)} {...props}>{children}</h2>\r\n);\r\n\r\nCard.displayName = 'Card';\r\nCardHeader.displayName = 'CardHeader';\r\nCardContent.displayName = 'CardContent';\r\nCardTitle.displayName = 'CardTitle';\r\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;AACA;AAHA;;;;AAWO,MAAM,qBAAO,mNAAgB,CAClC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,UAAU,SAAS,EAAE,GAAG,OAAO,EAAE;IACvD,MAAM,cACJ;IACF,MAAM,iBACJ,YAAY,YACR,8EACA;IAEN,qBACE,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,aAAa,gBAAgB;QAC1C,GAAG,KAAK;kBAER;;;;;;AAGP;AAGK,MAAM,aAAa,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAA6C,iBAChG,8OAAC;QAAI,WAAW,IAAA,kHAAE,EAAC,aAAa;QAAa,GAAG,KAAK;kBAAG;;;;;;AAGnD,MAAM,cAAc,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAA6C,iBACjG,8OAAC;QAAI,WAAW,IAAA,kHAAE,EAAC,OAAO;QAAa,GAAG,KAAK;kBAAG;;;;;;AAG7C,MAAM,YAAY,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAiD,iBACnG,8OAAC;QAAG,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAAa,GAAG,KAAK;kBAAG;;;;;;AAG7E,KAAK,WAAW,GAAG;AACnB,WAAW,WAAW,GAAG;AACzB,YAAY,WAAW,GAAG;AAC1B,UAAU,WAAW,GAAG"}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/components/ui/select.tsx"],"sourcesContent":["'use client';\r\n\r\nimport * as React from 'react';\r\nimport * as SelectPrimitive from '@radix-ui/react-select';\r\nimport { Check, ChevronDown, ChevronUp } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\n\r\nexport const Select = SelectPrimitive.Root;\r\nexport const SelectGroup = SelectPrimitive.Group;\r\nexport const SelectValue = SelectPrimitive.Value;\r\n\r\nexport const SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Portal>\r\n    <SelectPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"z-50 min-w-[8rem] overflow-hidden rounded-xl border border-blue-400/30 bg-slate-900/95 text-white shadow-[0_0_15px_rgba(59,130,246,0.2)] backdrop-blur-xl\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <SelectPrimitive.ScrollUpButton className=\"flex items-center justify-center py-1 text-slate-300\">\r\n        <ChevronUp className=\"w-4 h-4\" />\r\n      </SelectPrimitive.ScrollUpButton>\r\n      <SelectPrimitive.Viewport className=\"p-1 space-y-1\">\r\n        {children}\r\n      </SelectPrimitive.Viewport>\r\n      <SelectPrimitive.ScrollDownButton className=\"flex items-center justify-center py-1 text-slate-300\">\r\n        <ChevronDown className=\"w-4 h-4\" />\r\n      </SelectPrimitive.ScrollDownButton>\r\n    </SelectPrimitive.Content>\r\n  </SelectPrimitive.Portal>\r\n));\r\n\r\nSelectContent.displayName = 'SelectContent';\r\n\r\nexport const SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n      className={cn(\r\n        \"flex items-center justify-between rounded-xl border border-blue-400/30 bg-slate-800/50 px-3 py-2 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-400/50 focus:border-blue-400/50 transition-all duration-200\",\r\n        className\r\n      )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <ChevronDown className=\"ml-2 w-4 h-4\" />\r\n  </SelectPrimitive.Trigger>\r\n));\r\n\r\nSelectTrigger.displayName = 'SelectTrigger';\r\n\r\nexport const SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n      className={cn(\r\n        \"relative flex items-center px-3 py-2 text-white rounded-xl cursor-pointer select-none focus:bg-blue-600/40 hover:bg-blue-600/30 transition-colors duration-200\",\r\n        className\r\n      )}\r\n    {...props}\r\n  >\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n    <SelectPrimitive.ItemIndicator className=\"absolute left-1 inline-flex items-center\">\r\n      <Check className=\"w-4 h-4\" />\r\n    </SelectPrimitive.ItemIndicator>\r\n  </SelectPrimitive.Item>\r\n));\r\n\r\nSelectItem.displayName = 'SelectItem';\r\n\r\nexport const SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator ref={ref} className={cn(\"h-px bg-white/20 my-1\", className)} {...props} />\r\n));\r\n\r\nSelectSeparator.displayName = 'SelectSeparator';\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AALA;;;;;;AAOO,MAAM,SAAS,0KAAoB;AACnC,MAAM,cAAc,2KAAqB;AACzC,MAAM,cAAc,2KAAqB;AAEzC,MAAM,8BAAgB,mNAAgB,CAG3C,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,4KAAsB;kBACrB,cAAA,8OAAC,6KAAuB;YACtB,KAAK;YACL,WAAW,IAAA,kHAAE,EACX,6JACA;YAED,GAAG,KAAK;;8BAET,8OAAC,oLAA8B;oBAAC,WAAU;8BACxC,cAAA,8OAAC,8NAAS;wBAAC,WAAU;;;;;;;;;;;8BAEvB,8OAAC,8KAAwB;oBAAC,WAAU;8BACjC;;;;;;8BAEH,8OAAC,sLAAgC;oBAAC,WAAU;8BAC1C,cAAA,8OAAC,oOAAW;wBAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;AAM/B,cAAc,WAAW,GAAG;AAErB,MAAM,8BAAgB,mNAAgB,CAG3C,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,6KAAuB;QACtB,KAAK;QACH,WAAW,IAAA,kHAAE,EACX,iPACA;QAEH,GAAG,KAAK;;YAER;0BACD,8OAAC,oOAAW;gBAAC,WAAU;;;;;;;;;;;;AAI3B,cAAc,WAAW,GAAG;AAErB,MAAM,2BAAa,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,0KAAoB;QACnB,KAAK;QACH,WAAW,IAAA,kHAAE,EACX,kKACA;QAEH,GAAG,KAAK;;0BAET,8OAAC,8KAAwB;0BAAE;;;;;;0BAC3B,8OAAC,mLAA6B;gBAAC,WAAU;0BACvC,cAAA,8OAAC,8MAAK;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAKvB,WAAW,WAAW,GAAG;AAElB,MAAM,gCAAkB,mNAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,+KAAyB;QAAC,KAAK;QAAK,WAAW,IAAA,kHAAE,EAAC,yBAAyB;QAAa,GAAG,KAAK;;;;;;AAGnG,gBAAgB,WAAW,GAAG"}},
    {"offset": {"line": 318, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/lib/types/producto.ts"],"sourcesContent":["/**\r\n * Tipos y interfaces relacionadas con productos\r\n */\r\n\r\n/**\r\n * Interface para producto\r\n */\r\nexport interface Product {\r\n  id: number;\r\n  codigo: string;\r\n  nombre: string;\r\n  descripcion: string | null;\r\n  precio: number;\r\n  stock: number;\r\n  categoria: string | null;\r\n  imagen?: string | null;\r\n  activo: boolean;\r\n  fecha_creacion: string;\r\n  fecha_actualizacion: string;\r\n}\r\n\r\n/**\r\n * Datos para crear un nuevo producto\r\n */\r\nexport interface CreateProductData {\r\n  codigo: string;\r\n  nombre: string;\r\n  descripcion?: string;\r\n  precio: number;\r\n  stock: number;\r\n  categoria?: string;\r\n  imagen?: File | string | null; // File para envío, string para URL/base64, null para sin imagen\r\n}\r\n\r\n/**\r\n * Datos para actualizar un producto\r\n */\r\nexport interface UpdateProductData {\r\n  codigo?: string;\r\n  nombre?: string;\r\n  descripcion?: string;\r\n  precio?: number;\r\n  stock?: number;\r\n  categoria?: string;\r\n  imagen?: File | string | null; // File para envío, string para URL/base64, null para eliminar imagen\r\n  activo?: boolean;\r\n}\r\n\r\n/**\r\n * Filtros de busqueda de productos\r\n */\r\nexport interface ProductFilters {\r\n  search?: string;\r\n  categoria?: string;\r\n  activo?: boolean;\r\n  precioMin?: number;\r\n  precioMax?: number;\r\n  stockMin?: number;\r\n  stockMax?: number;\r\n}\r\n\r\n/**\r\n * Interface para categorias de productos\r\n */\r\nexport interface ProductCategory {\r\n  nombre: string;\r\n  count: number;\r\n}"],"names":[],"mappings":"AAAA;;CAEC,GAED;;CAEC"}},
    {"offset": {"line": 328, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/lib/types/cliente.ts"],"sourcesContent":["/**\r\n * Tipos y interfaces relacionadas con clientes\r\n */\r\n\r\n/**\r\n * Tipos de documento de identidad\r\n */\r\nexport enum DocumentType {\r\n  DNI = 'DNI',\r\n  RUC = 'RUC',\r\n  PASAPORTE = 'PASAPORTE',\r\n  CARNET_EXTRANJERIA = 'CARNET_EXTRANJERIA',\r\n}\r\n\r\n/**\r\n * Interface para cliente\r\n */\r\nexport interface Client {\r\n  id: number;\r\n  tipo_documento: DocumentType;\r\n  numero_documento: string;\r\n  nombre: string;\r\n  apellido: string | null;\r\n  email: string | null;\r\n  telefono: string | null;\r\n  direccion: string | null;\r\n  activo: boolean;\r\n  fecha_creacion: string;\r\n  fecha_actualizacion: string;\r\n}\r\n\r\n/**\r\n * Datos para crear un nuevo cliente\r\n */\r\nexport interface CreateClientData {\r\n  tipo_documento: DocumentType;\r\n  numero_documento: string;\r\n  nombre: string;\r\n  apellido?: string;\r\n  email?: string;\r\n  telefono?: string;\r\n  direccion?: string;\r\n}\r\n\r\n/**\r\n * Datos para actualizar un cliente\r\n */\r\nexport interface UpdateClientData {\r\n  tipo_documento?: DocumentType;\r\n  numero_documento?: string;\r\n  nombre?: string;\r\n  apellido?: string;\r\n  email?: string;\r\n  telefono?: string;\r\n  direccion?: string;\r\n  activo?: boolean;\r\n}\r\n\r\n/**\r\n * Filtros de busqueda de clientes\r\n */\r\nexport interface ClientFilters {\r\n  search?: string;\r\n  tipo_documento?: DocumentType;\r\n  activo?: boolean;\r\n}"],"names":[],"mappings":"AAAA;;CAEC,GAED;;CAEC;;;;AACM,IAAA,AAAK,sCAAA;;;;;WAAA"}},
    {"offset": {"line": 347, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/lib/types/venta.ts"],"sourcesContent":["import { Client } from './cliente';\r\nimport { Product } from './producto';\r\nimport { User } from './usuario';\r\n\r\n/**\r\n * Tipos y interfaces relacionadas con ventas\r\n */\r\n\r\n/**\r\n * Estados de una venta\r\n */\r\nexport enum SaleStatus {\r\n  COMPLETADA = 'completada',\r\n  CANCELADA = 'cancelada',\r\n  PENDIENTE = 'pendiente',\r\n}\r\n\r\n/**\r\n * Metodos de pago\r\n */\r\nexport enum PaymentMethod {\r\n  EFECTIVO = 'efectivo',\r\n  TARJETA = 'tarjeta',\r\n  TRANSFERENCIA = 'transferencia',\r\n  YAPE = 'yape',\r\n  PLIN = 'plin',\r\n}\r\n\r\n/**\r\n * Interface para detalle de venta\r\n */\r\nexport interface SaleDetail {\r\n  id: number;\r\n  venta_id: number;\r\n  producto_id: number;\r\n  producto?: Product;\r\n  cantidad: number;\r\n  precio_unitario: number;\r\n  subtotal: number;\r\n}\r\n\r\n/**\r\n * Interface para venta\r\n */\r\nexport interface Sale {\r\n  id: number;\r\n  fecha: string;\r\n  cliente_id: number;\r\n  cliente?: Client;\r\n  usuario_id: number;\r\n  usuario?: User;\r\n  subtotal: number;\r\n  igv: number;\r\n  total: number;\r\n  metodo_pago: PaymentMethod;\r\n  estado: SaleStatus;\r\n  observaciones: string | null;\r\n  detalles: SaleDetail[];\r\n  fecha_creacion: string;\r\n  fecha_actualizacion: string;\r\n}\r\n\r\n/**\r\n * Item del carrito de compras\r\n */\r\nexport interface CartItem {\r\n  producto: Product;\r\n  cantidad: number;\r\n  precio_unitario: number;\r\n  subtotal: number;\r\n}\r\n\r\n/**\r\n * Datos para crear una nueva venta\r\n */\r\nexport interface CreateSaleData {\r\n  cliente_id: number;\r\n  metodo_pago: PaymentMethod;\r\n  observaciones?: string;\r\n  detalles: {\r\n    producto_id: number;\r\n    cantidad: number;\r\n    precio_unitario: number;\r\n  }[];\r\n}\r\n\r\n/**\r\n * Filtros de busqueda de ventas\r\n */\r\nexport interface SaleFilters {\r\n  fecha_inicio?: string;\r\n  fecha_fin?: string;\r\n  cliente_id?: number;\r\n  usuario_id?: number;\r\n  metodo_pago?: PaymentMethod;\r\n  estado?: SaleStatus;\r\n  total_min?: number;\r\n  total_max?: number;\r\n}\r\n\r\n/**\r\n * Resumen de venta\r\n */\r\nexport interface SaleSummary {\r\n  total_ventas: number;\r\n  total_monto: number;\r\n  promedio_venta: number;\r\n  ventas_por_metodo: Record<PaymentMethod, number>;\r\n}"],"names":[],"mappings":";;;;;;AAWO,IAAA,AAAK,oCAAA;;;;WAAA;;AASL,IAAA,AAAK,uCAAA;;;;;;WAAA"}},
    {"offset": {"line": 371, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/lib/types/index.ts"],"sourcesContent":["/**\r\n * Exportacion centralizada de todos los tipos\r\n */\r\n\r\nexport * from './usuario';\r\nexport * from './producto';\r\nexport * from './cliente';\r\nexport * from './venta';\r\n\r\n/**\r\n * Tipos genericos y utilitarios\r\n */\r\n\r\n/**\r\n * Respuesta paginada de la API\r\n */\r\nexport interface PaginatedResponse<T> {\r\n  items: T[];\r\n  total: number;\r\n  page: number;\r\n  page_size: number;\r\n  total_pages: number;\r\n}\r\n\r\n/**\r\n * Respuesta generica de la API\r\n */\r\nexport interface ApiResponse<T> {\r\n  success: boolean;\r\n  data: T;\r\n  message?: string;\r\n}\r\n\r\n/**\r\n * Error de la API\r\n */\r\nexport interface ApiError {\r\n  message: string;\r\n  errors?: Record<string, string[]>;\r\n  status?: number;\r\n}\r\n\r\n/**\r\n * Parametros de paginacion\r\n */\r\nexport interface PaginationParams {\r\n  page?: number;\r\n  page_size?: number;\r\n}\r\n\r\n/**\r\n * Parametros de ordenamiento\r\n */\r\nexport interface SortParams {\r\n  sort_by?: string;\r\n  sort_order?: 'asc' | 'desc';\r\n}\r\n\r\n/**\r\n * Opciones de consulta completas\r\n */\r\nexport interface QueryOptions extends PaginationParams, SortParams {\r\n  filters?: Record<string, any>;\r\n}"],"names":[],"mappings":"AAAA;;CAEC;AAED;AACA;AACA;AACA"}},
    {"offset": {"line": 386, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/lib/constants.ts"],"sourcesContent":["/**\r\n * Constantes de la aplicacion\r\n */\r\n\r\nimport { DocumentType, PaymentMethod, SaleStatus, UserRole } from './types';\r\n\r\n/**\r\n * Opciones de tipos de documento\r\n */\r\nexport const DOCUMENT_TYPE_OPTIONS = [\r\n  { value: DocumentType.DNI, label: 'DNI' },\r\n  { value: DocumentType.RUC, label: 'RUC' },\r\n  { value: DocumentType.PASAPORTE, label: 'Pasaporte' },\r\n  { value: DocumentType.CARNET_EXTRANJERIA, label: 'Carnet de Extranjeria' },\r\n];\r\n\r\n/**\r\n * Opciones de metodos de pago\r\n */\r\nexport const PAYMENT_METHOD_OPTIONS = [\r\n  { value: PaymentMethod.EFECTIVO, label: 'Efectivo' },\r\n  { value: PaymentMethod.TARJETA, label: 'Tarjeta' },\r\n  { value: PaymentMethod.TRANSFERENCIA, label: 'Transferencia' },\r\n  { value: PaymentMethod.YAPE, label: 'Yape' },\r\n  { value: PaymentMethod.PLIN, label: 'Plin' },\r\n];\r\n\r\n/**\r\n * Opciones de estados de venta\r\n */\r\nexport const SALE_STATUS_OPTIONS = [\r\n  { value: SaleStatus.COMPLETADA, label: 'Completada' },\r\n  { value: SaleStatus.CANCELADA, label: 'Cancelada' },\r\n  { value: SaleStatus.PENDIENTE, label: 'Pendiente' },\r\n];\r\n\r\n/**\r\n * Opciones de roles de usuario\r\n */\r\nexport const USER_ROLE_OPTIONS = [\r\n  { value: UserRole.ADMIN, label: 'Administrador' },\r\n  { value: UserRole.SUPERVISOR, label: 'Supervisor' },\r\n  { value: UserRole.VENDEDOR, label: 'Vendedor' },\r\n  { value: UserRole.CAJERO, label: 'Cajero' },\r\n];\r\n\r\n/**\r\n * Colores para estados de venta\r\n */\r\nexport const SALE_STATUS_COLORS: Record<SaleStatus, string> = {\r\n  [SaleStatus.COMPLETADA]: 'text-green-600 bg-green-50',\r\n  [SaleStatus.CANCELADA]: 'text-red-600 bg-red-50',\r\n  [SaleStatus.PENDIENTE]: 'text-yellow-600 bg-yellow-50',\r\n};\r\n\r\n/**\r\n * Colores para roles de usuario\r\n */\r\nexport const USER_ROLE_COLORS: Record<UserRole, string> = {\r\n  [UserRole.ADMIN]: 'text-purple-600 bg-purple-50',\r\n  [UserRole.SUPERVISOR]: 'text-blue-600 bg-blue-50',\r\n  [UserRole.VENDEDOR]: 'text-gray-600 bg-gray-50',\r\n  [UserRole.CAJERO]: 'text-emerald-600 bg-emerald-50',\r\n  [UserRole.CLIENTE]: 'text-teal-600 bg-teal-50',\r\n};\r\n\r\n/**\r\n * IGV por defecto (18%)\r\n */\r\nexport const IGV_PERCENTAGE = 0.18;\r\n\r\n/**\r\n * Timeout para debounce en busquedas (ms)\r\n */\r\nexport const SEARCH_DEBOUNCE_MS = 300;\r\n\r\n/**\r\n * Numero maximo de items en el carrito\r\n */\r\nexport const MAX_CART_ITEMS = 50;\r\n\r\n/**\r\n * Opciones de ordenamiento\r\n */\r\nexport const SORT_OPTIONS = [\r\n  { value: 'fecha_creacion:desc', label: 'Mas recientes' },\r\n  { value: 'fecha_creacion:asc', label: 'Mas antiguos' },\r\n  { value: 'nombre:asc', label: 'Nombre A-Z' },\r\n  { value: 'nombre:desc', label: 'Nombre Z-A' },\r\n  { value: 'precio:asc', label: 'Precio menor a mayor' },\r\n  { value: 'precio:desc', label: 'Precio mayor a menor' },\r\n];\r\n\r\n/**\r\n * Mensajes de confirmacion\r\n */\r\nexport const CONFIRM_MESSAGES = {\r\n  deleteProduct: '¿Estas seguro de eliminar este producto?',\r\n  deleteClient: '¿Estas seguro de eliminar este cliente?',\r\n  cancelSale: '¿Estas seguro de cancelar esta venta?',\r\n  clearCart: '¿Estas seguro de vaciar el carrito?',\r\n  logout: '¿Estas seguro de cerrar sesion?',\r\n};\r\n\r\n/**\r\n * Rutas de navegacion\r\n */\r\nexport const ROUTES = {\r\n  login: '/login',\r\n  dashboard: '/dashboard',\r\n  products: '/dashboard/productos',\r\n  clients: '/dashboard/clientes',\r\n  sales: '/dashboard/ventas',\r\n  reports: '/dashboard/reportes',\r\n};"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;;;;;;;;;;;;;;;AAED;AAAA;AAAA;AAAA;;AAKO,MAAM,wBAAwB;IACnC;QAAE,OAAO,uIAAY,CAAC,GAAG;QAAE,OAAO;IAAM;IACxC;QAAE,OAAO,uIAAY,CAAC,GAAG;QAAE,OAAO;IAAM;IACxC;QAAE,OAAO,uIAAY,CAAC,SAAS;QAAE,OAAO;IAAY;IACpD;QAAE,OAAO,uIAAY,CAAC,kBAAkB;QAAE,OAAO;IAAwB;CAC1E;AAKM,MAAM,yBAAyB;IACpC;QAAE,OAAO,sIAAa,CAAC,QAAQ;QAAE,OAAO;IAAW;IACnD;QAAE,OAAO,sIAAa,CAAC,OAAO;QAAE,OAAO;IAAU;IACjD;QAAE,OAAO,sIAAa,CAAC,aAAa;QAAE,OAAO;IAAgB;IAC7D;QAAE,OAAO,sIAAa,CAAC,IAAI;QAAE,OAAO;IAAO;IAC3C;QAAE,OAAO,sIAAa,CAAC,IAAI;QAAE,OAAO;IAAO;CAC5C;AAKM,MAAM,sBAAsB;IACjC;QAAE,OAAO,mIAAU,CAAC,UAAU;QAAE,OAAO;IAAa;IACpD;QAAE,OAAO,mIAAU,CAAC,SAAS;QAAE,OAAO;IAAY;IAClD;QAAE,OAAO,mIAAU,CAAC,SAAS;QAAE,OAAO;IAAY;CACnD;AAKM,MAAM,oBAAoB;IAC/B;QAAE,OAAO,mIAAQ,CAAC,KAAK;QAAE,OAAO;IAAgB;IAChD;QAAE,OAAO,mIAAQ,CAAC,UAAU;QAAE,OAAO;IAAa;IAClD;QAAE,OAAO,mIAAQ,CAAC,QAAQ;QAAE,OAAO;IAAW;IAC9C;QAAE,OAAO,mIAAQ,CAAC,MAAM;QAAE,OAAO;IAAS;CAC3C;AAKM,MAAM,qBAAiD;IAC5D,CAAC,mIAAU,CAAC,UAAU,CAAC,EAAE;IACzB,CAAC,mIAAU,CAAC,SAAS,CAAC,EAAE;IACxB,CAAC,mIAAU,CAAC,SAAS,CAAC,EAAE;AAC1B;AAKO,MAAM,mBAA6C;IACxD,CAAC,mIAAQ,CAAC,KAAK,CAAC,EAAE;IAClB,CAAC,mIAAQ,CAAC,UAAU,CAAC,EAAE;IACvB,CAAC,mIAAQ,CAAC,QAAQ,CAAC,EAAE;IACrB,CAAC,mIAAQ,CAAC,MAAM,CAAC,EAAE;IACnB,CAAC,mIAAQ,CAAC,OAAO,CAAC,EAAE;AACtB;AAKO,MAAM,iBAAiB;AAKvB,MAAM,qBAAqB;AAK3B,MAAM,iBAAiB;AAKvB,MAAM,eAAe;IAC1B;QAAE,OAAO;QAAuB,OAAO;IAAgB;IACvD;QAAE,OAAO;QAAsB,OAAO;IAAe;IACrD;QAAE,OAAO;QAAc,OAAO;IAAa;IAC3C;QAAE,OAAO;QAAe,OAAO;IAAa;IAC5C;QAAE,OAAO;QAAc,OAAO;IAAuB;IACrD;QAAE,OAAO;QAAe,OAAO;IAAuB;CACvD;AAKM,MAAM,mBAAmB;IAC9B,eAAe;IACf,cAAc;IACd,YAAY;IACZ,WAAW;IACX,QAAQ;AACV;AAKO,MAAM,SAAS;IACpB,OAAO;IACP,WAAW;IACX,UAAU;IACV,SAAS;IACT,OAAO;IACP,SAAS;AACX"}},
    {"offset": {"line": 551, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/store/venta-store.ts"],"sourcesContent":["/**\r\n * Store global de ventas y carrito usando Zustand\r\n */\r\n\r\nimport { create } from 'zustand';\r\nimport { CartItem, Product, PaymentMethod } from '@/lib/types';\r\nimport { IGV_PERCENTAGE } from '@/lib/constants';\r\n\r\ninterface VentaState {\r\n  // Estado del carrito\r\n  items: CartItem[];\r\n  clienteId: number | null;\r\n  metodoPago: PaymentMethod;\r\n  observaciones: string;\r\n  \r\n  // Calculos\r\n  subtotal: number;\r\n  igv: number;\r\n  total: number;\r\n  \r\n  // Acciones\r\n  addItem: (producto: Product, cantidad: number) => void;\r\n  removeItem: (productoId: number) => void;\r\n  updateItemQuantity: (productoId: number, cantidad: number) => void;\r\n  clearCart: () => void;\r\n  setCliente: (clienteId: number) => void;\r\n  setMetodoPago: (metodo: PaymentMethod) => void;\r\n  setObservaciones: (obs: string) => void;\r\n  calculateTotals: () => void;\r\n}\r\n\r\n/**\r\n * Store de ventas\r\n */\r\nexport const useVentaStore = create<VentaState>((set, get) => ({\r\n  // Estado inicial\r\n  items: [],\r\n  clienteId: null,\r\n  metodoPago: PaymentMethod.EFECTIVO,\r\n  observaciones: '',\r\n  subtotal: 0,\r\n  igv: 0,\r\n  total: 0,\r\n  \r\n  /**\r\n   * Agrega un item al carrito o incrementa su cantidad\r\n   */\r\n  addItem: (producto, cantidad) => {\r\n    const { items } = get();\r\n    const existingItem = items.find((item) => item.producto.id === producto.id);\r\n    \r\n    let newItems: CartItem[];\r\n    \r\n    if (existingItem) {\r\n      // Incrementar cantidad del item existente\r\n      newItems = items.map((item) =>\r\n        item.producto.id === producto.id\r\n          ? {\r\n              ...item,\r\n              cantidad: item.cantidad + cantidad,\r\n              subtotal: (item.cantidad + cantidad) * item.precio_unitario,\r\n            }\r\n          : item\r\n      );\r\n    } else {\r\n      // Agregar nuevo item\r\n      const newItem: CartItem = {\r\n        producto,\r\n        cantidad,\r\n        precio_unitario: producto.precio,\r\n        subtotal: producto.precio * cantidad,\r\n      };\r\n      newItems = [...items, newItem];\r\n    }\r\n    \r\n    set({ items: newItems });\r\n    get().calculateTotals();\r\n  },\r\n  \r\n  /**\r\n   * Elimina un item del carrito\r\n   */\r\n  removeItem: (productoId) => {\r\n    const { items } = get();\r\n    const newItems = items.filter((item) => item.producto.id !== productoId);\r\n    \r\n    set({ items: newItems });\r\n    get().calculateTotals();\r\n  },\r\n  \r\n  /**\r\n   * Actualiza la cantidad de un item\r\n   */\r\n  updateItemQuantity: (productoId, cantidad) => {\r\n    const { items } = get();\r\n    \r\n    if (cantidad <= 0) {\r\n      get().removeItem(productoId);\r\n      return;\r\n    }\r\n    \r\n    const newItems = items.map((item) =>\r\n      item.producto.id === productoId\r\n        ? {\r\n            ...item,\r\n            cantidad,\r\n            subtotal: cantidad * item.precio_unitario,\r\n          }\r\n        : item\r\n    );\r\n    \r\n    set({ items: newItems });\r\n    get().calculateTotals();\r\n  },\r\n  \r\n  /**\r\n   * Vacia el carrito completamente\r\n   */\r\n  clearCart: () => {\r\n    set({\r\n      items: [],\r\n      clienteId: null,\r\n      metodoPago: PaymentMethod.EFECTIVO,\r\n      observaciones: '',\r\n      subtotal: 0,\r\n      igv: 0,\r\n      total: 0,\r\n    });\r\n  },\r\n  \r\n  /**\r\n   * Establece el cliente para la venta\r\n   */\r\n  setCliente: (clienteId) => {\r\n    set({ clienteId });\r\n  },\r\n  \r\n  /**\r\n   * Establece el metodo de pago\r\n   */\r\n  setMetodoPago: (metodo) => {\r\n    set({ metodoPago: metodo });\r\n  },\r\n  \r\n  /**\r\n   * Establece observaciones de la venta\r\n   */\r\n  setObservaciones: (obs) => {\r\n    set({ observaciones: obs });\r\n  },\r\n  \r\n  /**\r\n   * Calcula subtotal, IGV y total\r\n   */\r\n  calculateTotals: () => {\r\n    const { items } = get();\r\n    \r\n    const subtotal = items.reduce((sum, item) => sum + item.subtotal, 0);\r\n    const igv = subtotal * IGV_PERCENTAGE;\r\n    const total = subtotal + igv;\r\n    \r\n    set({ subtotal, igv, total });\r\n  },\r\n}));"],"names":[],"mappings":"AAAA;;CAEC;;;;AAED;AACA;AAAA;AACA;;;;AA4BO,MAAM,gBAAgB,IAAA,kKAAM,EAAa,CAAC,KAAK,MAAQ,CAAC;QAC7D,iBAAiB;QACjB,OAAO,EAAE;QACT,WAAW;QACX,YAAY,sIAAa,CAAC,QAAQ;QAClC,eAAe;QACf,UAAU;QACV,KAAK;QACL,OAAO;QAEP;;GAEC,GACD,SAAS,CAAC,UAAU;YAClB,MAAM,EAAE,KAAK,EAAE,GAAG;YAClB,MAAM,eAAe,MAAM,IAAI,CAAC,CAAC,OAAS,KAAK,QAAQ,CAAC,EAAE,KAAK,SAAS,EAAE;YAE1E,IAAI;YAEJ,IAAI,cAAc;gBAChB,0CAA0C;gBAC1C,WAAW,MAAM,GAAG,CAAC,CAAC,OACpB,KAAK,QAAQ,CAAC,EAAE,KAAK,SAAS,EAAE,GAC5B;wBACE,GAAG,IAAI;wBACP,UAAU,KAAK,QAAQ,GAAG;wBAC1B,UAAU,CAAC,KAAK,QAAQ,GAAG,QAAQ,IAAI,KAAK,eAAe;oBAC7D,IACA;YAER,OAAO;gBACL,qBAAqB;gBACrB,MAAM,UAAoB;oBACxB;oBACA;oBACA,iBAAiB,SAAS,MAAM;oBAChC,UAAU,SAAS,MAAM,GAAG;gBAC9B;gBACA,WAAW;uBAAI;oBAAO;iBAAQ;YAChC;YAEA,IAAI;gBAAE,OAAO;YAAS;YACtB,MAAM,eAAe;QACvB;QAEA;;GAEC,GACD,YAAY,CAAC;YACX,MAAM,EAAE,KAAK,EAAE,GAAG;YAClB,MAAM,WAAW,MAAM,MAAM,CAAC,CAAC,OAAS,KAAK,QAAQ,CAAC,EAAE,KAAK;YAE7D,IAAI;gBAAE,OAAO;YAAS;YACtB,MAAM,eAAe;QACvB;QAEA;;GAEC,GACD,oBAAoB,CAAC,YAAY;YAC/B,MAAM,EAAE,KAAK,EAAE,GAAG;YAElB,IAAI,YAAY,GAAG;gBACjB,MAAM,UAAU,CAAC;gBACjB;YACF;YAEA,MAAM,WAAW,MAAM,GAAG,CAAC,CAAC,OAC1B,KAAK,QAAQ,CAAC,EAAE,KAAK,aACjB;oBACE,GAAG,IAAI;oBACP;oBACA,UAAU,WAAW,KAAK,eAAe;gBAC3C,IACA;YAGN,IAAI;gBAAE,OAAO;YAAS;YACtB,MAAM,eAAe;QACvB;QAEA;;GAEC,GACD,WAAW;YACT,IAAI;gBACF,OAAO,EAAE;gBACT,WAAW;gBACX,YAAY,sIAAa,CAAC,QAAQ;gBAClC,eAAe;gBACf,UAAU;gBACV,KAAK;gBACL,OAAO;YACT;QACF;QAEA;;GAEC,GACD,YAAY,CAAC;YACX,IAAI;gBAAE;YAAU;QAClB;QAEA;;GAEC,GACD,eAAe,CAAC;YACd,IAAI;gBAAE,YAAY;YAAO;QAC3B;QAEA;;GAEC,GACD,kBAAkB,CAAC;YACjB,IAAI;gBAAE,eAAe;YAAI;QAC3B;QAEA;;GAEC,GACD,iBAAiB;YACf,MAAM,EAAE,KAAK,EAAE,GAAG;YAElB,MAAM,WAAW,MAAM,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,QAAQ,EAAE;YAClE,MAAM,MAAM,WAAW,kIAAc;YACrC,MAAM,QAAQ,WAAW;YAEzB,IAAI;gBAAE;gBAAU;gBAAK;YAAM;QAC7B;IACF,CAAC"}},
    {"offset": {"line": 684, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/components/modules/productos/producto-item.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { Product } from '@/lib/types';\r\nimport { formatCurrency } from '@/lib/formatters';\r\nimport { Plus, Package } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\n\r\ninterface ProductoItemProps {\r\n  producto: Product;\r\n  onSelect: (producto: Product) => void;\r\n}\r\n\r\nexport function ProductoItem({ producto, onSelect }: ProductoItemProps) {\r\n  return (\r\n    <div className=\"flex items-center justify-between p-4 border border-secondary-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-all\">\r\n      <div className=\"flex items-center gap-3 flex-1\">\r\n        <div className=\"w-12 h-12 bg-secondary-100 rounded-lg flex items-center justify-center\">\r\n          <Package className=\"w-6 h-6 text-secondary-600\" />\r\n        </div>\r\n        \r\n        <div className=\"flex-1 min-w-0\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <p className=\"font-medium text-secondary-900 truncate\">{producto.nombre}</p>\r\n            <span className=\"text-xs text-secondary-500\">({producto.codigo})</span>\r\n          </div>\r\n          \r\n          <div className=\"flex items-center gap-3 mt-1\">\r\n            <span className=\"text-sm font-semibold text-primary-600\">\r\n              {formatCurrency(producto.precio)}\r\n            </span>\r\n            <span\r\n              className={`text-xs ${\r\n                producto.stock === 0\r\n                  ? 'text-red-600'\r\n                  : producto.stock < 10\r\n                  ? 'text-yellow-600'\r\n                  : 'text-secondary-600'\r\n              }`}\r\n            >\r\n              Stock: {producto.stock}\r\n            </span>\r\n            {producto.categoria && (\r\n              <span className=\"text-xs text-secondary-500\">{producto.categoria}</span>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <Button\r\n        size=\"sm\"\r\n        variant=\"primary\"\r\n        onClick={() => onSelect(producto)}\r\n        disabled={producto.stock === 0 || !producto.activo}\r\n      >\r\n        <Plus className=\"w-4 h-4 mr-1\" />\r\n        Agregar al carrito\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\nProductoItem.displayName = 'ProductoItem';"],"names":[],"mappings":";;;;;AAIA;AACA;AAAA;AACA;AANA;;;;;AAaO,SAAS,aAAa,EAAE,QAAQ,EAAE,QAAQ,EAAqB;IACpE,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,oNAAO;4BAAC,WAAU;;;;;;;;;;;kCAGrB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAU;kDAA2C,SAAS,MAAM;;;;;;kDACvE,8OAAC;wCAAK,WAAU;;4CAA6B;4CAAE,SAAS,MAAM;4CAAC;;;;;;;;;;;;;0CAGjE,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAK,WAAU;kDACb,IAAA,mIAAc,EAAC,SAAS,MAAM;;;;;;kDAEjC,8OAAC;wCACC,WAAW,CAAC,QAAQ,EAClB,SAAS,KAAK,KAAK,IACf,iBACA,SAAS,KAAK,GAAG,KACjB,oBACA,sBACJ;;4CACH;4CACS,SAAS,KAAK;;;;;;;oCAEvB,SAAS,SAAS,kBACjB,8OAAC;wCAAK,WAAU;kDAA8B,SAAS,SAAS;;;;;;;;;;;;;;;;;;;;;;;;0BAMxE,8OAAC,qIAAM;gBACL,MAAK;gBACL,SAAQ;gBACR,SAAS,IAAM,SAAS;gBACxB,UAAU,SAAS,KAAK,KAAK,KAAK,CAAC,SAAS,MAAM;;kCAElD,8OAAC,2MAAI;wBAAC,WAAU;;;;;;oBAAiB;;;;;;;;;;;;;AAKzC;AACA,aAAa,WAAW,GAAG"}},
    {"offset": {"line": 831, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/components/modules/ventas/carrito.tsx"],"sourcesContent":["/**\r\n * Componente del carrito de compras\r\n */\r\n\r\n'use client';\r\n\r\nimport React from 'react';\r\nimport { useVentaStore } from '@/store/venta-store';\r\nimport { formatCurrency } from '@/lib/formatters';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Minus, Plus, Trash2, ShoppingCart } from 'lucide-react';\r\n\r\nexport function Carrito() {\r\n  const { items, updateItemQuantity, removeItem, clearCart } = useVentaStore();\r\n\r\n  if (items.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-8\">\r\n        <ShoppingCart className=\"w-12 h-12 text-slate-500 mx-auto mb-3\" />\r\n        <p className=\"text-slate-300\">El carrito está vacío</p>\r\n        <p className=\"text-sm text-slate-400 mt-1\">\r\n          Agrega productos para comenzar una venta\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {/* Lista de items */}\r\n      <div className=\"space-y-2 max-h-80 overflow-y-auto\">\r\n        {items.map((item) => (\r\n          <div\r\n            key={item.producto.id}\r\n            className=\"flex items-center gap-3 p-3 border border-blue-400/30 rounded-xl bg-slate-800/40\"\r\n          >\r\n            <div className=\"flex-1 min-w-0\">\r\n              <p className=\"font-medium text-sm truncate text-white\">{item.producto.nombre}</p>\r\n              <p className=\"text-xs text-slate-400\">{item.producto.codigo}</p>\r\n              <p className=\"text-sm font-semibold text-blue-400 mt-1\">\r\n                {formatCurrency(item.precio_unitario)}\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-2\">\r\n              {/* Control de cantidad */}\r\n              <div className=\"flex items-center gap-1 bg-slate-700/50 rounded-lg border border-blue-400/20\">\r\n                <Button\r\n                  size=\"sm\"\r\n                  variant=\"ghost\"\r\n                  className=\"rounded-l-lg p-1\"\r\n                  onClick={() => updateItemQuantity(item.producto.id, item.cantidad - 1)}\r\n                  disabled={item.cantidad <= 1}\r\n                >\r\n                  <Minus className=\"w-4 h-4\" />\r\n                </Button>\r\n                <span className=\"px-3 py-1 font-medium text-sm min-w-[2rem] text-center text-white\">\r\n                  {item.cantidad}\r\n                </span>\r\n                <Button\r\n                  size=\"sm\"\r\n                  variant=\"ghost\"\r\n                  className=\"rounded-r-lg p-1\"\r\n                  onClick={() => updateItemQuantity(item.producto.id, item.cantidad + 1)}\r\n                  disabled={item.cantidad >= item.producto.stock}\r\n                >\r\n                  <Plus className=\"w-4 h-4\" />\r\n                </Button>\r\n              </div>\r\n\r\n              {/* Botón eliminar */}\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"ghost\"\r\n                className=\"text-red-600 p-1\"\r\n                onClick={() => removeItem(item.producto.id)}\r\n                title=\"Eliminar del carrito\"\r\n              >\r\n                <Trash2 className=\"w-4 h-4\" />\r\n              </Button>\r\n            </div>\r\n\r\n            {/* Subtotal del item */}\r\n            <div className=\"text-right min-w-[5rem]\">\r\n              <p className=\"font-semibold text-sm text-white\">{formatCurrency(item.subtotal)}</p>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Botón vaciar carrito */}\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"sm\"\r\n        fullWidth\r\n        onClick={() => {\r\n          if (confirm('¿Estás seguro de vaciar el carrito?')) {\r\n            clearCart();\r\n          }\r\n        }}\r\n        className=\"text-red-400 hover:bg-red-500/10 border border-red-400/30\"\r\n      >\r\n        <Trash2 className=\"w-4 h-4 mr-2\" />\r\n        Vaciar Carrito\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;AAKD;AACA;AACA;AACA;AAAA;AAAA;AAAA;AANA;;;;;;AAQO,SAAS;IACd,MAAM,EAAE,KAAK,EAAE,kBAAkB,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,IAAA,wIAAa;IAE1E,IAAI,MAAM,MAAM,KAAK,GAAG;QACtB,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC,uOAAY;oBAAC,WAAU;;;;;;8BACxB,8OAAC;oBAAE,WAAU;8BAAiB;;;;;;8BAC9B,8OAAC;oBAAE,WAAU;8BAA8B;;;;;;;;;;;;IAKjD;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC,qBACV,8OAAC;wBAEC,WAAU;;0CAEV,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAU;kDAA2C,KAAK,QAAQ,CAAC,MAAM;;;;;;kDAC5E,8OAAC;wCAAE,WAAU;kDAA0B,KAAK,QAAQ,CAAC,MAAM;;;;;;kDAC3D,8OAAC;wCAAE,WAAU;kDACV,IAAA,mIAAc,EAAC,KAAK,eAAe;;;;;;;;;;;;0CAIxC,8OAAC;gCAAI,WAAU;;kDAEb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,qIAAM;gDACL,MAAK;gDACL,SAAQ;gDACR,WAAU;gDACV,SAAS,IAAM,mBAAmB,KAAK,QAAQ,CAAC,EAAE,EAAE,KAAK,QAAQ,GAAG;gDACpE,UAAU,KAAK,QAAQ,IAAI;0DAE3B,cAAA,8OAAC,8MAAK;oDAAC,WAAU;;;;;;;;;;;0DAEnB,8OAAC;gDAAK,WAAU;0DACb,KAAK,QAAQ;;;;;;0DAEhB,8OAAC,qIAAM;gDACL,MAAK;gDACL,SAAQ;gDACR,WAAU;gDACV,SAAS,IAAM,mBAAmB,KAAK,QAAQ,CAAC,EAAE,EAAE,KAAK,QAAQ,GAAG;gDACpE,UAAU,KAAK,QAAQ,IAAI,KAAK,QAAQ,CAAC,KAAK;0DAE9C,cAAA,8OAAC,2MAAI;oDAAC,WAAU;;;;;;;;;;;;;;;;;kDAKpB,8OAAC,qIAAM;wCACL,MAAK;wCACL,SAAQ;wCACR,WAAU;wCACV,SAAS,IAAM,WAAW,KAAK,QAAQ,CAAC,EAAE;wCAC1C,OAAM;kDAEN,cAAA,8OAAC,qNAAM;4CAAC,WAAU;;;;;;;;;;;;;;;;;0CAKtB,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAE,WAAU;8CAAoC,IAAA,mIAAc,EAAC,KAAK,QAAQ;;;;;;;;;;;;uBAnD1E,KAAK,QAAQ,CAAC,EAAE;;;;;;;;;;0BA0D3B,8OAAC,qIAAM;gBACL,SAAQ;gBACR,MAAK;gBACL,SAAS;gBACT,SAAS;oBACP,IAAI,QAAQ,wCAAwC;wBAClD;oBACF;gBACF;gBACA,WAAU;;kCAEV,8OAAC,qNAAM;wBAAC,WAAU;;;;;;oBAAiB;;;;;;;;;;;;;AAK3C"}},
    {"offset": {"line": 1070, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/components/modules/ventas/venta-form.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { useVentaStore } from '@/store/venta-store';\r\nimport { Client, Product } from '@/lib/types';\r\nimport { PAYMENT_METHOD_OPTIONS } from '@/lib/constants';\r\nimport { formatCurrency } from '@/lib/formatters';\r\nimport { ProductoItem } from '../productos/producto-item';\r\nimport { Carrito } from './carrito';\r\nimport { Search, UserPlus } from 'lucide-react';\r\n\r\ninterface VentaFormProps {\r\n  clientes: Client[];\r\n  productos: Product[];\r\n  onClienteSelect: (clienteId: number) => void;\r\n  onCreateCliente: () => void;\r\n  onSearchProducto: (query: string) => void;\r\n  onSubmit: () => Promise<void>;\r\n  isLoading?: boolean;\r\n  isClientUser?: boolean;\r\n}\r\n\r\nexport function VentaForm({\r\n  clientes,\r\n  productos,\r\n  onClienteSelect,\r\n  onCreateCliente,\r\n  onSearchProducto,\r\n  onSubmit,\r\n  isLoading = false,\r\n  isClientUser = false,\r\n}: VentaFormProps) {\r\n  const {\r\n    items,\r\n    clienteId,\r\n    metodoPago,\r\n    observaciones,\r\n    subtotal,\r\n    igv,\r\n    total,\r\n    addItem,\r\n    setMetodoPago,\r\n    setObservaciones,\r\n  } = useVentaStore();\r\n\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n\r\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const query = e.target.value;\r\n    setSearchQuery(query);\r\n    onSearchProducto(query);\r\n  };\r\n\r\n  const handleAddProduct = (producto: Product) => {\r\n    addItem(producto, 1);\r\n  };\r\n\r\n  const isFormValid = (): boolean => {\r\n    if (isClientUser) {\r\n      return items.length > 0;\r\n    }\r\n    return items.length > 0 && clienteId !== null;\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n      {/* Columna izquierda: Seleccion de productos */}\r\n      <div className=\"lg:col-span-2 space-y-6\">\r\n        {/* Seleccion de cliente */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Cliente</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {isClientUser ? (\r\n              <p className=\"text-sm text-slate-300\">\r\n                Esta compra se registrará a tu nombre.\r\n              </p>\r\n            ) : (\r\n              <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center\">\r\n                <Select\r\n                  value={clienteId?.toString() ?? ''}\r\n                  onValueChange={(value) => onClienteSelect(Number(value))}\r\n                  disabled={isLoading}\r\n                >\r\n                  <SelectTrigger className=\"flex-1\">\r\n                    <SelectValue placeholder=\"Seleccionar cliente\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {clientes.map((cliente) => (\r\n                      <SelectItem key={cliente.id} value={cliente.id.toString()}>\r\n                        {cliente.nombre} {cliente.apellido} - {cliente.numero_documento}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n                <Button onClick={onCreateCliente} disabled={isLoading}>\r\n                  <UserPlus className=\"w-4 h-4 mr-2\" />\r\n                  Nuevo\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Busqueda de productos */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Productos</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"relative\">\r\n              <Search className=\"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\" />\r\n              <Input\r\n                placeholder=\"Buscar productos por nombre o código...\"\r\n                value={searchQuery}\r\n                onChange={handleSearchChange}\r\n                disabled={isLoading}\r\n                className=\"pl-10\"\r\n              />\r\n            </div>\r\n            <div className=\"mt-4 space-y-2 max-h-96 overflow-y-auto\">\r\n              {productos.length === 0 ? (\r\n                <p className=\"text-center text-slate-400 py-8\">\r\n                  {searchQuery\r\n                    ? 'No se encontraron productos'\r\n                    : 'Busca un producto para agregarlo a la venta'}\r\n                </p>\r\n              ) : (\r\n                productos.map((producto) => (\r\n                  <ProductoItem\r\n                    key={producto.id}\r\n                    producto={producto}\r\n                    onSelect={handleAddProduct}\r\n                  />\r\n                ))\r\n              )}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Columna derecha: Carrito y resumen */}\r\n      <div className=\"space-y-6\">\r\n        {/* Carrito de compras */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Carrito ({items.length})</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <Carrito />\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Resumen de venta */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Resumen</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            {/* Metodo de pago */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-slate-300 mb-1\">\r\n                Metodo de Pago\r\n              </label>\r\n              <Select\r\n                value={metodoPago}\r\n                onValueChange={(value) => setMetodoPago(value as any)}\r\n                disabled={isLoading}\r\n              >\r\n                <SelectTrigger>\r\n                  <SelectValue placeholder=\"Seleccionar método de pago\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {PAYMENT_METHOD_OPTIONS.map((option) => (\r\n                    <SelectItem key={option.value} value={option.value}>\r\n                      {option.label}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            {/* Observaciones */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-slate-300 mb-1\">\r\n                Observaciones\r\n              </label>\r\n              <textarea\r\n                value={observaciones}\r\n                onChange={(e) => setObservaciones(e.target.value)}\r\n                rows={2}\r\n                className=\"block w-full rounded-xl border border-blue-400/30 bg-slate-800/50 text-white placeholder-slate-400 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400/50 focus:border-blue-400/50 transition-all duration-200\"\r\n                placeholder=\"Observaciones opcionales\"\r\n                disabled={isLoading}\r\n              />\r\n            </div>\r\n\r\n            {/* Totales */}\r\n            <div className=\"border-t border-blue-400/30 pt-4 space-y-2\">\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span className=\"text-slate-300\">Subtotal:</span>\r\n                <span className=\"font-medium text-white\">{formatCurrency(subtotal)}</span>\r\n              </div>\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span className=\"text-slate-300\">IGV (18%):</span>\r\n                <span className=\"font-medium text-white\">{formatCurrency(igv)}</span>\r\n              </div>\r\n              <div className=\"flex justify-between text-lg font-bold border-t border-blue-400/30 pt-2\">\r\n                <span className=\"text-white\">Total:</span>\r\n                <span className=\"text-blue-400\">{formatCurrency(total)}</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Boton de completar venta */}\r\n            <Button\r\n              fullWidth\r\n              onClick={onSubmit}\r\n              disabled={!isFormValid() || isLoading}\r\n              isLoading={isLoading}\r\n              size=\"lg\"\r\n            >\r\n              Completar Venta\r\n            </Button>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1577, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/lib/services/venta-service.ts"],"sourcesContent":["/**\r\n * Servicio de ventas\r\n * Maneja todas las operaciones relacionadas con ventas\r\n */\r\n\r\nimport axios from 'axios';\r\nimport { saleEndpoints } from '../config/endpoints';\r\nimport {\r\n  Sale,\r\n  CreateSaleData,\r\n  SaleFilters,\r\n  SaleSummary,\r\n  PaginatedResponse,\r\n  QueryOptions,\r\n} from '../types';\r\n\r\n/**\r\n * Obtiene lista paginada de ventas\r\n */\r\nexport async function getSales(\r\n  options: QueryOptions = {},\r\n  token: string\r\n): Promise<PaginatedResponse<Sale>> {\r\n  const params = {\r\n    page: options.page || 1,\r\n    page_size: options.page_size || 10,\r\n    sort_by: options.sort_by,\r\n    sort_order: options.sort_order,\r\n    ...options.filters,\r\n  };\r\n\r\n  const response = await axios.get<PaginatedResponse<Sale>>(saleEndpoints.base, {\r\n    params,\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  return response.data;\r\n}\r\n\r\n/**\r\n * Obtiene una venta por ID con sus detalles\r\n */\r\nexport async function getSaleById(id: number, token: string): Promise<Sale> {\r\n  const response = await axios.get<Sale>(saleEndpoints.byId(id), {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  return response.data;\r\n}\r\n\r\n/**\r\n * Crea una nueva venta\r\n */\r\nexport async function createSale(data: CreateSaleData, token: string): Promise<Sale> {\r\n  const response = await axios.post<Sale>(saleEndpoints.create, data, {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  return response.data;\r\n}\r\n\r\n/**\r\n * Cancela una venta existente\r\n */\r\nexport async function cancelSale(id: number, motivo: string, token: string): Promise<Sale> {\r\n  const response = await axios.post<Sale>(\r\n    saleEndpoints.cancel(id),\r\n    { motivo },\r\n    {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    }\r\n  );\r\n\r\n  return response.data;\r\n}\r\n\r\n/**\r\n * Obtiene ventas por rango de fechas\r\n */\r\nexport async function getSalesByDateRange(\r\n  fechaInicio: string,\r\n  fechaFin: string,\r\n  token: string\r\n): Promise<Sale[]> {\r\n  const response = await axios.get<Sale[]>(saleEndpoints.byDate, {\r\n    params: {\r\n      fecha_inicio: fechaInicio,\r\n      fecha_fin: fechaFin,\r\n    },\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  return response.data;\r\n}\r\n\r\n/**\r\n * Obtiene ventas de un cliente especifico\r\n */\r\nexport async function getSalesByClient(clientId: number, token: string): Promise<Sale[]> {\r\n  const response = await axios.get<Sale[]>(saleEndpoints.byClient(clientId), {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  return response.data;\r\n}\r\n\r\n/**\r\n * Obtiene resumen de ventas segun filtros\r\n */\r\nexport async function getSalesSummary(\r\n  filters: SaleFilters = {},\r\n  token: string\r\n): Promise<SaleSummary> {\r\n  const response = await axios.get<SaleSummary>(`${saleEndpoints.base}/summary`, {\r\n    params: filters,\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  return response.data;\r\n}"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;;;;;AAED;AACA;;;AAaO,eAAe,SACpB,UAAwB,CAAC,CAAC,EAC1B,KAAa;IAEb,MAAM,SAAS;QACb,MAAM,QAAQ,IAAI,IAAI;QACtB,WAAW,QAAQ,SAAS,IAAI;QAChC,SAAS,QAAQ,OAAO;QACxB,YAAY,QAAQ,UAAU;QAC9B,GAAG,QAAQ,OAAO;IACpB;IAEA,MAAM,WAAW,MAAM,gJAAK,CAAC,GAAG,CAA0B,2IAAa,CAAC,IAAI,EAAE;QAC5E;QACA,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;IACF;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,YAAY,EAAU,EAAE,KAAa;IACzD,MAAM,WAAW,MAAM,gJAAK,CAAC,GAAG,CAAO,2IAAa,CAAC,IAAI,CAAC,KAAK;QAC7D,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;IACF;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,WAAW,IAAoB,EAAE,KAAa;IAClE,MAAM,WAAW,MAAM,gJAAK,CAAC,IAAI,CAAO,2IAAa,CAAC,MAAM,EAAE,MAAM;QAClE,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;IACF;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,WAAW,EAAU,EAAE,MAAc,EAAE,KAAa;IACxE,MAAM,WAAW,MAAM,gJAAK,CAAC,IAAI,CAC/B,2IAAa,CAAC,MAAM,CAAC,KACrB;QAAE;IAAO,GACT;QACE,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;IACF;IAGF,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,oBACpB,WAAmB,EACnB,QAAgB,EAChB,KAAa;IAEb,MAAM,WAAW,MAAM,gJAAK,CAAC,GAAG,CAAS,2IAAa,CAAC,MAAM,EAAE;QAC7D,QAAQ;YACN,cAAc;YACd,WAAW;QACb;QACA,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;IACF;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,iBAAiB,QAAgB,EAAE,KAAa;IACpE,MAAM,WAAW,MAAM,gJAAK,CAAC,GAAG,CAAS,2IAAa,CAAC,QAAQ,CAAC,WAAW;QACzE,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;IACF;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,gBACpB,UAAuB,CAAC,CAAC,EACzB,KAAa;IAEb,MAAM,WAAW,MAAM,gJAAK,CAAC,GAAG,CAAc,GAAG,2IAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;QAC7E,QAAQ;QACR,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;IACF;IAEA,OAAO,SAAS,IAAI;AACtB"}},
    {"offset": {"line": 1675, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/hooks/use-ventas.ts"],"sourcesContent":["/**\r\n * Hook personalizado para manejo de ventas\r\n */\r\n\r\nimport { useState, useCallback } from 'react';\r\nimport { useAuthStore } from '@/store/auth-store';\r\nimport { UserRole } from '@/lib/types/usuario';\r\nimport { useVentaStore } from '@/store/venta-store';\r\nimport {\r\n  getSales,\r\n  getSaleById,\r\n  createSale,\r\n  cancelSale,\r\n  getSalesSummary,\r\n} from '@/lib/services/venta-service';\r\nimport {\r\n  Sale,\r\n  CreateSaleData,\r\n  SaleFilters,\r\n  SaleSummary,\r\n  QueryOptions,\r\n  PaginatedResponse,\r\n} from '@/lib/types';\r\n\r\nexport function useVentas() {\r\n  const { token, user } = useAuthStore();\r\n  const { items, clienteId, metodoPago, observaciones, clearCart } = useVentaStore();\r\n  const [sales, setSales] = useState<Sale[]>([]);\r\n  const [pagination, setPagination] = useState<Omit<PaginatedResponse<Sale>, 'items'>>({\r\n    total: 0,\r\n    page: 1,\r\n    page_size: 10,\r\n    total_pages: 0,\r\n  });\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  \r\n  /**\r\n   * Carga la lista de ventas\r\n   */\r\n  const loadSales = useCallback(\r\n    async (options: QueryOptions = {}) => {\r\n      if (!token) return;\r\n      \r\n      setIsLoading(true);\r\n      setError(null);\r\n      \r\n      try {\r\n        const response = await getSales(options, token);\r\n        setSales(response.items);\r\n        setPagination({\r\n          total: response.total,\r\n          page: response.page,\r\n          page_size: response.page_size,\r\n          total_pages: response.total_pages,\r\n        });\r\n      } catch (err: any) {\r\n        setError(err.message || 'Error al cargar ventas');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    },\r\n    [token]\r\n  );\r\n  \r\n  /**\r\n   * Obtiene una venta por ID\r\n   */\r\n  const getSale = useCallback(\r\n    async (id: number) => {\r\n      if (!token) return null;\r\n      \r\n      try {\r\n        return await getSaleById(id, token);\r\n      } catch (err: any) {\r\n        setError(err.message || 'Error al obtener venta');\r\n        return null;\r\n      }\r\n    },\r\n    [token]\r\n  );\r\n  \r\n  /**\r\n   * Crea una nueva venta desde el carrito actual\r\n   */\r\n  const createNewSale = useCallback(\r\n    async () => {\r\n      if (!token || items.length === 0) {\r\n        setError('Faltan datos para completar la venta');\r\n        return null;\r\n      }\r\n\r\n      let finalClienteId = clienteId;\r\n\r\n      if (!finalClienteId && user?.rol === UserRole.CLIENTE) {\r\n        finalClienteId = user.id;\r\n      }\r\n\r\n      if (!finalClienteId) {\r\n        setError('Debes seleccionar un cliente para completar la venta');\r\n        return null;\r\n      }\r\n      \r\n      try {\r\n        const saleData: CreateSaleData = {\r\n          cliente_id: finalClienteId,\r\n          metodo_pago: metodoPago,\r\n          observaciones: observaciones || undefined,\r\n          detalles: items.map((item) => ({\r\n            producto_id: item.producto.id,\r\n            cantidad: item.cantidad,\r\n            precio_unitario: item.precio_unitario,\r\n          })),\r\n        };\r\n        \r\n        const newSale = await createSale(saleData, token);\r\n        clearCart();\r\n        await loadSales();\r\n        return newSale;\r\n      } catch (err: any) {\r\n        setError(err.message || 'Error al crear venta');\r\n        return null;\r\n      }\r\n    },\r\n    [token, clienteId, metodoPago, observaciones, items, clearCart, loadSales]\r\n  );\r\n  \r\n  /**\r\n   * Cancela una venta existente\r\n   */\r\n  const cancelExistingSale = useCallback(\r\n    async (id: number, motivo: string) => {\r\n      if (!token) return null;\r\n      \r\n      try {\r\n        const canceledSale = await cancelSale(id, motivo, token);\r\n        await loadSales();\r\n        return canceledSale;\r\n      } catch (err: any) {\r\n        setError(err.message || 'Error al cancelar venta');\r\n        return null;\r\n      }\r\n    },\r\n    [token, loadSales]\r\n  );\r\n  \r\n  /**\r\n   * Obtiene resumen de ventas\r\n   */\r\n  const getSummary = useCallback(\r\n    async (filters: SaleFilters = {}) => {\r\n      if (!token) return null;\r\n      \r\n      try {\r\n        return await getSalesSummary(filters, token);\r\n      } catch (err: any) {\r\n        setError(err.message || 'Error al obtener resumen');\r\n        return null;\r\n      }\r\n    },\r\n    [token]\r\n  );\r\n  \r\n  return {\r\n    sales,\r\n    pagination,\r\n    isLoading,\r\n    error,\r\n    loadSales,\r\n    getSale,\r\n    createSale: createNewSale,\r\n    cancelSale: cancelExistingSale,\r\n    getSummary,\r\n  };\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1827, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/lib/services/producto-service.ts"],"sourcesContent":["/**\r\n * Servicio de productos\r\n * Maneja todas las operaciones CRUD de productos\r\n */\r\n\r\nimport axios from 'axios';\r\nimport { productEndpoints } from '../config/endpoints';\r\nimport {\r\n  Product,\r\n  CreateProductData,\r\n  UpdateProductData,\r\n  ProductFilters,\r\n  ProductCategory,\r\n  PaginatedResponse,\r\n  QueryOptions,\r\n} from '../types';\r\n\r\n/**\r\n * Obtiene lista paginada de productos\r\n */\r\nexport async function getProducts(\r\n  options: QueryOptions = {},\r\n  token: string\r\n): Promise<PaginatedResponse<Product>> {\r\n  const params = {\r\n    page: options.page || 1,\r\n    page_size: options.page_size || 10,\r\n    sort_by: options.sort_by,\r\n    sort_order: options.sort_order,\r\n    ...options.filters,\r\n  };\r\n\r\n  const response = await axios.get<PaginatedResponse<Product>>(productEndpoints.base, {\r\n    params,\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  return response.data;\r\n}\r\n\r\n/**\r\n * Obtiene un producto por ID\r\n */\r\nexport async function getProductById(id: number, token: string): Promise<Product> {\r\n  const response = await axios.get<Product>(productEndpoints.byId(id), {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  return response.data;\r\n}\r\n\r\n/**\r\n * Crea un nuevo producto\r\n * Si el dato contiene una imagen (File), se envía como FormData\r\n * De lo contrario, se envía como JSON normal\r\n */\r\nexport async function createProduct(data: CreateProductData, token: string): Promise<Product> {\r\n  let response;\r\n\r\n  // Si hay una imagen (File), usar FormData\r\n  if (data.imagen instanceof File) {\r\n    const formData = new FormData();\r\n    formData.append('codigo', data.codigo);\r\n    formData.append('nombre', data.nombre);\r\n    formData.append('precio', data.precio.toString());\r\n    formData.append('stock', data.stock.toString());\r\n    \r\n    if (data.descripcion) {\r\n      formData.append('descripcion', data.descripcion);\r\n    }\r\n    if (data.categoria) {\r\n      formData.append('categoria', data.categoria);\r\n    }\r\n    formData.append('imagen', data.imagen);\r\n\r\n    response = await axios.post<Product>(productEndpoints.create, formData, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        'Content-Type': 'multipart/form-data',\r\n      },\r\n    });\r\n  } else {\r\n    // Envío normal como JSON\r\n    response = await axios.post<Product>(productEndpoints.create, data, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n  }\r\n\r\n  return response.data;\r\n}\r\n\r\n/**\r\n * Actualiza un producto existente\r\n * Si el dato contiene una imagen (File), se envía como FormData\r\n * De lo contrario, se envía como JSON normal\r\n */\r\nexport async function updateProduct(\r\n  id: number,\r\n  data: UpdateProductData,\r\n  token: string\r\n): Promise<Product> {\r\n  let response;\r\n\r\n  // Si hay una imagen (File), usar FormData\r\n  if (data.imagen instanceof File) {\r\n    const formData = new FormData();\r\n    \r\n    if (data.codigo) formData.append('codigo', data.codigo);\r\n    if (data.nombre) formData.append('nombre', data.nombre);\r\n    if (data.precio !== undefined) formData.append('precio', data.precio.toString());\r\n    if (data.stock !== undefined) formData.append('stock', data.stock.toString());\r\n    if (data.descripcion) formData.append('descripcion', data.descripcion);\r\n    if (data.categoria) formData.append('categoria', data.categoria);\r\n    if (data.activo !== undefined) formData.append('activo', data.activo.toString());\r\n    \r\n    formData.append('imagen', data.imagen);\r\n\r\n    response = await axios.put<Product>(productEndpoints.update(id), formData, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        'Content-Type': 'multipart/form-data',\r\n      },\r\n    });\r\n  } else {\r\n    // Envío normal como JSON\r\n    response = await axios.put<Product>(productEndpoints.update(id), data, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n  }\r\n\r\n  return response.data;\r\n}\r\n\r\n/**\r\n * Elimina un producto\r\n */\r\nexport async function deleteProduct(id: number, token: string): Promise<void> {\r\n  await axios.delete(productEndpoints.delete(id), {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * Busca productos por termino de busqueda\r\n */\r\nexport async function searchProducts(\r\n  query: string,\r\n  filters: ProductFilters = {},\r\n  token: string\r\n): Promise<Product[]> {\r\n  const response = await axios.get<Product[]>(productEndpoints.search, {\r\n    params: {\r\n      q: query,\r\n      ...filters,\r\n    },\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  return response.data;\r\n}\r\n\r\n/**\r\n * Obtiene las categorias de productos disponibles\r\n */\r\nexport async function getCategories(token: string): Promise<ProductCategory[]> {\r\n  const response = await axios.get<ProductCategory[]>(productEndpoints.categories, {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  return response.data;\r\n}\r\n\r\n/**\r\n * Verifica si un codigo de producto ya existe\r\n */\r\nexport async function checkProductCodeExists(\r\n  codigo: string,\r\n  excludeId?: number,\r\n  token?: string\r\n): Promise<boolean> {\r\n  try {\r\n    const response = await axios.get<{ exists: boolean }>(\r\n      `${productEndpoints.base}/check-codigo`,\r\n      {\r\n        params: {\r\n          codigo,\r\n          exclude_id: excludeId,\r\n        },\r\n        headers: token ? {\r\n          Authorization: `Bearer ${token}`,\r\n        } : undefined,\r\n      }\r\n    );\r\n\r\n    return response.data.exists;\r\n  } catch {\r\n    return false;\r\n  }\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1986, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/hooks/use-productos.ts"],"sourcesContent":["/**\r\n * Hook personalizado para manejo de productos\r\n */\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { useAuthStore } from '@/store/auth-store';\r\nimport {\r\n  getProducts,\r\n  getProductById,\r\n  createProduct,\r\n  updateProduct,\r\n  deleteProduct,\r\n  searchProducts,\r\n} from '@/lib/services/producto-service';\r\nimport {\r\n  Product,\r\n  CreateProductData,\r\n  UpdateProductData,\r\n  ProductFilters,\r\n  QueryOptions,\r\n  PaginatedResponse,\r\n} from '@/lib/types';\r\n\r\nexport function useProductos() {\r\n  const { token } = useAuthStore();\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [pagination, setPagination] = useState<Omit<PaginatedResponse<Product>, 'items'>>({\r\n    total: 0,\r\n    page: 1,\r\n    page_size: 10,\r\n    total_pages: 0,\r\n  });\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  \r\n  /**\r\n   * Carga la lista de productos\r\n   */\r\n  const loadProducts = useCallback(\r\n    async (options: QueryOptions = {}) => {\r\n      if (!token) return;\r\n      \r\n      setIsLoading(true);\r\n      setError(null);\r\n      \r\n      try {\r\n        const response = await getProducts(options, token);\r\n        setProducts(response.items);\r\n        setPagination({\r\n          total: response.total,\r\n          page: response.page,\r\n          page_size: response.page_size,\r\n          total_pages: response.total_pages,\r\n        });\r\n      } catch (err: any) {\r\n        setError(err.message || 'Error al cargar productos');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    },\r\n    [token]\r\n  );\r\n  \r\n  /**\r\n   * Busca productos por termino\r\n   */\r\n  const searchProductsByTerm = useCallback(\r\n    async (query: string, filters: ProductFilters = {}) => {\r\n      if (!token) return [];\r\n      \r\n      try {\r\n        return await searchProducts(query, filters, token);\r\n      } catch (err: any) {\r\n        setError(err.message || 'Error al buscar productos');\r\n        return [];\r\n      }\r\n    },\r\n    [token]\r\n  );\r\n  \r\n  /**\r\n   * Obtiene un producto por ID\r\n   */\r\n  const getProduct = useCallback(\r\n    async (id: number) => {\r\n      if (!token) return null;\r\n      \r\n      try {\r\n        return await getProductById(id, token);\r\n      } catch (err: any) {\r\n        setError(err.message || 'Error al obtener producto');\r\n        return null;\r\n      }\r\n    },\r\n    [token]\r\n  );\r\n  \r\n  /**\r\n   * Crea un nuevo producto\r\n   */\r\n  const createNewProduct = useCallback(\r\n    async (data: CreateProductData) => {\r\n      if (!token) return null;\r\n      \r\n      try {\r\n        const newProduct = await createProduct(data, token);\r\n        await loadProducts();\r\n        return newProduct;\r\n      } catch (err: any) {\r\n        setError(err.message || 'Error al crear producto');\r\n        return null;\r\n      }\r\n    },\r\n    [token, loadProducts]\r\n  );\r\n  \r\n  /**\r\n   * Actualiza un producto existente\r\n   */\r\n  const updateExistingProduct = useCallback(\r\n    async (id: number, data: UpdateProductData) => {\r\n      if (!token) return null;\r\n      \r\n      try {\r\n        const updatedProduct = await updateProduct(id, data, token);\r\n        await loadProducts();\r\n        return updatedProduct;\r\n      } catch (err: any) {\r\n        setError(err.message || 'Error al actualizar producto');\r\n        return null;\r\n      }\r\n    },\r\n    [token, loadProducts]\r\n  );\r\n  \r\n  /**\r\n   * Elimina un producto\r\n   */\r\n  const deleteExistingProduct = useCallback(\r\n    async (id: number) => {\r\n      if (!token) return false;\r\n      \r\n      try {\r\n        await deleteProduct(id, token);\r\n        await loadProducts();\r\n        return true;\r\n      } catch (err: any) {\r\n        setError(err.message || 'Error al eliminar producto');\r\n        return false;\r\n      }\r\n    },\r\n    [token, loadProducts]\r\n  );\r\n  \r\n  return {\r\n    products,\r\n    pagination,\r\n    isLoading,\r\n    error,\r\n    loadProducts,\r\n    searchProducts: searchProductsByTerm,\r\n    getProduct,\r\n    createProduct: createNewProduct,\r\n    updateProduct: updateExistingProduct,\r\n    deleteProduct: deleteExistingProduct,\r\n  };\r\n}"],"names":[],"mappings":"AAAA;;CAEC;;;;AAED;AACA;AACA;;;;AAiBO,SAAS;IACd,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,sIAAY;IAC9B,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAA4C;QACtF,OAAO;QACP,MAAM;QACN,WAAW;QACX,aAAa;IACf;IACA,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD;;GAEC,GACD,MAAM,eAAe,IAAA,oNAAW,EAC9B,OAAO,UAAwB,CAAC,CAAC;QAC/B,IAAI,CAAC,OAAO;QAEZ,aAAa;QACb,SAAS;QAET,IAAI;YACF,MAAM,WAAW,MAAM,IAAA,qJAAW,EAAC,SAAS;YAC5C,YAAY,SAAS,KAAK;YAC1B,cAAc;gBACZ,OAAO,SAAS,KAAK;gBACrB,MAAM,SAAS,IAAI;gBACnB,WAAW,SAAS,SAAS;gBAC7B,aAAa,SAAS,WAAW;YACnC;QACF,EAAE,OAAO,KAAU;YACjB,SAAS,IAAI,OAAO,IAAI;QAC1B,SAAU;YACR,aAAa;QACf;IACF,GACA;QAAC;KAAM;IAGT;;GAEC,GACD,MAAM,uBAAuB,IAAA,oNAAW,EACtC,OAAO,OAAe,UAA0B,CAAC,CAAC;QAChD,IAAI,CAAC,OAAO,OAAO,EAAE;QAErB,IAAI;YACF,OAAO,MAAM,IAAA,wJAAc,EAAC,OAAO,SAAS;QAC9C,EAAE,OAAO,KAAU;YACjB,SAAS,IAAI,OAAO,IAAI;YACxB,OAAO,EAAE;QACX;IACF,GACA;QAAC;KAAM;IAGT;;GAEC,GACD,MAAM,aAAa,IAAA,oNAAW,EAC5B,OAAO;QACL,IAAI,CAAC,OAAO,OAAO;QAEnB,IAAI;YACF,OAAO,MAAM,IAAA,wJAAc,EAAC,IAAI;QAClC,EAAE,OAAO,KAAU;YACjB,SAAS,IAAI,OAAO,IAAI;YACxB,OAAO;QACT;IACF,GACA;QAAC;KAAM;IAGT;;GAEC,GACD,MAAM,mBAAmB,IAAA,oNAAW,EAClC,OAAO;QACL,IAAI,CAAC,OAAO,OAAO;QAEnB,IAAI;YACF,MAAM,aAAa,MAAM,IAAA,uJAAa,EAAC,MAAM;YAC7C,MAAM;YACN,OAAO;QACT,EAAE,OAAO,KAAU;YACjB,SAAS,IAAI,OAAO,IAAI;YACxB,OAAO;QACT;IACF,GACA;QAAC;QAAO;KAAa;IAGvB;;GAEC,GACD,MAAM,wBAAwB,IAAA,oNAAW,EACvC,OAAO,IAAY;QACjB,IAAI,CAAC,OAAO,OAAO;QAEnB,IAAI;YACF,MAAM,iBAAiB,MAAM,IAAA,uJAAa,EAAC,IAAI,MAAM;YACrD,MAAM;YACN,OAAO;QACT,EAAE,OAAO,KAAU;YACjB,SAAS,IAAI,OAAO,IAAI;YACxB,OAAO;QACT;IACF,GACA;QAAC;QAAO;KAAa;IAGvB;;GAEC,GACD,MAAM,wBAAwB,IAAA,oNAAW,EACvC,OAAO;QACL,IAAI,CAAC,OAAO,OAAO;QAEnB,IAAI;YACF,MAAM,IAAA,uJAAa,EAAC,IAAI;YACxB,MAAM;YACN,OAAO;QACT,EAAE,OAAO,KAAU;YACjB,SAAS,IAAI,OAAO,IAAI;YACxB,OAAO;QACT;IACF,GACA;QAAC;QAAO;KAAa;IAGvB,OAAO;QACL;QACA;QACA;QACA;QACA;QACA,gBAAgB;QAChB;QACA,eAAe;QACf,eAAe;QACf,eAAe;IACjB;AACF"}},
    {"offset": {"line": 2123, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/lib/services/cliente-service.ts"],"sourcesContent":["/**\r\n * Servicio de clientes\r\n * Maneja todas las operaciones CRUD de clientes\r\n */\r\n\r\nimport axios from 'axios';\r\nimport { clientEndpoints } from '../config/endpoints';\r\nimport {\r\n  Client,\r\n  CreateClientData,\r\n  UpdateClientData,\r\n  ClientFilters,\r\n  PaginatedResponse,\r\n  QueryOptions,\r\n} from '../types';\r\n\r\n/**\r\n * Obtiene lista paginada de clientes\r\n */\r\nexport async function getClients(\r\n  options: QueryOptions = {},\r\n  token: string\r\n): Promise<PaginatedResponse<Client>> {\r\n  const params = {\r\n    page: options.page || 1,\r\n    page_size: options.page_size || 10,\r\n    sort_by: options.sort_by,\r\n    sort_order: options.sort_order,\r\n    ...options.filters,\r\n  };\r\n\r\n  const response = await axios.get<PaginatedResponse<Client>>(clientEndpoints.base, {\r\n    params,\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  return response.data;\r\n}\r\n\r\n/**\r\n * Obtiene un cliente por ID\r\n */\r\nexport async function getClientById(id: number, token: string): Promise<Client> {\r\n  const response = await axios.get<Client>(clientEndpoints.byId(id), {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  return response.data;\r\n}\r\n\r\n/**\r\n * Crea un nuevo cliente\r\n */\r\nexport async function createClient(data: CreateClientData, token: string): Promise<Client> {\r\n  const response = await axios.post<Client>(clientEndpoints.create, data, {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  return response.data;\r\n}\r\n\r\n/**\r\n * Actualiza un cliente existente\r\n */\r\nexport async function updateClient(\r\n  id: number,\r\n  data: UpdateClientData,\r\n  token: string\r\n): Promise<Client> {\r\n  const response = await axios.put<Client>(clientEndpoints.update(id), data, {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  return response.data;\r\n}\r\n\r\n/**\r\n * Elimina un cliente\r\n */\r\nexport async function deleteClient(id: number, token: string): Promise<void> {\r\n  await axios.delete(clientEndpoints.delete(id), {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * Busca clientes por termino de busqueda\r\n */\r\nexport async function searchClients(\r\n  query: string,\r\n  filters: ClientFilters = {},\r\n  token: string\r\n): Promise<Client[]> {\r\n  const response = await axios.get<Client[]>(clientEndpoints.search, {\r\n    params: {\r\n      q: query,\r\n      ...filters,\r\n    },\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  return response.data;\r\n}\r\n\r\n/**\r\n * Busca un cliente por numero de documento\r\n */\r\nexport async function getClientByDocument(\r\n  numeroDocumento: string,\r\n  token: string\r\n): Promise<Client | null> {\r\n  try {\r\n    const response = await axios.get<Client>(`${clientEndpoints.base}/by-document`, {\r\n      params: {\r\n        numero_documento: numeroDocumento,\r\n      },\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n\r\n    return response.data;\r\n  } catch (error) {\r\n    if (axios.isAxiosError(error) && error.response?.status === 404) {\r\n      return null;\r\n    }\r\n    throw error;\r\n  }\r\n}"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;;;;;AAED;AACA;;;AAaO,eAAe,WACpB,UAAwB,CAAC,CAAC,EAC1B,KAAa;IAEb,MAAM,SAAS;QACb,MAAM,QAAQ,IAAI,IAAI;QACtB,WAAW,QAAQ,SAAS,IAAI;QAChC,SAAS,QAAQ,OAAO;QACxB,YAAY,QAAQ,UAAU;QAC9B,GAAG,QAAQ,OAAO;IACpB;IAEA,MAAM,WAAW,MAAM,gJAAK,CAAC,GAAG,CAA4B,6IAAe,CAAC,IAAI,EAAE;QAChF;QACA,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;IACF;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,cAAc,EAAU,EAAE,KAAa;IAC3D,MAAM,WAAW,MAAM,gJAAK,CAAC,GAAG,CAAS,6IAAe,CAAC,IAAI,CAAC,KAAK;QACjE,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;IACF;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,aAAa,IAAsB,EAAE,KAAa;IACtE,MAAM,WAAW,MAAM,gJAAK,CAAC,IAAI,CAAS,6IAAe,CAAC,MAAM,EAAE,MAAM;QACtE,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;IACF;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,aACpB,EAAU,EACV,IAAsB,EACtB,KAAa;IAEb,MAAM,WAAW,MAAM,gJAAK,CAAC,GAAG,CAAS,6IAAe,CAAC,MAAM,CAAC,KAAK,MAAM;QACzE,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;IACF;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,aAAa,EAAU,EAAE,KAAa;IAC1D,MAAM,gJAAK,CAAC,MAAM,CAAC,6IAAe,CAAC,MAAM,CAAC,KAAK;QAC7C,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;IACF;AACF;AAKO,eAAe,cACpB,KAAa,EACb,UAAyB,CAAC,CAAC,EAC3B,KAAa;IAEb,MAAM,WAAW,MAAM,gJAAK,CAAC,GAAG,CAAW,6IAAe,CAAC,MAAM,EAAE;QACjE,QAAQ;YACN,GAAG;YACH,GAAG,OAAO;QACZ;QACA,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;IACF;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,oBACpB,eAAuB,EACvB,KAAa;IAEb,IAAI;QACF,MAAM,WAAW,MAAM,gJAAK,CAAC,GAAG,CAAS,GAAG,6IAAe,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE;YAC9E,QAAQ;gBACN,kBAAkB;YACpB;YACA,SAAS;gBACP,eAAe,CAAC,OAAO,EAAE,OAAO;YAClC;QACF;QAEA,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,IAAI,gJAAK,CAAC,YAAY,CAAC,UAAU,MAAM,QAAQ,EAAE,WAAW,KAAK;YAC/D,OAAO;QACT;QACA,MAAM;IACR;AACF"}},
    {"offset": {"line": 2227, "column": 0}, "map": {"version":3,"sources":["file:///D:/sistema-ventas-web/frontend/app/dashboard/ventas/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { VentaForm } from \"@/components/modules/ventas/venta-form\";\r\nimport { useVentas } from \"@/hooks/use-ventas\";\r\nimport { useProductos } from \"@/hooks/use-productos\";\r\nimport { useAuthStore } from \"@/store/auth-store\";\r\nimport { useVentaStore } from \"@/store/venta-store\";\r\nimport { Client, Product } from \"@/lib/types\";\r\nimport { getClients } from \"@/lib/services/cliente-service\";\r\nexport default function VentasPage() {\r\n  const { token, user } = useAuthStore();\r\n  const { createSale, isLoading: ventasCargando, error: ventasError } = useVentas();\r\n  const { products, loadProducts } = useProductos();\r\n  const { setCliente } = useVentaStore();\r\n\r\n  const [clientes, setClientes] = useState<Client[]>([]);\r\n  const [productosVisibles, setProductosVisibles] = useState<Product[]>([]);\r\n  const [inicializando, setInicializando] = useState(true);\r\n  const [enviando, setEnviando] = useState(false);\r\n\r\n  // Carga inicial: clientes y productos\r\n  useEffect(() => {\r\n    async function inicializar() {\r\n      if (!token) {\r\n        setInicializando(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const respuestaClientes = await getClients({}, token);\r\n        setClientes(respuestaClientes.items);\r\n        await loadProducts();\r\n      } catch (error) {\r\n        console.warn('Error cargando datos de ventas (clientes):', error);\r\n      } finally {\r\n        setInicializando(false);\r\n      }\r\n    }\r\n\r\n    inicializar();\r\n  }, [token, loadProducts]);\r\n\r\n  // Actualiza productos visibles cuando cambian los productos cargados\r\n  useEffect(() => {\r\n    setProductosVisibles(products);\r\n  }, [products]);\r\n\r\n  // Selección de cliente\r\n  function handleClienteSelect(clienteId: number) {\r\n    setCliente(clienteId);\r\n  }\r\n\r\n  // Filtrado de productos por búsqueda\r\n  function handleSearchProducto(query: string) {\r\n    if (!query) {\r\n      setProductosVisibles(products);\r\n      return;\r\n    }\r\n\r\n    const lower = query.toLowerCase();\r\n    const filtrados = products.filter((producto) =>\r\n      producto.nombre.toLowerCase().includes(lower) ||\r\n      String(producto.codigo ?? '').toLowerCase().includes(lower)\r\n    );\r\n\r\n    setProductosVisibles(filtrados);\r\n  }\r\n\r\n  // Enviar venta\r\n  async function handleSubmit() {\r\n    setEnviando(true);\r\n    try {\r\n      await createSale();\r\n    } finally {\r\n      setEnviando(false);\r\n    }\r\n  }\r\n\r\n  const cargando = inicializando || ventasCargando || enviando;\r\n  const isClientUser = user?.rol === \"cliente\";\r\n\r\n  return (\r\n    <div className=\"space-y-6 animate-fade-in\">\r\n      {/* HEADER */}\r\n      <header className=\"animate-slide-down\">\r\n        <h1 className=\"text-3xl font-bold mb-2 text-white\">\r\n          {isClientUser ? \"Mis compras y ventas\" : \"Ventas\"}\r\n        </h1>\r\n        <p className=\"text-slate-300 mb-6\">\r\n          {isClientUser\r\n            ? \"Revisa tu carrito y consulta todas tus compras y ventas.\"\r\n            : \"Realizar y gestionar ventas\"}\r\n        </p>\r\n      </header>\r\n\r\n      {/* ERROR */}\r\n      {ventasError && (\r\n        <div className=\"mb-4 rounded-xl border border-red-400/30 bg-red-900/20 px-4 py-2 text-sm text-red-300 shadow-[0_0_10px_rgba(239,68,68,0.2)] animate-slide-up\">\r\n          {ventasError}\r\n        </div>\r\n      )}\r\n\r\n      {/* FORMULARIO DE VENTA */}\r\n      <div className=\"bg-slate-900/60 backdrop-blur-xl p-6 rounded-2xl border border-blue-400/30 shadow-[0_0_15px_rgba(59,130,246,0.1)] animate-slide-up delay-100\">\r\n        <VentaForm\r\n          clientes={clientes}\r\n          productos={productosVisibles}\r\n          onClienteSelect={handleClienteSelect}\r\n          onCreateCliente={() => {\r\n            // Pendiente: integrar formulario de creación de clientes desde ventas\r\n            console.log(\"Crear cliente desde ventas aún no implementado\");\r\n          }}\r\n          onSearchProducto={handleSearchProducto}\r\n          onSubmit={handleSubmit}\r\n          isLoading={cargando}\r\n          isClientUser={isClientUser}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AATA;;;;;;;;;AAUe,SAAS;IACtB,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,IAAA,sIAAY;IACpC,MAAM,EAAE,UAAU,EAAE,WAAW,cAAc,EAAE,OAAO,WAAW,EAAE,GAAG,IAAA,mIAAS;IAC/E,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,GAAG,IAAA,yIAAY;IAC/C,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,wIAAa;IAEpC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAW,EAAE;IACrD,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAY,EAAE;IACxE,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAC;IACnD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,sCAAsC;IACtC,IAAA,kNAAS,EAAC;QACR,eAAe;YACb,IAAI,CAAC,OAAO;gBACV,iBAAiB;gBACjB;YACF;YAEA,IAAI;gBACF,MAAM,oBAAoB,MAAM,IAAA,mJAAU,EAAC,CAAC,GAAG;gBAC/C,YAAY,kBAAkB,KAAK;gBACnC,MAAM;YACR,EAAE,OAAO,OAAO;gBACd,QAAQ,IAAI,CAAC,8CAA8C;YAC7D,SAAU;gBACR,iBAAiB;YACnB;QACF;QAEA;IACF,GAAG;QAAC;QAAO;KAAa;IAExB,qEAAqE;IACrE,IAAA,kNAAS,EAAC;QACR,qBAAqB;IACvB,GAAG;QAAC;KAAS;IAEb,uBAAuB;IACvB,SAAS,oBAAoB,SAAiB;QAC5C,WAAW;IACb;IAEA,qCAAqC;IACrC,SAAS,qBAAqB,KAAa;QACzC,IAAI,CAAC,OAAO;YACV,qBAAqB;YACrB;QACF;QAEA,MAAM,QAAQ,MAAM,WAAW;QAC/B,MAAM,YAAY,SAAS,MAAM,CAAC,CAAC,WACjC,SAAS,MAAM,CAAC,WAAW,GAAG,QAAQ,CAAC,UACvC,OAAO,SAAS,MAAM,IAAI,IAAI,WAAW,GAAG,QAAQ,CAAC;QAGvD,qBAAqB;IACvB;IAEA,eAAe;IACf,eAAe;QACb,YAAY;QACZ,IAAI;YACF,MAAM;QACR,SAAU;YACR,YAAY;QACd;IACF;IAEA,MAAM,WAAW,iBAAiB,kBAAkB;IACpD,MAAM,eAAe,MAAM,QAAQ;IAEnC,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAO,WAAU;;kCAChB,8OAAC;wBAAG,WAAU;kCACX,eAAe,yBAAyB;;;;;;kCAE3C,8OAAC;wBAAE,WAAU;kCACV,eACG,6DACA;;;;;;;;;;;;YAKP,6BACC,8OAAC;gBAAI,WAAU;0BACZ;;;;;;0BAKL,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,8JAAS;oBACR,UAAU;oBACV,WAAW;oBACX,iBAAiB;oBACjB,iBAAiB;wBACf,sEAAsE;wBACtE,QAAQ,GAAG,CAAC;oBACd;oBACA,kBAAkB;oBAClB,UAAU;oBACV,WAAW;oBACX,cAAc;;;;;;;;;;;;;;;;;AAKxB"}}]
}